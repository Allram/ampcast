/*! For license information please see bundle.js.LICENSE.txt */
(globalThis.webpackChunkampcast=globalThis.webpackChunkampcast||[]).push([[296],{6998:function(e){e.exports=function(e,t){if(null==t&&(t={fuzzy:!0}),/youtu\.?be/.test(e)){var n,r=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(n=0;n<r.length;++n)if(r[n].test(e))return r[n].exec(e)[1];if(t.fuzzy){var i=e.split(/[\/\&\?=#\.\s]/g);for(n=0;n<i.length;++n)if(/^[^#\&\?]{11}$/.test(i[n]))return i[n]}}return null}},4448:(e,t,n)=>{"use strict";var r=n(7294),i=n(3840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function h(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new h(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new h(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new h(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new h(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new h(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new h(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(m,e)&&(f.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);v[t]=new h(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);v[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);v[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var _=Symbol.iterator;function $(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}var L,D=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var R=!1;function F(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(1!==o||1!==l)do{if(o--,0>--l||i[o]!==a[l]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=l);break}}}finally{R=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return F(e.type,!1);case 11:return F(e.type.render,!1);case 1:return F(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case C:return"Profiler";case E:return"StrictMode";case z:return"Suspense";case I:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function G(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){G(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=he(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(me).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var ge=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ee=null;function Ce(e){if(e=yi(e)){if("function"!=typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),ke(e.stateNode,e.type,t))}}function Pe(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function ze(){}var Ie=!1;function Ne(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ae(e,t,n)}finally{Ie=!1,(null!==Se||null!==Ee)&&(ze(),Te())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(u)try{var _e={};Object.defineProperty(_e,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",_e,_e),window.removeEventListener("test",_e,_e)}catch(ue){Oe=!1}function $e(e,t,n,r,i,a,o,l,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Le=!1,De=null,je=!1,Re=null,Fe={onError:function(e){Le=!0,De=e}};function Be(e,t,n,r,i,a,o,l,s){Le=!1,De=null,$e.apply(Fe,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,s=i.child;s;){if(s===n){l=!0,n=i,r=o;break}if(s===r){l=!0,r=i,n=o;break}s=s.sibling}if(!l){for(s=o.child;s;){if(s===n){l=!0,n=o,r=i;break}if(s===r){l=!0,r=o,n=i;break}s=s.sibling}if(!l)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ge=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null,ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(lt(e)/st|0)|0},lt=Math.log,st=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var l=o&~i;0!==l?r=dt(l):0!=(a&=o)&&(r=dt(a))}else 0!=(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function wt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var xt,kt,St,Et,Ct,Pt=!1,Tt=[],At=null,zt=null,It=null,Nt=new Map,Mt=new Map,Ot=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $t(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=yi(t))&&kt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Dt(e){var t=bi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Rt(e,t,n){jt(e)&&n.delete(t)}function Ft(){Pt=!1,null!==At&&jt(At)&&(At=null),null!==zt&&jt(zt)&&(zt=null),null!==It&&jt(It)&&(It=null),Nt.forEach(Rt),Mt.forEach(Rt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Pt||(Pt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==zt&&Bt(zt,e),null!==It&&Bt(It,e),Nt.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Dt(n),null===n.blockedOn&&Ot.shift()}var Ut=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=yt,a=Ut.transition;Ut.transition=null;try{yt=1,Yt(e,t,n,r)}finally{yt=i,Ut.transition=a}}function qt(e,t,n,r){var i=yt,a=Ut.transition;Ut.transition=null;try{yt=4,Yt(e,t,n,r)}finally{yt=i,Ut.transition=a}}function Yt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),$t(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Lt(At,e,t,n,r,i),!0;case"dragenter":return zt=Lt(zt,e,t,n,r,i),!0;case"mouseover":return It=Lt(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Lt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Mt.set(a,Lt(Mt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if($t(e,r),4&t&&-1<_t.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&xt(a),null===(a=Qt(e,t,n,r))&&Hr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=bi(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Gt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Gt?Gt.value:Gt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,ln,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=D({},cn,{view:0,detail:0}),fn=an(dn),mn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,ln=e.screenY-sn.screenY):ln=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),pn=an(mn),hn=an(D({},mn,{dataTransfer:0})),vn=an(D({},dn,{relatedTarget:0})),gn=an(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),wn=an(D({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return En}var Pn=D({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Pn),An=an(D({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),zn=an(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=an(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=D({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(Nn),On=[9,13,27,32],_n=u&&"CompositionEvent"in window,$n=null;u&&"documentMode"in document&&($n=document.documentMode);var Ln=u&&"TextEvent"in window&&!$n,Dn=u&&(!_n||$n&&8<$n&&11>=$n),jn=String.fromCharCode(32),Rn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1,Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Wn(e,t,n,r){Pe(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Yn=null;function Kn(e){jr(e,0)}function Qn(e){if(Y(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Gn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Jn=Zn}else Jn=!1;Gn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Yn=qn=null)}function nr(e){if("value"===e.propertyName&&Qn(Yn)){var t=[];Wn(t,Yn,e,xe(e)),Ne(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Yn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var lr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function sr(e,t){if(lr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,br=null,yr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==K(r)||(r="selectionStart"in(r=vr)&&mr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&sr(br,r)||(br=r,0<(r=qr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Er={};function Cr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Pr=Cr("animationend"),Tr=Cr("animationiteration"),Ar=Cr("animationstart"),zr=Cr("transitionend"),Ir=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Ir.set(e,t),s(t,[e])}for(var Or=0;Or<Nr.length;Or++){var _r=Nr[Or];Mr(_r.toLowerCase(),"on"+(_r[0].toUpperCase()+_r.slice(1)))}Mr(Pr,"onAnimationEnd"),Mr(Tr,"onAnimationIteration"),Mr(Ar,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(zr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,l,s,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=De;Le=!1,De=null,je||(je=!0,Re=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==a&&i.isPropagationStopped())break e;Dr(i,l,c),a=s}else for(o=0;o<r.length;o++){if(s=(l=r[o]).instance,c=l.currentTarget,l=l.listener,s!==a&&i.isPropagationStopped())break e;Dr(i,l,c),a=s}}}if(je)throw e=Re,je=!1,Re=null,e}function Rr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Fr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===i||8===l.nodeType&&l.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==l;){if(null===(o=bi(l)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}l=l.parentNode}}r=r.return}Ne((function(){var r=a,i=xe(n),o=[];e:{var l=Ir.get(e);if(void 0!==l){var s=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=vn;break;case"focusout":c="blur",s=vn;break;case"beforeblur":case"afterblur":s=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=zn;break;case Pr:case Tr:case Ar:s=gn;break;case zr:s=In;break;case"scroll":s=fn;break;case"wheel":s=Mn;break;case"copy":case"cut":case"paste":s=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var u=0!=(4&t),d=!u&&"scroll"===e,f=u?null!==l?l+"Capture":null:l;u=[];for(var m,p=r;null!==p;){var h=(m=p).stateNode;if(5===m.tag&&null!==h&&(m=h,null!==f&&null!=(h=Me(p,f))&&u.push(Wr(p,h,m))),d)break;p=p.return}0<u.length&&(l=new s(l,c,null,n,i),o.push({event:l,listeners:u}))}}if(0==(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[pi])&&(s||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(u=pn,h="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,h="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==s?l:wi(s),m=null==c?l:wi(c),(l=new u(h,p+"leave",s,n,i)).target=d,l.relatedTarget=m,h=null,bi(i)===r&&((u=new u(f,p+"enter",c,n,i)).target=m,u.relatedTarget=d,h=u),d=h,s&&c)e:{for(f=c,p=0,m=u=s;m;m=Yr(m))p++;for(m=0,h=f;h;h=Yr(h))m++;for(;0<p-m;)u=Yr(u),p--;for(;0<m-p;)f=Yr(f),m--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Yr(u),f=Yr(f)}u=null}else u=null;null!==s&&Kr(o,l,s,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(s=(l=r?wi(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var v=Xn;else if(Hn(l))if(Gn)v=or;else{v=ir;var g=rr}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(v=ar);switch(v&&(v=v(e,r))?Wn(o,v,n,i):(g&&g(e,l,r),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&ee(l,"number",l.value)),g=r?wi(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,br=null);break;case"focusout":br=gr=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,wr(o,n,i);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":wr(o,n,i)}var b;if(_n)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vn?Fn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Vn&&(b=en()):(Jt="value"in(Gt=i)?Gt.value:Gt.textContent,Vn=!0)),0<(g=qr(r,y)).length&&(y=new wn(y,e,null,n,i),o.push({event:y,listeners:g}),(b||null!==(b=Bn(n)))&&(y.data=b))),(b=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Rn=!0,jn);case"textInput":return(e=t.data)===jn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!_n&&Fn(e,t)?(e=en(),Zt=Jt=Gt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=b)}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Me(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Me(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var l=n,s=l.alternate,c=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==c&&(l=c,i?null!=(s=Me(n,a))&&o.unshift(Wr(n,s,l)):i||null!=(s=Me(n,a))&&o.push(Wr(n,s,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Gr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Gr(t),Gr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(li)}:ri;function li(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,mi="__reactProps$"+di,pi="__reactContainer$"+di,hi="__reactEvents$"+di,vi="__reactListeners$"+di,gi="__reactHandles$"+di;function bi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[fi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[mi]||null}var ki=[],Si=-1;function Ei(e){return{current:e}}function Ci(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Pi(e,t){Si++,ki[Si]=e.current,e.current=t}var Ti={},Ai=Ei(Ti),zi=Ei(!1),Ii=Ti;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mi(e){return null!=e.childContextTypes}function Oi(){Ci(zi),Ci(Ai)}function _i(e,t,n){if(Ai.current!==Ti)throw Error(a(168));Pi(Ai,t),Pi(zi,n)}function $i(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,U(e)||"Unknown",i));return D({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ii=Ai.current,Pi(Ai,e),Pi(zi,zi.current),!0}function Di(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=$i(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ci(zi),Ci(Ai),Pi(Ai,e)):Ci(zi),Pi(zi,n)}var ji=null,Ri=!1,Fi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function Vi(){if(!Fi&&null!==ji){Fi=!0;var e=0,t=yt;try{var n=ji;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ri=!1}catch(t){throw null!==ji&&(ji=ji.slice(e+1)),Ye(Ze,Vi),t}finally{yt=t,Fi=!1}}return null}var Ui=[],Hi=0,Wi=null,qi=0,Yi=[],Ki=0,Qi=null,Xi=1,Gi="";function Ji(e,t){Ui[Hi++]=qi,Ui[Hi++]=Wi,Wi=e,qi=t}function Zi(e,t,n){Yi[Ki++]=Xi,Yi[Ki++]=Gi,Yi[Ki++]=Qi,Qi=e;var r=Xi;e=Gi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Gi=a+e}else Xi=1<<a|n<<i|r,Gi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Ui[--Hi],Ui[Hi]=null,qi=Ui[--Hi],Ui[Hi]=null;for(;e===Qi;)Qi=Yi[--Ki],Yi[Ki]=null,Gi=Yi[--Ki],Yi[Ki]=null,Xi=Yi[--Ki],Yi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Xi,overflow:Gi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!la(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&la(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function ma(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ha=w.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ei(null),ba=null,ya=null,wa=null;function xa(){wa=ya=ba=null}function ka(e){var t=ga.current;Ci(ga),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ba=e,wa=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(wl=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===ba)throw Error(a(308));ya=e,ba.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var Pa=null;function Ta(e){null===Pa?Pa=[e]:Pa.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,za(e,r)}function za(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ia=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _a(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,za(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,za(e,n)}function $a(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Da(e,t,n,r){var i=e.updateQueue;Ia=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var s=l,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var u=e.alternate;null!==u&&(l=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=s)}if(null!==a){var d=i.baseState;for(o=0,u=c=s=null,l=a;;){var f=l.lane,m=l.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,h=l;switch(f=t,m=n,h.tag){case 1:if("function"==typeof(p=h.payload)){d=p.call(m,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=h.payload)?p.call(m,d,f):p))break e;d=D({},d,f);break e;case 2:Ia=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=m,s=d):u=u.next=m,o|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===u&&(s=d),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ls|=o,e.lanes=o,e.memoizedState=d}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var Ra=(new r.Component).refs;function Fa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=_a(e,a,i))&&(nc(t,e,i,r),$a(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=_a(e,a,i))&&(nc(t,e,i,r),$a(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=_a(e,i,r))&&(nc(t,e,r,n),$a(t,e,r))}};function Va(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&sr(n,r)&&sr(i,a))}function Ua(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"==typeof a&&null!==a?a=Ca(a):(i=Mi(t)?Ii:Ai.current,a=(r=null!=(r=t.contextTypes))?Ni(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ra,Na(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=Ca(a):(a=Mi(t)?Ii:Ai.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Fa(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Da(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ra&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===M&&Ka(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=_c(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=$c(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=_c(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case k:return(t=jc(t,e.mode,n)).return=e,t;case M:return f(e,(0,t._init)(t._payload),n)}if(te(t)||$(t))return(t=$c(t,e.mode,n,null)).return=e,t;Ya(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case M:return m(e,t,(i=n._init)(n._payload),r)}if(te(n)||$(n))return null!==i?null:d(e,t,n,r,null);Ya(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||$(r))return d(t,e=e.get(n)||null,r,i,null);Ya(t,r)}return null}function h(i,a,l,s){for(var c=null,u=null,d=a,h=a=0,v=null;null!==d&&h<l.length;h++){d.index>h?(v=d,d=null):v=d.sibling;var g=m(i,d,l[h],s);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,h),null===u?c=g:u.sibling=g,u=g,d=v}if(h===l.length)return n(i,d),ia&&Ji(i,h),c;if(null===d){for(;h<l.length;h++)null!==(d=f(i,l[h],s))&&(a=o(d,a,h),null===u?c=d:u.sibling=d,u=d);return ia&&Ji(i,h),c}for(d=r(i,d);h<l.length;h++)null!==(v=p(d,i,h,l[h],s))&&(e&&null!==v.alternate&&d.delete(null===v.key?h:v.key),a=o(v,a,h),null===u?c=v:u.sibling=v,u=v);return e&&d.forEach((function(e){return t(i,e)})),ia&&Ji(i,h),c}function v(i,l,s,c){var u=$(s);if("function"!=typeof u)throw Error(a(150));if(null==(s=u.call(s)))throw Error(a(151));for(var d=u=null,h=l,v=l=0,g=null,b=s.next();null!==h&&!b.done;v++,b=s.next()){h.index>v?(g=h,h=null):g=h.sibling;var y=m(i,h,b.value,c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),l=o(y,l,v),null===d?u=y:d.sibling=y,d=y,h=g}if(b.done)return n(i,h),ia&&Ji(i,v),u;if(null===h){for(;!b.done;v++,b=s.next())null!==(b=f(i,b.value,c))&&(l=o(b,l,v),null===d?u=b:d.sibling=b,d=b);return ia&&Ji(i,v),u}for(h=r(i,h);!b.done;v++,b=s.next())null!==(b=p(h,i,v,b.value,c))&&(e&&null!==b.alternate&&h.delete(null===b.key?v:b.key),l=o(b,l,v),null===d?u=b:d.sibling=b,d=b);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),u}return function e(r,a,o,s){if("object"==typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===M&&Ka(c)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=qa(r,u,o),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((a=$c(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=_c(o.type,o.key,o.props,null,r.mode,s)).ref=qa(r,a,o),s.return=r,r=s)}return l(r);case k:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return l(r);case M:return e(r,a,(u=o._init)(o._payload),s)}if(te(o))return h(r,a,o,s);if($(o))return v(r,a,o,s);Ya(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Dc(o,r.mode,s)).return=r,r=a),l(r)):n(r,a)}}var Xa=Qa(!0),Ga=Qa(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Pi(to,t),Pi(eo,e),Pi(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Za),Pi(Za,t)}function io(){Ci(Za),Ci(eo),Ci(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Pi(eo,e),Pi(Za,n))}function oo(e){eo.current===e&&(Ci(Za),Ci(eo))}var lo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,mo=w.ReactCurrentBatchConfig,po=0,ho=null,vo=null,go=null,bo=!1,yo=!1,wo=0,xo=0;function ko(){throw Error(a(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ll:sl,e=n(r,i),yo){o=0;do{if(yo=!1,wo=0,25<=o)throw Error(a(301));o+=1,go=vo=null,t.updateQueue=null,fo.current=cl,e=n(r,i)}while(yo)}if(fo.current=ol,t=null!==vo&&null!==vo.next,po=0,go=vo=ho=null,bo=!1,t)throw Error(a(300));return e}function Co(){var e=0!==wo;return wo=0,e}function Po(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?ho.memoizedState=go=e:go=go.next=e,go}function To(){if(null===vo){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?ho.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?ho.memoizedState=go=e:go=go.next=e}return go}function Ao(e,t){return"function"==typeof t?t(e):t}function zo(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=l=null,c=null,u=o;do{var d=u.lane;if((po&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(s=c=f,l=r):c=c.next=f,ho.lanes|=d,Ls|=d}u=u.next}while(null!==u&&u!==o);null===c?l=r:c.next=s,lr(r,t.memoizedState)||(wl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ho.lanes|=o,Ls|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var l=i=i.next;do{o=e(o,l.action),l=l.next}while(l!==i);lr(o,t.memoizedState)||(wl=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Mo(e,t){var n=ho,r=To(),i=t(),o=!lr(r.memoizedState,i);if(o&&(r.memoizedState=i,wl=!0),r=r.queue,Ho($o.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Ro(9,_o.bind(null,n,r,i,t),void 0,null),null===zs)throw Error(a(349));0!=(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Do(e)}function $o(e,t,n){return n((function(){Lo(t)&&Do(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(e){return!0}}function Do(e){var t=za(e,1);null!==t&&nc(t,e,1,-1)}function jo(e){var t=Po();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=nl.bind(null,ho,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return To().memoizedState}function Bo(e,t,n,r){var i=Po();ho.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Ro(t,n,a,r))}ho.flags|=e,i.memoizedState=Ro(1|t,n,a,r)}function Uo(e,t){return Bo(8390656,8,e,t)}function Ho(e,t){return Vo(2048,8,e,t)}function Wo(e,t){return Vo(4,2,e,t)}function qo(e,t){return Vo(4,4,e,t)}function Yo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!=n?n.concat([e]):null,Vo(4,4,Yo.bind(null,t,e),n)}function Qo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,wl=!0),e.memoizedState=n):(lr(n,t)||(n=ht(),ho.lanes|=n,Ls|=n,e.baseState=!0),t)}function Zo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=mo.transition;mo.transition={};try{e(!1),t()}finally{yt=n,mo.transition=r}}function el(){return To().memoizedState}function tl(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rl(e)?il(t,n):null!==(n=Aa(e,t,n,r))&&(nc(n,e,r,ec()),al(n,t,r))}function nl(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rl(e))il(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,lr(l,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Aa(e,t,i,r))&&(nc(n,e,r,i=ec()),al(n,t,r))}}function rl(e){var t=e.alternate;return e===ho||null!==t&&t===ho}function il(e,t){yo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function al(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var ol={readContext:Ca,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ll={readContext:Ca,useCallback:function(e,t){return Po().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Bo(4194308,4,Yo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Po();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Po();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tl.bind(null,ho,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Po().memoizedState=e},useState:jo,useDebugValue:Qo,useDeferredValue:function(e){return Po().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Po().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ho,i=Po();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===zs)throw Error(a(349));0!=(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo($o.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,_o.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Po(),t=zs.identifierPrefix;if(ia){var n=Gi;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sl={readContext:Ca,useCallback:Xo,useContext:Ca,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Go,useReducer:zo,useRef:Fo,useState:function(){return zo(Ao)},useDebugValue:Qo,useDeferredValue:function(e){return Jo(To(),vo.memoizedState,e)},useTransition:function(){return[zo(Ao)[0],To().memoizedState]},useMutableSource:No,useSyncExternalStore:Mo,useId:el,unstable_isNewReconciler:!1},cl={readContext:Ca,useCallback:Xo,useContext:Ca,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Go,useReducer:Io,useRef:Fo,useState:function(){return Io(Ao)},useDebugValue:Qo,useDeferredValue:function(e){var t=To();return null===vo?t.memoizedState=e:Jo(t,vo.memoizedState,e)},useTransition:function(){return[Io(Ao)[0],To().memoizedState]},useMutableSource:No,useSyncExternalStore:Mo,useId:el,unstable_isNewReconciler:!1};function ul(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fl(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ml="function"==typeof WeakMap?WeakMap:Map;function pl(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Ws=r),fl(0,t)},n}function hl(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fl(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){fl(0,t),"function"!=typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ml;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bl(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,_a(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yl=w.ReactCurrentOwner,wl=!1;function xl(e,t,n,r){t.child=null===e?Ga(t,null,n,r):Xa(t,e.child,n,r)}function kl(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=Co(),null===e||wl?(ia&&n&&ea(t),t.flags|=1,xl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function Sl(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Mc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_c(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,El(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Hl(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function El(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wl=!1,t.pendingProps=r=a,0==(e.lanes&i))return t.lanes=e.lanes,Hl(e,t,i);0!=(131072&e.flags)&&(wl=!0)}}return Tl(e,t,n,r,i)}function Cl(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(Os,Ms),Ms|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pi(Os,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Pi(Os,Ms),Ms|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Pi(Os,Ms),Ms|=r;return xl(e,t,i,n),t.child}function Pl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tl(e,t,n,r,i){var a=Mi(n)?Ii:Ai.current;return a=Ni(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=Co(),null===e||wl?(ia&&r&&ea(t),t.flags|=1,xl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function Al(e,t,n,r,i){if(Mi(n)){var a=!0;Li(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ul(e,t),Ua(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,l=t.memoizedProps;o.props=l;var s=o.context,c=n.contextType;c="object"==typeof c&&null!==c?Ca(c):Ni(t,c=Mi(n)?Ii:Ai.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l!==r||s!==c)&&Ha(t,o,r,c),Ia=!1;var f=t.memoizedState;o.state=f,Da(t,r,o,i),s=t.memoizedState,l!==r||f!==s||zi.current||Ia?("function"==typeof u&&(Fa(t,n,u,r),s=t.memoizedState),(l=Ia||Va(t,n,l,r,f,s,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ma(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:va(t.type,l),o.props=c,d=t.pendingProps,f=o.context,s="object"==typeof(s=n.contextType)&&null!==s?Ca(s):Ni(t,s=Mi(n)?Ii:Ai.current);var m=n.getDerivedStateFromProps;(u="function"==typeof m||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l!==d||f!==s)&&Ha(t,o,r,s),Ia=!1,f=t.memoizedState,o.state=f,Da(t,r,o,i);var p=t.memoizedState;l!==d||f!==p||zi.current||Ia?("function"==typeof m&&(Fa(t,n,m,r),p=t.memoizedState),(c=Ia||Va(t,n,c,r,f,p,s)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return zl(e,t,n,r,a,i)}function zl(e,t,n,r,i,a){Pl(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Di(t,n,!1),Hl(e,t,a);r=t.stateNode,yl.current=t;var l=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,l,a)):xl(e,t,l,a),t.memoizedState=r.state,i&&Di(t,n,!0),t.child}function Il(e){var t=e.stateNode;t.pendingContext?_i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_i(0,t.context,!1),ro(e,t.containerInfo)}function Nl(e,t,n,r,i){return ma(),pa(i),t.flags|=256,xl(e,t,n,r),t.child}var Ml,Ol,_l,$l={dehydrated:null,treeContext:null,retryLane:0};function Ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dl(e,t,n){var r,i=t.pendingProps,o=lo.current,l=!1,s=0!=(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Pi(lo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,l?(i=t.mode,l=t.child,s={mode:"hidden",children:s},0==(1&i)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=Lc(s,i,0,null),e=$c(e,i,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ll(n),t.memoizedState=$l,e):jl(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,l){if(n)return 256&t.flags?(t.flags&=-257,Rl(e,t,l,r=dl(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=$c(o,i,l,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Xa(t,e.child,null,l),t.child.memoizedState=Ll(l),t.memoizedState=$l,o);if(0==(1&t.mode))return Rl(e,t,l,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Rl(e,t,l,r=dl(o=Error(a(419)),r,void 0))}if(s=0!=(l&e.childLanes),wl||s){if(null!==(r=zs)){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|l))?0:i)&&i!==o.retryLane&&(o.retryLane=i,za(e,i),nc(r,e,i,-1))}return hc(),Rl(e,t,l,r=dl(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Yi[Ki++]=Xi,Yi[Ki++]=Gi,Yi[Ki++]=Qi,Xi=e.id,Gi=e.overflow,Qi=t),(t=jl(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(l){l=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?l=Oc(r,l):(l=$c(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,s=null===(s=e.child.memoizedState)?Ll(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=$l,i}return e=(l=e.child).sibling,i=Oc(l,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function jl(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Rl(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=jl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function Bl(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vl(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xl(e,t,r.children,n),0!=(2&(r=lo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fl(e,n,t);else if(19===e.tag)Fl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pi(lo,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bl(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bl(t,!0,n,null,a);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ul(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ls|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wl(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yl(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ql(t),null;case 1:case 17:return Mi(t.type)&&Oi(),ql(t),null;case 3:return r=t.stateNode,io(),Ci(zi),Ci(Ai),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),ql(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ol(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return ql(t),null}if(e=no(Za.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[mi]=o,e=0!=(1&t.mode),n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(i=0;i<$r.length;i++)Rr($r[i],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":X(r,o),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Rr("invalid",r);break;case"textarea":ie(r,o),Rr("invalid",r)}for(var s in be(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"==typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):l.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Rr("scroll",r)}switch(n){case"input":q(r),Z(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[mi]=r,Ml(e,t),t.stateNode=e;e:{switch(s=ye(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),i=r;break;case"iframe":case"object":case"embed":Rr("load",e),i=r;break;case"video":case"audio":for(i=0;i<$r.length;i++)Rr($r[i],e);i=r;break;case"source":Rr("error",e),i=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),i=r;break;case"details":Rr("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),Rr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=D({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Rr("invalid",e)}for(o in be(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ve(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Rr("scroll",e):null!=u&&y(e,o,u,s))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ql(t),null;case 6:if(e&&null!=t.stateNode)_l(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return ql(t),null;case 13:if(Ci(lo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!=(1&t.mode)&&0==(128&t.flags))fa(),ma(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else ma(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ql(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&lo.current)?0===_s&&(_s=3):hc())),null!==t.updateQueue&&(t.flags|=4),ql(t),null);case 4:return io(),null===e&&Vr(t.stateNode.containerInfo),ql(t),null;case 10:return ka(t.type._context),ql(t),null;case 19:if(Ci(lo),null===(o=t.memoizedState))return ql(t),null;if(r=0!=(128&t.flags),null===(s=o.rendering))if(r)Wl(o,!1);else{if(0!==_s||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wl(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pi(lo,1&lo.current|2),t.child}e=e.sibling}null!==o.tail&&Ge()>Vs&&(t.flags|=128,r=!0,Wl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return ql(t),null}else 2*Ge()-o.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,Wl(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ge(),t.sibling=null,n=lo.current,Pi(lo,r?1&n|2:1&n),t):(ql(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Ms)&&(ql(t),6&t.subtreeFlags&&(t.flags|=8192)):ql(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Kl(e,t){switch(ta(t),t.tag){case 1:return Mi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(zi),Ci(Ai),uo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(lo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(lo),null;case 4:return io(),null;case 10:return ka(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ml=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ol=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=D({},i,{value:void 0}),r=D({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(l.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(s=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(null!=c||null!=s))if("style"===u)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(l.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Rr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},_l=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ql=!1,Xl=!1,Gl="function"==typeof WeakSet?WeakSet:Set,Jl=null;function Zl(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Ec(e,t,n)}else n.current=null}function es(e,t,n){try{n()}catch(n){Ec(e,t,n)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[fi],delete t[mi],delete t[hi],delete t[vi],delete t[gi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function ls(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var us=null,ds=!1;function fs(e,t,n){for(n=n.child;null!==n;)ms(e,t,n),n=n.sibling}function ms(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Xl||Zl(n,t);case 6:var r=us,i=ds;us=null,fs(e,t,n),ds=i,null!==(us=r)&&(ds?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ds?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Vt(e)):si(us,n.stateNode));break;case 4:r=us,i=ds,us=n.stateNode.containerInfo,ds=!0,fs(e,t,n),us=r,ds=i;break;case 0:case 11:case 14:case 15:if(!Xl&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!=(2&a)||0!=(4&a))&&es(n,t,o),i=i.next}while(i!==r)}fs(e,t,n);break;case 1:if(!Xl&&(Zl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Ec(n,t,e)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:1&n.mode?(Xl=(r=Xl)||null!==n.memoizedState,fs(e,t,n),Xl=r):fs(e,t,n);break;default:fs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Gl),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ds=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ds=!0;break e}s=s.return}if(null===us)throw Error(a(160));ms(o,l,i),us=null,ds=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Ec(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vs(t,e),t=t.sibling}function vs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),gs(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(t){Ec(e,e.return,t)}try{ns(5,e,e.return)}catch(t){Ec(e,e.return,t)}}break;case 1:hs(t,e),gs(e),512&r&&null!==n&&Zl(n,n.return);break;case 5:if(hs(t,e),gs(e),512&r&&null!==n&&Zl(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(t){Ec(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,l=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&G(i,o),ye(s,l);var u=ye(s,o);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];"style"===d?ve(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):y(i,d,f,u)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):m!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[mi]=o}catch(t){Ec(e,e.return,t)}}break;case 6:if(hs(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){Ec(e,e.return,t)}}break;case 3:if(hs(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(t){Ec(e,e.return,t)}break;case 4:default:hs(t,e),gs(e);break;case 13:hs(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Ge())),4&r&&ps(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xl=(u=Xl)||d,hs(t,e),Xl=u):hs(t,e),gs(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!=(1&e.mode))for(Jl=e,d=e.child;null!==d;){for(f=Jl=d;null!==Jl;){switch(p=(m=Jl).child,m.tag){case 0:case 11:case 14:case 15:ns(4,m,m.return);break;case 1:Zl(m,m.return);var h=m.stateNode;if("function"==typeof h.componentWillUnmount){r=m,n=m.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(e){Ec(r,n,e)}}break;case 5:Zl(m,m.return);break;case 22:if(null!==m.memoizedState){xs(f);continue}}null!==p?(p.return=m,Jl=p):xs(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,l=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,s.style.display=he("display",l))}catch(t){Ec(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(t){Ec(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hs(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cs(e,ls(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,ls(e),o);break;default:throw Error(a(161))}}catch(t){Ec(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bs(e,t,n){Jl=e,ys(e,t,n)}function ys(e,t,n){for(var r=0!=(1&e.mode);null!==Jl;){var i=Jl,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ql;if(!o){var l=i.alternate,s=null!==l&&null!==l.memoizedState||Xl;l=Ql;var c=Xl;if(Ql=o,(Xl=s)&&!c)for(Jl=i;null!==Jl;)s=(o=Jl).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Jl=s):ks(i);for(;null!==a;)Jl=a,ys(a,t,n),a=a.sibling;Jl=i,Ql=l,Xl=c}ws(e)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,Jl=a):ws(e)}}function ws(e){for(;null!==Jl;){var t=Jl;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xl||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:va(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,l,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Vt(f)}}}break;default:throw Error(a(163))}Xl||512&t.flags&&is(t)}catch(e){Ec(t,t.return,e)}}if(t===e){Jl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jl=n;break}Jl=t.return}}function xs(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jl=n;break}Jl=t.return}}function ks(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(e){Ec(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Ec(t,i,e)}}var a=t.return;try{is(t)}catch(e){Ec(t,a,e)}break;case 5:var o=t.return;try{is(t)}catch(e){Ec(t,o,e)}}}catch(e){Ec(t,t.return,e)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var Ss,Es=Math.ceil,Cs=w.ReactCurrentDispatcher,Ps=w.ReactCurrentOwner,Ts=w.ReactCurrentBatchConfig,As=0,zs=null,Is=null,Ns=0,Ms=0,Os=Ei(0),_s=0,$s=null,Ls=0,Ds=0,js=0,Rs=null,Fs=null,Bs=0,Vs=1/0,Us=null,Hs=!1,Ws=null,qs=null,Ys=!1,Ks=null,Qs=0,Xs=0,Gs=null,Js=-1,Zs=0;function ec(){return 0!=(6&As)?Ge():-1!==Js?Js:Js=Ge()}function tc(e){return 0==(1&e.mode)?1:0!=(2&As)&&0!==Ns?Ns&-Ns:null!==ha.transition?(0===Zs&&(Zs=ht()),Zs):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,Gs=null,Error(a(185));gt(e,n,r),0!=(2&As)&&e===zs||(e===zs&&(0==(2&As)&&(Ds|=n),4===_s&&lc(e,Ns)),rc(e,r),1===n&&0===As&&0==(1&t.mode)&&(Vs=Ge()+500,Ri&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),l=1<<o,s=i[o];-1===s?0!=(l&n)&&0==(l&r)||(i[o]=mt(l,t)):s<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var r=ft(e,e===zs?Ns:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ri=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0==(6&As)&&Vi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=zc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!=(6&As))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ft(e,e===zs?Ns:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=As;As|=2;var o=pc();for(zs===e&&Ns===t||(Us=null,Vs=Ge()+500,fc(e,t));;)try{bc();break}catch(t){mc(e,t)}xa(),Cs.current=o,As=i,null!==Is?t=0:(zs=null,Ns=0,t=_s)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=ac(e,i)),1===t)throw n=$s,fc(e,0),lc(e,r),rc(e,Ge()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!lr(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&0!==(o=pt(e))&&(r=o,t=ac(e,o)),1===t))throw n=$s,fc(e,0),lc(e,r),rc(e,Ge()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Fs,Us);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bs+500-Ge())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Fs,Us),t);break}xc(e,Fs,Us);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-ot(r);o=1<<l,(l=t[l])>i&&(i=l),r&=~o}if(r=i,10<(r=(120>(r=Ge()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Fs,Us),r);break}xc(e,Fs,Us);break;default:throw Error(a(329))}}}return rc(e,Ge()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Rs;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&oc(t)),e}function oc(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function lc(e,t){for(t&=~js,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!=(6&As))throw Error(a(327));kc();var t=ft(e,0);if(0==(1&t))return rc(e,Ge()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=$s,fc(e,0),lc(e,t),rc(e,Ge()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Fs,Us),rc(e,Ge()),null}function cc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Vs=Ge()+500,Ri&&Vi())}}function uc(e){null!==Ks&&0===Ks.tag&&0==(6&As)&&kc();var t=As;As|=1;var n=Ts.transition,r=yt;try{if(Ts.transition=null,yt=1,e)return e()}finally{yt=r,Ts.transition=n,0==(6&(As=t))&&Vi()}}function dc(){Ms=Os.current,Ci(Os)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Is)for(n=Is.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Oi();break;case 3:io(),Ci(zi),Ci(Ai),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(lo);break;case 10:ka(r.type._context);break;case 22:case 23:dc()}n=n.return}if(zs=e,Is=e=Oc(e.current,null),Ns=Ms=t,_s=0,$s=null,js=Ds=Ls=0,Fs=Rs=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(r=(n=Pa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Pa=null}return e}function mc(e,t){for(;;){var n=Is;try{if(xa(),fo.current=ol,bo){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bo=!1}if(po=0,go=vo=ho=null,yo=!1,wo=0,Ps.current=null,null===n||null===n.return){_s=1,$s=t,Is=null;break}e:{var o=e,l=n.return,s=n,c=t;if(t=Ns,s.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=s,f=d.tag;if(0==(1&d.mode)&&(0===f||11===f||15===f)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gl(l);if(null!==p){p.flags&=-257,bl(p,l,s,0,t),1&p.mode&&vl(o,u,t),c=u;var h=(t=p).updateQueue;if(null===h){var v=new Set;v.add(c),t.updateQueue=v}else h.add(c);break e}if(0==(1&t)){vl(o,u,t),hc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var g=gl(l);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),bl(g,l,s,0,t),pa(ul(c,s));break e}}o=c=ul(c,s),4!==_s&&(_s=2),null===Rs?Rs=[o]:Rs.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,pl(0,c,t));break e;case 1:s=c;var b=o.type,y=o.stateNode;if(0==(128&o.flags)&&("function"==typeof b.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===qs||!qs.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,hl(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(e){t=e,Is===n&&null!==n&&(Is=n=n.return);continue}break}}function pc(){var e=Cs.current;return Cs.current=ol,null===e?ol:e}function hc(){0!==_s&&3!==_s&&2!==_s||(_s=4),null===zs||0==(268435455&Ls)&&0==(268435455&Ds)||lc(zs,Ns)}function vc(e,t){var n=As;As|=2;var r=pc();for(zs===e&&Ns===t||(Us=null,fc(e,t));;)try{gc();break}catch(t){mc(e,t)}if(xa(),As=n,Cs.current=r,null!==Is)throw Error(a(261));return zs=null,Ns=0,_s}function gc(){for(;null!==Is;)yc(Is)}function bc(){for(;null!==Is&&!Qe();)yc(Is)}function yc(e){var t=Ss(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?wc(e):Is=t,Ps.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Yl(n,t,Ms)))return void(Is=n)}else{if(null!==(n=Kl(n,t)))return n.flags&=32767,void(Is=n);if(null===e)return _s=6,void(Is=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Is=t);Is=t=e}while(null!==t);0===_s&&(_s=5)}function xc(e,t,n){var r=yt,i=Ts.transition;try{Ts.transition=null,yt=1,function(e,t,n,r){do{kc()}while(null!==Ks);if(0!=(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===zs&&(Is=zs=null,Ns=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Ys||(Ys=!0,zc(tt,(function(){return kc(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var l=yt;yt=1;var s=As;As|=4,Ps.current=null,function(e,t){if(ei=Ht,mr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var l=0,s=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=l+i),f!==o||0!==r&&3!==f.nodeType||(c=l+r),3===f.nodeType&&(l+=f.nodeValue.length),null!==(p=f.firstChild);)m=f,f=p;for(;;){if(f===e)break t;if(m===n&&++u===i&&(s=l),m===o&&++d===r&&(c=l),null!==(p=f.nextSibling))break;m=(f=m).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var h=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var v=h.memoizedProps,g=h.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:va(t.type,v),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(e){Ec(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}h=ts,ts=!1}(e,n),vs(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,bs(n,e,i),Xe(),As=s,yt=l,Ts.transition=o}else e.current=n;if(Ys&&(Ys=!1,Ks=e,Qs=i),0===(o=e.pendingLanes)&&(qs=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),rc(e,Ge()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Hs)throw Hs=!1,e=Ws,Ws=null,e;0!=(1&Qs)&&0!==e.tag&&kc(),0!=(1&(o=e.pendingLanes))?e===Gs?Xs++:(Xs=0,Gs=e):Xs=0,Vi()}(e,t,n,r)}finally{Ts.transition=i,yt=r}return null}function kc(){if(null!==Ks){var e=wt(Qs),t=Ts.transition,n=yt;try{if(Ts.transition=null,yt=16>e?16:e,null===Ks)var r=!1;else{if(e=Ks,Ks=null,Qs=0,0!=(6&As))throw Error(a(331));var i=As;for(As|=4,Jl=e.current;null!==Jl;){var o=Jl,l=o.child;if(0!=(16&Jl.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var u=s[c];for(Jl=u;null!==Jl;){var d=Jl;switch(d.tag){case 0:case 11:case 15:ns(8,d,o)}var f=d.child;if(null!==f)f.return=d,Jl=f;else for(;null!==Jl;){var m=(d=Jl).sibling,p=d.return;if(as(d),d===u){Jl=null;break}if(null!==m){m.return=p,Jl=m;break}Jl=p}}}var h=o.alternate;if(null!==h){var v=h.child;if(null!==v){h.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Jl=o}}if(0!=(2064&o.subtreeFlags)&&null!==l)l.return=o,Jl=l;else e:for(;null!==Jl;){if(0!=(2048&(o=Jl).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Jl=b;break e}Jl=o.return}}var y=e.current;for(Jl=y;null!==Jl;){var w=(l=Jl).child;if(0!=(2064&l.subtreeFlags)&&null!==w)w.return=l,Jl=w;else e:for(l=y;null!==Jl;){if(0!=(2048&(s=Jl).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(e){Ec(s,s.return,e)}if(s===l){Jl=null;break e}var x=s.sibling;if(null!==x){x.return=s.return,Jl=x;break e}Jl=s.return}}if(As=i,Vi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{yt=n,Ts.transition=t}}return!1}function Sc(e,t,n){e=_a(e,t=pl(0,t=ul(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===qs||!qs.has(r))){t=_a(t,e=hl(t,e=ul(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,zs===e&&(Ns&n)===n&&(4===_s||3===_s&&(130023424&Ns)===Ns&&500>Ge()-Bs?fc(e,0):js|=n),rc(e,t)}function Pc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=za(e,t))&&(gt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Pc(e,n)}function zc(e,t){return Ye(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Ic(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _c(e,t,n,r,i,o){var l=2;if(r=e,"function"==typeof e)Mc(e)&&(l=1);else if("string"==typeof e)l=5;else e:switch(e){case S:return $c(n.children,i,o,t);case E:l=8,i|=8;break;case C:return(e=Nc(12,n,t,2|i)).elementType=C,e.lanes=o,e;case z:return(e=Nc(13,n,t,i)).elementType=z,e.lanes=o,e;case I:return(e=Nc(19,n,t,i)).elementType=I,e.lanes=o,e;case O:return Lc(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case P:l=10;break e;case T:l=9;break e;case A:l=11;break e;case N:l=14;break e;case M:l=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Nc(l,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function $c(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,i,a,o,l,s){return e=new Rc(e,t,n,l,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Nc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vc(e){if(!e)return Ti;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Mi(n))return $i(e,n,t)}return t}function Uc(e,t,n,r,i,a,o,l,s){return(e=Fc(n,r,!0,e,0,a,0,l,s)).context=Vc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=null!=t?t:null,_a(n,a,i),e.current.lanes=i,gt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=_a(i,t,o))&&(nc(e,i,o,a),$a(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||zi.current)wl=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return wl=!1,function(e,t,n){switch(t.tag){case 3:Il(t),ma();break;case 5:ao(t);break;case 1:Mi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pi(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Pi(lo,1&lo.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Dl(e,t,n):(Pi(lo,1&lo.current),null!==(e=Hl(e,t,n))?e.sibling:null);Pi(lo,1&lo.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Vl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pi(lo,lo.current),r)break;return null;case 22:case 23:return t.lanes=0,Cl(e,t,n)}return Hl(e,t,n)}(e,t,n);wl=0!=(131072&e.flags)}else wl=!1,ia&&0!=(1048576&t.flags)&&Zi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ul(e,t),e=t.pendingProps;var i=Ni(t,Ai.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=zl(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),xl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Mc(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===N)return 14}return 2}(r),e=va(r,e),i){case 0:t=Tl(null,t,r,e,n);break e;case 1:t=Al(null,t,r,e,n);break e;case 11:t=kl(null,t,r,e,n);break e;case 14:t=Sl(null,t,r,va(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tl(e,t,r,i=t.elementType===r?i:va(r,i),n);case 1:return r=t.type,i=t.pendingProps,Al(e,t,r,i=t.elementType===r?i:va(r,i),n);case 3:e:{if(Il(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ma(e,t),Da(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nl(e,t,r,n,i=ul(Error(a(423)),t));break e}if(r!==i){t=Nl(e,t,r,n,i=ul(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ga(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ma(),r===i){t=Hl(e,t,n);break e}xl(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,l=i.children,ni(r,i)?l=null:null!==o&&ni(r,o)&&(t.flags|=32),Pl(e,t),xl(e,t,l,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Dl(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):xl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,kl(e,t,r,i=t.elementType===r?i:va(r,i),n);case 7:return xl(e,t,t.pendingProps,n),t.child;case 8:case 12:return xl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,Pi(ga,r._currentValue),r._currentValue=l,null!==o)if(lr(o.value,l)){if(o.children===i.children&&!zi.current){t=Hl(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){l=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Sa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)l=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(l=o.return))throw Error(a(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Sa(l,n,t),l=o.sibling}else l=o.child;if(null!==l)l.return=o;else for(l=o;null!==l;){if(l===t){l=null;break}if(null!==(o=l.sibling)){o.return=l.return,l=o;break}l=l.return}o=l}xl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ca(i)),t.flags|=1,xl(e,t,r,n),t.child;case 14:return i=va(r=t.type,t.pendingProps),Sl(e,t,r,i=va(r.type,i),n);case 15:return El(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:va(r,i),Ul(e,t),t.tag=1,Mi(r)?(e=!0,Li(t)):e=!1,Ea(t,n),Ua(t,r,i),Wa(t,r,i,n),zl(null,t,r,!0,e,n);case 19:return Vl(e,t,n);case 22:return Cl(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"==typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"==typeof i){var l=i;i=function(){var e=Wc(o);l.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Uc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Vr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var l=r;r=function(){var e=Wc(s);l.call(e)}}var s=Fc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){Hc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Xc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Hc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Dt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Ge()),0==(6&As)&&(Vs=Ge()+500,Vi()))}break;case 13:uc((function(){var t=za(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Yc(e,1)}},kt=function(e){if(13===e.tag){var t=za(e,134217728);null!==t&&nc(t,e,134217728,ec()),Yc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=za(e,t);null!==n&&nc(n,e,t,ec()),Yc(e,t)}},Et=function(){return yt},Ct=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));Y(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,ze=uc;var tu={usingClientEntryPoint:!1,Events:[yi,wi,xi,Pe,Te,cc]},nu={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),at=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",l=Kc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,i,0,o,l),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{"use strict";var r=n(3935);t.s=r.createRoot,r.hydrateRoot},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var l=2*(r+1)-1,s=e[l],c=l+1,u=e[c];if(0>a(s,n))c<i&&0>a(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[l]=n,r=l);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var c=[],u=[],d=1,f=null,m=3,p=!1,h=!1,v=!1,g="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(v=!1,w(e),!h)if(null!==r(c))h=!0,O(k);else{var t=r(u);null!==t&&_(x,t.startTime-e)}}function k(e,n){h=!1,v&&(v=!1,b(P),P=-1),p=!0;var a=m;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!z());){var o=f.callback;if("function"==typeof o){f.callback=null,m=f.priorityLevel;var l=o(f.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?f.callback=l:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var d=r(u);null!==d&&_(x,d.startTime-n),s=!1}return s}finally{f=null,m=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,C=null,P=-1,T=5,A=-1;function z(){return!(t.unstable_now()-A<T)}function I(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?S():(E=!1,C=null)}}else E=!1}if("function"==typeof y)S=function(){y(I)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,M=N.port2;N.port1.onmessage=I,S=function(){M.postMessage(null)}}else S=function(){g(I,0)};function O(e){C=e,E||(E=!0,S())}function _(e,n){P=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(v?(b(P),P=-1):v=!0,_(x,a-o))):(e.sortIndex=l,n(c,e),h||p||(h=!0,O(k))),e},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},6657:e=>{e.exports=function(e,t,n){"use strict";if(e===t)return 1;if(""===t)return 0;var r=0,i=e.toLowerCase(),a=e.length,o=t.toLowerCase(),l=t.length,s=0,c=1;n=n?1-n:0;for(var u=0;u<l;u+=1){var d=i.indexOf(o[u],s);if(-1===d){if(!n)return 0;c+=n}else{var f=0;s===d?f=.7:(f=.1," "===e[d-1]&&(f+=.8)),e[d]===t[u]&&(f+=.1),r+=f,s=d+1}}var m=.5*(r/a+r/l)/c;return o[0]===i[0]&&m<.85&&(m+=.15),m}},9101:(e,t,n)=>{"use strict";var r=n(7294),i=n(745),a=n(6657),o=n.n(a);class l{constructor(e="",t=!1,n=window.console){const r=e?` ${e}:`:"",i=(e,t)=>e&&t?`${e}/${t}`:t||e,a=(...t)=>{e.startsWith(l.only)&&n.log(...t)};this.log=(...e)=>a(`##${r}`,...e),this.warn=(...e)=>a(`###${r}`,...e),this.error=t=>{e.startsWith(l.only)&&(a(`####${r} ERROR`),n.error(t))},t&&(this.next=this.log,this.complete=()=>this.log("***complete***")),this.id=r=>new l(i(e,r),t,n),this.rx=t=>new l(i(e,t),!0,n),this.only=()=>this}}l.only="";const s=new Map,c={get length(){return s.size},clear(){s.clear()},key(e){var t;return null!==(t=[...s.keys()][e])&&void 0!==t?t:null},getItem(e){var t;return null!==(t=s.get(e))&&void 0!==t?t:null},setItem(e,t){s.set(e,String(t))},removeItem(e){s.delete(e)}},u=c,d=new l("LiteStorage");class f{constructor(e,t="local"){const n=`${t}-${e}`;if(f.ids.includes(n))throw Error(`Duplicate storageId: ${n}`);switch(f.ids.push(n),this.id=`ampcast/${e}`,t){case"local":this.storage=localStorage;break;case"session":this.storage=sessionStorage;break;case"memory":this.storage=u}}getBoolean(e){const t=this.getItem(e);return!!t&&"false"!==t}setBoolean(e,t){this.setItem(e,String(!!t))}getJson(e,t=null){const n=this.getItem(e);try{return n?JSON.parse(n):t}catch(e){d.error(e)}return null!=t?t:null}setJson(e,t){try{null==t?this.removeItem(e):this.setItem(e,JSON.stringify(t))}catch(e){d.error(e)}}getNumber(e,t=0){var n;const r=Number(null!==(n=this.getItem(e))&&void 0!==n?n:t);return isNaN(r)?t:r}setNumber(e,t){this.setItem(e,String(Number(t)||0))}getString(e,t=""){var n;return String(null!==(n=this.getItem(e))&&void 0!==n?n:t)}setString(e,t){this.setItem(e,t)}getItem(e){return this.storage.getItem(`${this.id}/${e}`)}setItem(e,t){e=`${this.id}/${e}`,null==t?this.storage.removeItem(e):this.storage.setItem(e,t)}removeItem(e){this.storage.removeItem(`${this.id}/${e}`)}clear(){const e=`${this.id}/`,t=[];for(let n=0;n<this.storage.length;n++){const r=this.storage.key(n);r.startsWith(e)&&t.push(r)}t.forEach((e=>this.storage.removeItem(e)))}}f.ids=[];const m=(0,n(3631).qY)(),p=(null==m?void 0:m.name)||"unknown",h=/^edge/.test(p)?"Microsoft Edge":p.replace(/^\w/,(e=>e.toUpperCase())),v=(null==m?void 0:m.version)||"0",g=(null==m?void 0:m.os)||"unknown",b={name:p,displayName:h,version:v,os:g,ctrlKey:"Mac OS"===g?"metaKey":"ctrlKey",ctrlKeyStr:"Mac OS"===g?"⌘":"Ctrl"};function y(e){return null!=e}function w(e){return t=this,n=void 0,i=function*(){return new Promise(((t,n)=>{const r="ampcast-loaded";let i=document.querySelector(`script[src="${e}"]`);(null==i?void 0:i.hasAttribute(r))?t():(i||(i=document.createElement("script"),i.async=!0,i.src=e),i.addEventListener("load",(function(){this.setAttribute(r,""),t()})),i.addEventListener("error",(()=>n(`Failed to load script: '${e}'`))),i.parentElement||document.head.appendChild(i))}))},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}function x(e,t){const n=[],r=[];for(const i of e)t(i)?n.push(i):r.push(i);return[n,r]}function k(e,t){return e.filter(((e,n,r)=>n===r.findIndex((n=>e[t]===n[t]))))}function S(e=Date.now()){return`${(e=new Date(e)).getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function E(e){return S(e).slice(0,7)}function C(e){return new Date(Math.round(1e3*(e||0))).toISOString().slice(11,19).replace(/^[0:]+(.{4,})$/,"$1")}function P(e){e.preventDefault()}function T(e){e.stopPropagation()}function A(e,t){return 1===e.length?e[0]:(void 0!==t&&(e=e.filter((e=>e!==t))),e[Math.floor(Math.random()*e.length)])}function z(e,t={}){const n=function(e){return e.filter(((e,t,n)=>t===n.findIndex((t=>e===t))))}(Object.keys(e).concat(Object.keys(t)));return n.reduce(((n,r)=>(void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r]),n)),{})}function I(e,t,n){const r=e.filter(t,n);return 0===r.length?e:r}function N(e,t,n=.9){return Math.max(o()(e,t,.99),o()(t,e,.99))>=n}const M=new f("layout"),O={get:(e,t=0)=>M.getNumber(e,t),set(e,t){M.setNumber(e,t)}};function _(e,t){const n=(0,r.useRef)(t);(0,r.useEffect)((()=>{n.current=t}),[t]),(0,r.useLayoutEffect)((()=>{const t=e.current;if(t){const e=new ResizeObserver((()=>n.current()));return e.observe(t),()=>e.disconnect()}}),[e])}const $=document.createElement("div");function L(){const e=(0,r.useRef)($),[t,n]=(0,r.useState)(0);return(0,r.useEffect)((()=>{$.parentElement||(document.body.append($),n(D()))}),[]),_(e,(0,r.useCallback)((()=>n(D())),[])),t}function D(){return parseInt(getComputedStyle($).fontSize,10)||16}function j({vertical:e,primary:t,size:n,children:i}){const a={};return t||(e?a.height=`${n}px`:a.width=`${n}px`),r.createElement("div",{className:"layout-pane layout-pane-"+(t?"primary":"secondary"),style:a},i)}function R({id:e,arrange:t="columns",primaryIndex:n=0,children:i}){const a=(0,r.useRef)(null),[o,l]=(0,r.useState)({width:0,height:0}),[s,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(0),[f,m]=(0,r.useState)(0),[p,h]=(0,r.useState)((()=>e?O.get(e):0)),[v,g]=(0,r.useState)(-1),[b,y]=(0,r.useState)(0),w=-1!==v,x=L(),k="rows"===t;(0,r.useEffect)((()=>{e&&O.set(e,p)}),[e,p]),(0,r.useLayoutEffect)((()=>{var e;if(x>0){const t=a.current,n=k?"minHeight":"minWidth",r=t.querySelector(":scope > .layout-pane-primary");if(r){r.style[n]="";const e=parseInt(getComputedStyle(r)[n],10);r.style[n]="unset",c(e||80)}const i=t.querySelector(":scope > .layout-pane-secondary");if(i){i.style[n]="";const r=parseInt(getComputedStyle(i)[n],10);i.style[n]="unset",d(r||80);const a=k?"offsetHeight":"offsetWidth",o=t.querySelector(":scope > .layout-splitter");m(null!==(e=null==o?void 0:o[a])&&void 0!==e?e:4)}}}),[k,x]),(0,r.useLayoutEffect)((()=>{const e=k?o.height:o.width;if(e>0){const t=e-f-p;t<s?h(Math.max(p-(s-t),0)):p<u&&h(Math.min(e-f-s,u))}}),[k,o,s,u,f,p]);const S=(0,r.useCallback)((e=>{if(0===e.button){const t=k?e.screenY:e.screenX;g(t),y(p),e.preventDefault()}}),[k,p]),E=(0,r.useCallback)((e=>{const t=(k?e.screenY:e.screenX)-v;h(0===n?b-t:b+t)}),[k,n,v,b]),C=(0,r.useCallback)((()=>{g(-1),y(0)}),[]);return(0,r.useEffect)((()=>{if(w)return document.documentElement.style.cursor=k?"ns-resize":"ew-resize",document.body.classList.add("dragging"),document.addEventListener("mouseup",C),document.addEventListener("mousemove",E),()=>{document.documentElement.style.cursor="",document.body.classList.remove("dragging"),document.removeEventListener("mouseup",C),document.removeEventListener("mousemove",E)}}),[k,w,E,C]),_(a,(0,r.useCallback)((()=>{const e=a.current;l({width:e.clientWidth,height:e.clientHeight})}),[])),r.createElement("div",{className:`splitter splitter-${t}`,id:e,ref:a},r.Children.toArray(i).slice(0,2).map(((e,t)=>{const i=t===n,a=i?0:p,o=[];return 1===t&&o.push(r.createElement("div",{className:"layout-splitter "+(w?"active":""),role:"separator",onMouseDown:S,key:"splitter"})),o.push(r.createElement(j,{vertical:k,primary:i,size:a,key:t},e)),o})))}$.style.cssText="\n    position: absolute;\n    pointer-events: none;\n    visibility: hidden;\n    font-size: 1rem;\n    width: 1rem;\n    height: 1rem;\n";var F=function(e,t){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},F(e,t)};function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}F(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function V(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}function U(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function W(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function q(e){return this instanceof q?(this.v=e,this):new q(e)}function Y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||l(e,t)}))})}function l(e,t){try{(n=i[e](t)).value instanceof q?Promise.resolve(n.value.v).then(s,c):u(a[0][2],n)}catch(e){u(a[0][3],e)}var n}function s(e){l("next",e)}function c(e){l("throw",e)}function u(e,t){e(t),a.shift(),a.length&&l(a[0][0],a[0][1])}}function K(e){return"function"==typeof e}function Q(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Object.create,Object.create;var X=Q((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function G(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var J=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=U(a),l=o.next();!l.done;l=o.next())l.value.remove(this)}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else a.remove(this);var s=this.initialTeardown;if(K(s))try{s()}catch(e){i=e instanceof X?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=U(c),d=u.next();!d.done;d=u.next()){var f=d.value;try{te(f)}catch(e){i=null!=i?i:[],e instanceof X?i=W(W([],H(i)),H(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(i)throw new X(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)te(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&G(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&G(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),Z=J.EMPTY;function ee(e){return e instanceof J||e&&"closed"in e&&K(e.remove)&&K(e.add)&&K(e.unsubscribe)}function te(e){K(e)?e():e.unsubscribe()}var ne=function(e){function t(t,n){return e.call(this)||this}return B(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(J),re={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=re.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,W([e,t],H(n))):setInterval.apply(void 0,W([e,t],H(n)))},clearInterval:function(e){var t=re.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},ie=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return B(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),re.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&re.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,G(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(ne),ae={now:function(){return(ae.delegate||Date).now()},delegate:void 0},oe=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=ae.now,e}(),le=new(function(e){function t(t,n){void 0===n&&(n=oe.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return B(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(oe))(ie),se=le,ce=null,ue=null,de=void 0,fe=!1,me=!1,pe={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=pe.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,W([e,t],H(n))):setTimeout.apply(void 0,W([e,t],H(n)))},clearTimeout:function(e){var t=pe.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function he(e){pe.setTimeout((function(){if(!ce)throw e;ce(e)}))}function ve(){}var ge=be("C",void 0,void 0);function be(e,t,n){return{kind:e,value:t,error:n}}var ye=null;function we(e){if(fe){var t=!ye;if(t&&(ye={errorThrown:!1,error:null}),e(),t){var n=ye,r=n.errorThrown,i=n.error;if(ye=null,r)throw i}}else e()}var xe=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ee(t)&&t.add(n)):n.destination=Ae,n}return B(t,e),t.create=function(e,t,n){return new Ce(e,t,n)},t.prototype.next=function(e){this.isStopped?Te(function(e){return be("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Te(be("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Te(ge,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(J),ke=Function.prototype.bind;function Se(e,t){return ke.call(e,t)}var Ee=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Pe(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Pe(e)}else Pe(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Pe(e)}},e}(),Ce=function(e){function t(t,n,r){var i,a,o=e.call(this)||this;return K(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:o&&me?((a=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&Se(t.next,a),error:t.error&&Se(t.error,a),complete:t.complete&&Se(t.complete,a)}):i=t,o.destination=new Ee(i),o}return B(t,e),t}(xe);function Pe(e){var t;fe?(t=e,fe&&ye&&(ye.errorThrown=!0,ye.error=t)):he(e)}function Te(e,t){var n=ue;n&&pe.setTimeout((function(){return n(e,t)}))}var Ae={closed:!0,next:ve,error:function(e){throw e},complete:ve},ze="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ie(e){return e}function Ne(e){return 0===e.length?Ie:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Me=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this,i=function(e){return e&&e instanceof xe||function(e){return e&&K(e.next)&&K(e.error)&&K(e.complete)}(e)&&ee(e)}(e)?e:new Ce(e,t,n);return we((function(){var e=r,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?r._subscribe(i):r._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Oe(t))((function(t,r){var i=new Ce({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[ze]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Oe(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Oe(e){var t;return null!==(t=null!=e?e:de)&&void 0!==t?t:Promise}function _e(e){return e&&K(e.schedule)}function $e(e,t,n){void 0===e&&(e=0),void 0===n&&(n=se);var r=-1;return null!=t&&(_e(t)?n=t:r=t),new Me((function(t){var i=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;i<0&&(i=0);var a=0;return n.schedule((function(){t.closed||(t.next(a++),0<=r?this.schedule(void 0,r):t.complete())}),i)}))}function Le(e,t){return void 0===e&&(e=0),void 0===t&&(t=le),e<0&&(e=0),$e(e,e,t)}function De({children:e}){return r.createElement(r.Fragment,null,e)}var je=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Re(e){return K(null==e?void 0:e.then)}function Fe(e){return K(e[ze])}function Be(e){return Symbol.asyncIterator&&K(null==e?void 0:e[Symbol.asyncIterator])}function Ve(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Ue="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function He(e){return K(null==e?void 0:e[Ue])}function We(e){return Y(this,arguments,(function(){var t,n,r;return V(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,q(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,q(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,q(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function qe(e){return K(null==e?void 0:e.getReader)}function Ye(e){if(e instanceof Me)return e;if(null!=e){if(Fe(e))return i=e,new Me((function(e){var t=i[ze]();if(K(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(je(e))return t=e,new Me((function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()}));if(Re(e))return r=e,new Me((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,he)}));if(Be(e))return Ke(e);if(He(e))return n=e,new Me((function(e){var t,r;try{for(var i=U(n),a=i.next();!a.done;a=i.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.complete()}));if(qe(e))return Ke(We(e))}var t,n,r,i;throw Ve(e)}function Ke(e){return new Me((function(t){(function(e,t){var n,r,i,a,o,l,s,c;return o=this,l=void 0,c=function(){var o,l;return V(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=U(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=s.sent(),i={error:l},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):function(e){return e instanceof s?e:new s((function(t){t(e)}))}(t.value).then(n,r)}i((c=c.apply(o,l||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}function Qe(e){return function(t){if(function(e){return K(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Xe(e,t,n,r,i){return new Ge(e,t,n,r,i)}var Ge=function(e){function t(t,n,r,i,a,o){var l=e.call(this,t)||this;return l.onFinalize=a,l.shouldUnsubscribe=o,l._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,l._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return B(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(xe);function Je(e,t){return Qe((function(n,r){var i=0;n.subscribe(Xe(r,(function(n){r.next(e.call(t,n,i++))})))}))}function Ze(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var a=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(a),!i)return a}function et(e,t,n){return void 0===n&&(n=1/0),K(t)?et((function(n,r){return Je((function(e,i){return t(n,e,r,i)}))(Ye(e(n,r)))}),n):("number"==typeof t&&(n=t),Qe((function(t,r){return function(e,t,n,r,i,a,o,l){var s=[],c=0,u=0,d=!1,f=function(){!d||s.length||c||t.complete()},m=function(e){return c<r?p(e):s.push(e)},p=function(e){c++;var i=!1;Ye(n(e,u++)).subscribe(Xe(t,(function(e){t.next(e)}),(function(){i=!0}),void 0,(function(){if(i)try{c--;for(;s.length&&c<r;)e=void 0,e=s.shift(),p(e);f()}catch(e){t.error(e)}var e})))};return e.subscribe(Xe(t,m,(function(){d=!0,f()}))),function(){}}(t,r,e,n)})))}var tt=Array.isArray;function nt(e){return Je((function(t){return function(e,t){return tt(t)?e.apply(void 0,W([],H(t))):e(t)}(e,t)}))}var rt=["addListener","removeListener"],it=["addEventListener","removeEventListener"],at=["on","off"];function ot(e,t,n,r){if(K(n)&&(r=n,n=void 0),r)return ot(e,t,n).pipe(nt(r));var i=H(function(e){return K(e.addEventListener)&&K(e.removeEventListener)}(e)?it.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return K(e.addListener)&&K(e.removeListener)}(e)?rt.map(lt(e,t)):function(e){return K(e.on)&&K(e.off)}(e)?at.map(lt(e,t)):[],2),a=i[0],o=i[1];if(!a&&je(e))return et((function(e){return ot(e,t,n)}))(Ye(e));if(!a)throw new TypeError("Invalid event target");return new Me((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return o(t)}}))}function lt(e,t){return function(n){return function(r){return e[n](t,r)}}}function st(e){return void 0===e&&(e=1/0),et(Ie,e)}var ct=new Me((function(e){return e.complete()}));function ut(e){return e[e.length-1]}function dt(e){return K(ut(e))?e.pop():void 0}function ft(e){return _e(ut(e))?e.pop():void 0}function mt(e,t){return"number"==typeof ut(e)?e.pop():t}function pt(e,t){return void 0===t&&(t=0),Qe((function(n,r){n.subscribe(Xe(r,(function(n){return Ze(r,e,(function(){return r.next(n)}),t)}),(function(){return Ze(r,e,(function(){return r.complete()}),t)}),(function(n){return Ze(r,e,(function(){return r.error(n)}),t)})))}))}function ht(e,t){return void 0===t&&(t=0),Qe((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function vt(e,t){if(!e)throw new Error("Iterable cannot be null");return new Me((function(n){Ze(n,t,(function(){var r=e[Symbol.asyncIterator]();Ze(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function gt(e,t){return t?function(e,t){if(null!=e){if(Fe(e))return function(e,t){return Ye(e).pipe(ht(t),pt(t))}(e,t);if(je(e))return function(e,t){return new Me((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(Re(e))return function(e,t){return Ye(e).pipe(ht(t),pt(t))}(e,t);if(Be(e))return vt(e,t);if(He(e))return function(e,t){return new Me((function(n){var r;return Ze(n,t,(function(){r=e[Ue](),Ze(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return K(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(qe(e))return function(e,t){return vt(We(e),t)}(e,t)}throw Ve(e)}(e,t):Ye(e)}function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ft(e),r=mt(e,1/0),i=e;return i.length?1===i.length?Ye(i[0]):st(r)(gt(i,n)):ct}function yt(){return st(1)}function wt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return yt()(gt(e,ft(e)))}function xt(e,t){return Qe((function(n,r){var i=0;n.subscribe(Xe(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}function kt(e,t){return Qe((function(n,r){var i=null,a=0,o=!1,l=function(){return o&&!i&&r.complete()};n.subscribe(Xe(r,(function(n){null==i||i.unsubscribe();var o=0,s=a++;Ye(e(n,s)).subscribe(i=Xe(r,(function(e){return r.next(t?t(n,e,s,o++):e)}),(function(){i=null,l()})))}),(function(){o=!0,l()})))}))}function St(e){return Qe((function(t,n){Ye(e).subscribe(Xe(n,(function(){return n.complete()}),ve)),!n.closed&&t.subscribe(n)}))}function Et(e,t){switch(t.type){case"resize":{const n=Math.max(t.clientSize,0),r=Math.max(t.scrollSize,n);if(n!==e.clientSize||r!==e.scrollSize){const t=r-n,i=Ct(e.position,t);return Object.assign(Object.assign({},e),{position:i,max:t,clientSize:n,scrollSize:r})}return e}case"scrollBy":{const n=Ct(e.position+t.amount,e.max);return n!==e.position?Object.assign(Object.assign({},e),{position:n}):e}case"scrollTo":{const n=Ct(t.position,e.max);return n!==e.position?Object.assign(Object.assign({},e),{position:n}):e}default:return e}}function Ct(e,t){return Math.min(Math.max(e,0),t)}const Pt={position:0,max:0,clientSize:0,scrollSize:0};const Tt=(0,r.memo)((function(e){var{orientation:t,scrollAmount:n,onChange:i,onResize:a,scrollbarRef:o}=e,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["orientation","scrollAmount","onChange","onResize","scrollbarRef"]);const s=(0,r.useRef)(null),c=(0,r.useRef)(null),{position:u,max:d,clientSize:f,scrollSize:m,resize:p,scrollBy:h,scrollTo:v}=function(){const[{position:e,max:t,clientSize:n,scrollSize:i},a]=(0,r.useReducer)(Et,Pt),o=(0,r.useCallback)(((e,t)=>a({type:"resize",clientSize:e,scrollSize:t})),[]),l=(0,r.useCallback)((e=>a({type:"scrollTo",position:e})),[]);return{position:e,max:t,clientSize:n,scrollSize:i,scrollTo:l,scrollBy:(0,r.useCallback)((e=>a({type:"scrollBy",amount:e})),[]),resize:o}}(),[g,b]=(0,r.useState)(0),[y,w]=(0,r.useState)(0),[x,k]=(0,r.useState)(0),[S,E]=(0,r.useState)(-1),[C,P]=(0,r.useState)(0),T=-1!==S,A="vertical"===t,z=Math.ceil(u/d*(y-x));(0,r.useEffect)((()=>{o.current={scrollBy:h,scrollTo:v}}),[o,h,v]),(0,r.useLayoutEffect)((()=>p(l.clientSize,l.scrollSize)),[l.clientSize,l.scrollSize,p]),(0,r.useLayoutEffect)((()=>null==i?void 0:i(u)),[u,i]),(0,r.useLayoutEffect)((()=>null==a?void 0:a(g)),[g,a]),_(s,(0,r.useCallback)((()=>{const e=s.current.getBoundingClientRect();w(A?e.height:e.width),b(A?e.width:e.height)}),[A])),_(c,(0,r.useCallback)((()=>{const e=c.current.getBoundingClientRect();k(A?e.height:e.width)}),[A]));const I=(0,r.useCallback)(((e,t)=>{const n=()=>o.current.scrollBy(t),r=t=>t.target===e,i=ot(document,"mouseup"),a=ot(e,"mouseover").pipe(Je(r),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ft(e);return Qe((function(t,r){(n?wt(e,t,n):wt(e,t)).subscribe(r)}))}(!0)),l=bt(a,ot(e,"mouseout").pipe(xt(r),Je((()=>!1)))).pipe(kt(((e,t)=>e?$e(0===t?400:0,40):ct)),St(i)).subscribe(n);return n(),()=>l.unsubscribe()}),[o]),N=(0,r.useCallback)((e=>{if(0===e.button)return e.stopPropagation(),I(e.target,-n)}),[n,I]),M=(0,r.useCallback)((e=>{if(0===e.button)return e.stopPropagation(),I(e.target,n)}),[n,I]),O=(0,r.useCallback)((e=>{if(0===e.button){e.preventDefault();const t=A?e.nativeEvent.offsetY:e.nativeEvent.offsetX;return I(e.target,t<z?-f:f)}}),[A,f,z,I]),$=(0,r.useCallback)((e=>{0===e.button&&(e.preventDefault(),e.stopPropagation(),E(A?e.screenY:e.screenX),P(z))}),[A,z]),L=(0,r.useCallback)((e=>{const t=A?e.screenY:e.screenX;v((C+(t-S))*d/(y-x))}),[A,S,C,d,x,y,v]),D=(0,r.useCallback)((()=>{E(-1),P(0)}),[]);return(0,r.useEffect)((()=>{if(T)return document.body.classList.add("dragging"),document.addEventListener("mouseup",D),document.addEventListener("mousemove",L),()=>{document.body.classList.remove("dragging"),document.removeEventListener("mouseup",D),document.removeEventListener("mousemove",L)}}),[T,L,D]),r.createElement("div",{className:`scrollbar scrollbar-${t}`},r.createElement("div",{className:"scrollbar-button scrollbar-button-decrement",onMouseDown:N},r.createElement("svg",{className:"icon",viewBox:"0 0 50 50"},r.createElement("polygon",{points:A?"0,50 25,0 50,50":"50,0 0,25 50,50"}))),r.createElement("div",{className:"scrollbar-track",onMouseDown:O,ref:s},r.createElement("div",{className:"scrollbar-thumb",onMouseDown:$,style:{[A?"height":"width"]:y*(m?f/m:0)+"px",transform:`translate${A?"Y":"X"}(${z}px)`},ref:c})),r.createElement("div",{className:"scrollbar-button scrollbar-button-increment",onMouseDown:M},r.createElement("svg",{className:"icon",viewBox:"0 0 50 50"},r.createElement("polygon",{points:A?"0,0 25,50 50,0":"0,0 50,25 0,50"}))))}));function At({children:e,scrollWidth:t=0,scrollHeight:n=0,scrollAmount:i=10,droppable:a,onResize:o,onScroll:l,scrollableRef:s}){const c=(0,r.useRef)(null),u=(0,r.useRef)(null),d=(0,r.useRef)(null),f=(0,r.useRef)(null),m=(0,r.useRef)(null),p=(0,r.useRef)(null),[h,v]=(0,r.useState)(0),[g,b]=(0,r.useState)(0),[y,w]=(0,r.useState)(0),[k,S]=(0,r.useState)(0),[E,C]=(0,r.useState)(0),[P,T]=(0,r.useState)(t),[A,z]=(0,r.useState)(n),[I,N]=(0,r.useState)(0),[M,O]=(0,r.useState)(0),[$,L]=(0,r.useState)(!1),[D,j]=(0,r.useState)(!1),[R,F]=(0,r.useState)(0),B=Math.max(I-(D?g:0),0),V=Math.max(M-($?h:0),0);(0,r.useEffect)((()=>{s&&(s.current={scrollTo:({left:e,top:t})=>{void 0!==e&&m.current.scrollTo(e),void 0!==t&&p.current.scrollTo(t)}})}),[s]),(0,r.useLayoutEffect)((()=>{P&&B?L(P-B>1):j(!1)}),[P,B]),(0,r.useLayoutEffect)((()=>{j(!(!A||!V)&&A-V>1)}),[A,V]),(0,r.useLayoutEffect)((()=>{c.current.classList.toggle("overflow-x",$)}),[$]),(0,r.useLayoutEffect)((()=>{c.current.classList.toggle("overflow-y",D)}),[D]),(0,r.useLayoutEffect)((()=>{var e;T(0===t?(null===(e=u.current)||void 0===e?void 0:e.scrollWidth)||0:t)}),[t]),(0,r.useLayoutEffect)((()=>{var e;z(0===n?(null===(e=u.current)||void 0===e?void 0:e.scrollHeight)||0:n)}),[n]);const U=(0,r.useCallback)((()=>{const e=c.current;N(e.clientWidth),O(e.clientHeight),w(e.getBoundingClientRect().top)}),[]),H=(0,r.useCallback)((()=>{const e=u.current,r=f.current;0===t&&T(e.scrollWidth),0===n&&z(r.scrollHeight+d.current.clientHeight),null==o||o({width:e.clientWidth,height:e.clientHeight})}),[t,n,o]);_(c,U),_(u,H),_(f,H),(0,r.useLayoutEffect)((()=>{null==l||l({left:k,top:E})}),[k,E,l]);const W=(0,r.useCallback)((e=>{p.current.scrollBy(3*i*Math.sign(e.deltaY))}),[i]),q=(0,r.useCallback)((e=>{const t=e.nativeEvent.clientY-y;t+i/2>M?F(i):t<i&&F(-i)}),[y,M,i]);(0,r.useEffect)((()=>{if(R){const e=()=>p.current.scrollBy(R),t=Le(100).subscribe(e);return()=>t.unsubscribe()}}),[R]);const Y=(0,r.useCallback)((()=>F(0)),[]),[K,Q]=x(r.Children.toArray(e),(e=>(null==e?void 0:e.type)===De));return r.createElement("div",{className:"scrollable",onWheel:W,ref:c},r.createElement("div",{className:"scrollable-content",onDragOver:a?q:void 0,onDragLeave:a?Y:void 0,onDragEnd:a?Y:void 0,onDrop:a?Y:void 0,style:{right:D?`${g}px`:"0",bottom:$?`${h}px`:"0",transform:`translateX(-${k}px)`},ref:u},r.createElement("div",{className:"scrollable-head",ref:d},K),r.createElement("div",{className:"scrollable-body",style:{width:t?`${t}px`:void 0}},r.createElement("div",{className:"scrollable-body-content",style:{transform:`translateY(-${E}px)`},ref:f},Q))),r.createElement(Tt,{orientation:"horizontal",clientSize:B,scrollSize:P,scrollAmount:i,onChange:S,onResize:v,scrollbarRef:m}),r.createElement(Tt,{orientation:"vertical",clientSize:V,scrollSize:A,scrollAmount:i,onChange:C,onResize:b,scrollbarRef:p}))}function zt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ft(e);return gt(e,n)}function It(e=200){const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const t=(e,t)=>ot(document,e,{capture:!0}).pipe(Je((()=>t))),r=bt(t("keydown",!0),t("keyup",!1)).pipe((i=t=>t?zt(0):$e(e),Qe((function(e,t){var n=!1,r=null,a=null,o=function(){if(null==a||a.unsubscribe(),a=null,n){n=!1;var e=r;r=null,t.next(e)}};e.subscribe(Xe(t,(function(e){null==a||a.unsubscribe(),n=!0,r=e,a=Xe(t,o,ve),Ye(i(e)).subscribe(a)}),(function(){o(),t.complete()}),void 0,(function(){r=a=null})))})))).subscribe(n);var i;return()=>r.unsubscribe()}),[e]),t}function Nt(e){return(0,r.useMemo)((()=>Mt(e)),[e])}function Mt(e){return e.reduce(((e,t)=>(e.push(t.id),t.children?e.concat(Mt(t.children)):e)),[])}function Ot(e){return{storeExpandedState:(0,r.useCallback)(((t,n)=>{e&&localStorage.setItem(`${e}/${t}`,String(!!n))}),[e]),retrieveExpandedState:(0,r.useCallback)(((t,n=!1)=>{if(e){const r=localStorage.getItem(`${e}/${t}`);return"string"==typeof r?"true"===r:n}return n}),[e]),storeSelectedNodeId:(0,r.useCallback)((t=>{e&&localStorage.setItem(`${e}/selectedId`,t)}),[e]),retrieveSelectedNodeId:(0,r.useCallback)((t=>e&&localStorage.getItem(`${e}/selectedId`)||t),[e])}}function _t(e,t){const{storeExpandedState:n,retrieveExpandedState:i}=Ot(t),a=Nt(e),[o,l]=(0,r.useState)((()=>$t(e,i)));(0,r.useEffect)((()=>{const e=o.filter((e=>a.includes(e)));e.length!==o.length&&l(e)}),[a,o]);const s=(0,r.useCallback)(((e,t)=>{const r=o.includes(e);r!==t&&(l(r?o.filter((t=>t!==e)):o.concat(e)),n(e,!r))}),[o,n]);return{expandedIds:o,toggle:s}}function $t(e,t){return e.reduce(((e,n)=>(t(n.id,n.startExpanded)&&e.push(n.id),n.children?e.concat($t(n.children,t)):e)),[])}function Lt(e,t){return(0,r.useMemo)((()=>Dt(e,t)),[e,t])}function Dt(e,t){return e.reduce(((e,n)=>(e.push(n.id),n.children&&t.includes(n.id)?e.concat(Dt(n.children,t)):e)),[])}function jt({id:e,label:t,children:n=[],selectedId:i,expandedIds:a,level:o,rowHeight:l,nodeIndex:s,setSize:c,emptyMarker:u,onSelect:d,onToggle:f}){const m=a.includes(e),p=0!==n.length,h=e===i,v=`${p?"expandable":""} ${m?"expanded":""} ${h?"selected":""} ${0===n.length?"empty":""}`,g=(0,r.useCallback)((e=>{e.stopPropagation()}),[]),b=(0,r.useCallback)((t=>{t.stopPropagation(),null==d||d(e)}),[e,d]),y=(0,r.useCallback)((t=>{t.stopPropagation(),null==f||f(e)}),[e,f]),w=(0,r.useCallback)((t=>{t.stopPropagation(),null==f||f(e),m&&Ut(n,i)&&(null==d||d(e))}),[e,i,m,n,d,f]);return r.createElement("li",{className:`tree-view-node ${v}`,id:`tree-view-node-${e}`,role:"treeitem","aria-selected":h?"true":void 0,"aria-expanded":m?"true":void 0,"aria-labelledby":`tree-view-node-label-${e}`,"aria-level":o,"aria-setsize":c,"aria-posinset":s+1,onMouseDown:b},r.createElement("span",{className:"tree-view-row",onDoubleClick:y,style:{height:`${l}px`}},p?r.createElement("svg",{className:"tree-view-node-marker",viewBox:`0 0 ${m?320:256} 512`,onMouseDown:g,onClick:w},m?r.createElement("path",{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"}):r.createElement("path",{d:"M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"})):u&&r.createElement("svg",{className:"tree-view-node-marker",viewBox:"0 0 24 24",onMouseDown:g},r.createElement("circle",{cx:"12",cy:"12",r:"4"})),r.createElement("span",{className:"tree-view-node-label",id:`tree-view-node-label-${e}`},t)),m&&r.createElement("ul",{className:"tree-view-node-children",role:"group"},n.map(((e,t)=>{var{id:s}=e,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["id"]);return r.createElement(jt,Object.assign({},c,{id:s,selectedId:i,expandedIds:a,level:o+1,rowHeight:l,nodeIndex:t,setSize:n.length,onSelect:d,onToggle:f,key:s}))}))))}var Rt,Ft=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Bt(e){var{roots:t,className:n="",onSelect:i}=e,a=Ft(e,["roots","className","onSelect"]);const o=0===t.length;return(0,r.useEffect)((()=>{o&&(null==i||i(null))}),[o,i]),o?r.createElement("div",{className:`tree-view ${n}`,tabIndex:0}):r.createElement(Vt,Object.assign({},a,{className:n,roots:t,onSelect:i}))}function Vt({roots:e,className:t,storeId:n,onContextMenu:i,onDelete:a,onEnter:o,onInfo:l,onSelect:s}){const c=(0,r.useRef)(null),u=(0,r.useRef)(null),d=(0,r.useRef)(null),{storeSelectedNodeId:f,retrieveSelectedNodeId:m}=Ot(n),[p,h]=(0,r.useState)((()=>{var t;return m(null===(t=e[0])||void 0===t?void 0:t.id)})),{expandedIds:v,toggle:g}=_t(e,n),b=Lt(e,v),y=b.indexOf(p),[w,x]=(0,r.useState)(0),[k,S]=(0,r.useState)(24),[E,C]=(0,r.useState)(0),P=Math.floor(w/k)-1,T=b.length,A=Ht(e,p),z=It()&&!(0===y||y===T-1),[I,N]=(0,r.useState)((()=>A));(0,r.useLayoutEffect)((()=>{if(!Ut(e,p)){const t=e.find((e=>null==p?void 0:p.startsWith(`${e.id}/`)))||e[0];h(null==t?void 0:t.id)}}),[e,p]),(0,r.useLayoutEffect)((()=>{null==s||s(I)}),[I,s]),(0,r.useEffect)((()=>{f(p)}),[p,f]),(0,r.useEffect)((()=>{z||N(A)}),[A,z]);const M=(0,r.useCallback)((e=>{e.preventDefault(),null==i||i(A,e.pageX,e.pageY)}),[A,i]),O=(0,r.useCallback)((e=>{switch(e.key){case"Enter":e.stopPropagation(),e.repeat||null==o||o(A);break;case"Delete":e.stopPropagation(),e.repeat||null==a||a(A);break;case"Info":case"i":e.stopPropagation(),e.repeat||null==l||l(A);break;case"ArrowLeft":e.stopPropagation(),e.repeat||g(p,!1);break;case"ArrowRight":e.stopPropagation(),e.repeat||g(p,!0);break;default:{const t=function(e,t,n){switch(e){case"ArrowUp":return t[t.indexOf(n)-1]||n;case"ArrowDown":return t[t.indexOf(n)+1]||n;case"Home":return t[0]||n;case"End":return t[t.length-1]||n;default:return""}}(e.key,b,p);if(t&&(e.preventDefault(),t!==p)){e.stopPropagation();const n=u.current,r=Math.floor(E/k),i=b.indexOf(t);if(i>=r+P-1){const e=T*k,t=T-P-1,r=Math.min(T-1,i+1)-P,a=r===t?e:r*k;n.scrollTo({top:a})}else if(i<=r){const e=Math.max(0,i-1)*k;n.scrollTo({top:e})}h(t)}}}}),[b,p,A,k,P,T,E,a,o,l,g]),$=(0,r.useCallback)((({height:e})=>x(e)),[]),L=(0,r.useCallback)((({top:e})=>C(e)),[]);return _(d,(0,r.useCallback)((()=>{S(d.current.getBoundingClientRect().height)}),[])),r.createElement("div",{className:`tree-view ${t}`,tabIndex:0,onContextMenu:M,onKeyDown:O,ref:c},r.createElement(At,{scrollAmount:k,onResize:$,onScroll:L,scrollableRef:u},r.createElement("ul",{role:"tree"},e.map(((t,n)=>{var{id:i}=t,a=Ft(t,["id"]);return r.createElement(jt,Object.assign({},a,{id:i,selectedId:p,expandedIds:v,level:1,rowHeight:k,nodeIndex:n,setSize:e.length,emptyMarker:!0,onSelect:h,onToggle:g,key:i}))}))),r.createElement("div",{className:"tree-view-cursor",style:{transform:`translateY(${y*k}px)`},ref:d})))}function Ut(e,t){for(const n of e){if(n.id===t)return!0;if(n.children&&Ut(n.children,t))return!0}return!1}function Ht(e,t){return e.reduce(((e,n)=>{if(void 0===e)if(n.id===t)e=n.value;else if(n.children)return Ht(n.children,t);return e}),void 0)}!function(e){e[e.Media=0]="Media",e[e.Album=1]="Album",e[e.Artist=2]="Artist",e[e.Playlist=3]="Playlist"}(Rt||(Rt={}));const Wt=Rt;function qt(e){return e<=0?function(){return ct}:Qe((function(t,n){var r=0;t.subscribe(Xe(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function Yt(e,t=5e3){return new Promise(((n,r)=>{const i=()=>e.disconnect(),a=e.observeItems(),o=bt(e.observeError(),$e(t).pipe(Je((()=>Error("timeout")))));a.pipe(St(o),qt(1)).subscribe({next:n,complete:i}),o.pipe(St(a),qt(1)).subscribe({next:r,complete:i}),e.fetchAt(0)}))}class Kt{constructor(e=[]){this.items=e}get maxSize(){}observeItems(){return zt(this.items)}observeSize(){return zt(this.items.length)}observeError(){return ct}fetchAt(){}disconnect(){this.items.forEach((e=>{var t;return null===(t=e.pager)||void 0===t?void 0:t.disconnect()}))}}var Qt=Q((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Xt=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return B(t,e),t.prototype.lift=function(e){var t=new Gt(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Qt},t.prototype.next=function(e){var t=this;we((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=U(t.currentObservers),a=i.next();!a.done;a=i.next())a.value.next(e)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;we((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;we((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,a=n.observers;return r||i?Z:(this.currentObservers=null,a.push(e),new J((function(){t.currentObservers=null,G(a,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new Me;return e.source=this,e},t.create=function(e,t){return new Gt(e,t)},t}(Me),Gt=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return B(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Z},t}(Xt),Jt=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return B(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Xt);function Zt(e,t){return void 0===t&&(t=Ie),e=null!=e?e:en,Qe((function(n,r){var i,a=!0;n.subscribe(Xe(r,(function(n){var o=t(n);!a&&e(i,o)||(a=!1,i=o,r.next(n))})))}))}function en(e,t){return e===t}const tn="eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ijk3RjI2N1daRDkifQ.eyJpYXQiOjE2NjEzNjAyODMsImV4cCI6MTY3NjkxMjI4MywiaXNzIjoiODM4Nk5ERlhMQiJ9.qkvBCFCPGPBBO1Z26b1kiQBzCoZjbcpcIMrxyi-m1BpTWSJUEP9nT58cwc5WGbkOc1YVmipk9Lj0mtOKi_4Qsg".toString(),nn="41bd731be5b78200d2bbaea2312b917b".toString(),rn="78aa93b641329f00e68cf1542356b8fc".toString(),an="68c1c915728f4b9da193da1028692f0d".toString(),on="AIzaSyD-cQaU5ntJBcCEBAbmK5pIXD4FQ19fdho".toString(),ln="364143070327-sgopc15lidje8uq4l16k1u8pqo2hpc4o.apps.googleusercontent.com".toString(),sn=new f("apple"),cn={get useMusicKitBeta(){return sn.getBoolean("useMusicKitBeta")},set useMusicKitBeta(e){sn.setBoolean("useMusicKitBeta",e)},clear(){sn.clear()}};var un=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};class dn{constructor(e){this.MusicKit=e}get version(){return this.MusicKit.version}get Events(){return this.MusicKit.Events}get PlaybackStates(){return this.MusicKit.PlaybackStates}configure(e){return un(this,void 0,void 0,(function*(){const t=this.MusicKit.configure(e);return this.instance=t,Object.defineProperties(t,{volume:{get:()=>t.player.volume,set:e=>t.player.volume=e},queue:{get:()=>t.player.queue},isPlaying:{get:()=>t.player.isPlaying},nowPlayingItem:{get:()=>t.player.nowPlayingItem}}),Object.defineProperties(t.api,{music:{get:()=>e=>this.music(e)}}),this.instance}))}getInstance(){const e=this.instance;if(e)return e.api.music||Object.defineProperties(e.api,{music:{get:()=>e=>this.music(e)}}),e;throw Error("Not configured.")}formatArtworkURL(e,t,n){return this.MusicKit.formatArtworkURL(e,t,n)}music(e){return un(this,void 0,void 0,(function*(){const t=this.getInstance();e=e.replace("{{storefrontId}}",t.storefrontId);const n=yield fetch(`https://api.music.apple.com${e}`,{headers:{authorization:`Bearer ${t.developerToken}`,"music-user-token":t.musicUserToken}});if(!n.ok)throw n;return{data:yield n.json()}}))}}var fn=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::appleAuth");const mn=new l("appleAuth"),pn=new Jt("");function hn(){return""!==pn.getValue()}function vn(){return pn.pipe(Zt()).pipe(Je((e=>""!==e)),Zt())}function gn(){return fn(this,void 0,void 0,(function*(){return window.MusicKit?MusicKit.getInstance():new Promise(((e,t)=>{w(`https://js-cdn.music.apple.com/musickit/v${cn.useMusicKitBeta?3:1}/musickit.js`).then(void 0,t),document.addEventListener("musickitloaded",(()=>fn(this,void 0,void 0,(function*(){mn.log("Loaded MusicKit version",MusicKit.version),window.MusicKit.version.startsWith("1")&&(window.MusicKit=new dn(MusicKit));try{const t=yield window.MusicKit.configure({developerToken:tn,app:{name:"ampcast",build:"0.6.0"},sourceType:8,suppressErrorDialog:!0});e(t)}catch(e){t(e)}}))))}))}))}var bn;!function(){fn(this,void 0,void 0,(function*(){const e=yield gn();if(e.isAuthorized){const t=yield e.authorize();mn.log("Access token successfully obtained."),pn.next(t)}}))}(),function(e){e[e.Audio=0]="Audio",e[e.Video=1]="Video"}(bn||(bn={}));const yn=bn;var wn=Array.isArray,xn=Object.getPrototypeOf,kn=Object.prototype,Sn=Object.keys;function En(e){if(1===e.length){var t=e[0];if(wn(t))return{args:t,keys:null};if((r=t)&&"object"==typeof r&&xn(r)===kn){var n=Sn(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var r;return{args:e,keys:null}}function Cn(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}function Pn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ft(e),r=dt(e),i=En(e),a=i.args,o=i.keys;if(0===a.length)return gt([],n);var l=new Me(Tn(a,n,o?function(e){return Cn(o,e)}:Ie));return r?l.pipe(nt(r)):l}function Tn(e,t,n){return void 0===n&&(n=Ie),function(r){An(t,(function(){for(var i=e.length,a=new Array(i),o=i,l=i,s=function(i){An(t,(function(){var s=gt(e[i],t),c=!1;s.subscribe(Xe(r,(function(e){a[i]=e,c||(c=!0,l--),l||r.next(n(a.slice()))}),(function(){--o||r.complete()})))}),r)},c=0;c<i;c++)s(c)}),r)}}function An(e,t,n){e?Ze(n,e,t):t()}function zn(e,t,n){var r=K(e)||t||n?{next:e,error:t,complete:n}:e;return r?Qe((function(e,t){var n;null===(n=r.subscribe)||void 0===n||n.call(r);var i=!0;e.subscribe(Xe(t,(function(e){var n;null===(n=r.next)||void 0===n||n.call(r,e),t.next(e)}),(function(){var e;i=!1,null===(e=r.complete)||void 0===e||e.call(r),t.complete()}),(function(e){var n;i=!1,null===(n=r.error)||void 0===n||n.call(r,e),t.error(e)}),(function(){var e,t;i&&(null===(e=r.unsubscribe)||void 0===e||e.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)})))})):Ie}const In=new l("DualPager");class Nn{constructor(e,t){this.topPager=e,this.mainPager=t,this.fetches$=new Jt({index:0}),this.disconnected=!1}get maxSize(){}observeItems(){return Pn([this.topPager.observeItems(),this.mainPager.observeItems()]).pipe(Je((([e,t])=>e.concat(t))))}observeSize(){return Pn([this.topPager.observeSize(),this.mainPager.observeSize()]).pipe(Je((([e,t])=>e+t)))}observeError(){return this.mainPager.observeError()}disconnect(){var e;this.disconnected||(this.disconnected=!0,null===(e=this.subscriptions)||void 0===e||e.unsubscribe(),this.topPager.disconnect(),this.mainPager.disconnect())}fetchAt(e,t){this.disconnected?In.warn("disconnected"):(this.subscriptions||this.connect(),this.fetches$.next({index:e,length:t}))}connect(){this.subscriptions||(this.subscriptions=new J,this.subscriptions.add(Pn([this.topPager.observeSize(),this.fetches$]).pipe(zn((([e,t])=>this.mainPager.fetchAt(Math.max(t.index-e,0),t.length)))).subscribe(In)))}}function Mn(e){return Qe((function(t,n){var r,i=null,a=!1;i=t.subscribe(Xe(n,void 0,void 0,(function(o){r=Ye(e(o,Mn(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):a=!0}))),a&&(i.unsubscribe(),i=null,r.subscribe(n))}))}var On=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=ae);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return B(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,o=n._timestampProvider,l=n._windowTime;r||(i.push(t),!a&&i.push(o.now()+l)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,a=(i?1:2)*t;if(t<1/0&&a<r.length&&r.splice(0,r.length-a),!i){for(var o=n.now(),l=0,s=1;s<r.length&&r[s]<=o;s+=2)l=s;l&&r.splice(0,l+1)}},t}(Xt);const _n=[],$n=new l("AbstractPager");let Ln=0;class Dn{constructor(e={}){this.config=e,this.items$=new Jt(_n),this.size$=new On(1),this.error$=new On(1),this.fetches$=new Jt({index:0,length:0}),this.disconnected=!1}get maxSize(){return this.config.maxSize}observeItems(){return this.items$.pipe(xt((e=>e!==_n)))}observeSize(){return this.size$.pipe(Zt())}observeError(){return this.error$}disconnect(){this.disconnected||(this.disconnected=!0,this.subscriptions&&(this.subscriptions.unsubscribe(),Ln--),this.items.forEach((e=>{var t;return null===(t=e.pager)||void 0===t?void 0:t.disconnect()})),this.items$.complete(),this.size$.complete(),this.error$.complete())}fetchAt(e,t=this.config.pageSize){if(this.disconnected)$n.warn("disconnected");else{if(t||(t=50),!this.subscriptions&&(this.connect(),this.config.calculatePageSize)){const{minPageSize:e=10,maxPageSize:n=100}=this.config,r=10*Math.ceil(2*t/10);this.config.pageSize=Math.max(Math.min(r,n),e)}this.fetches$.next({index:e,length:t})}}get items(){return this.items$.getValue()}observeComplete(){return Pn([this.observeItems(),this.observeSize()]).pipe(xt((([e,t])=>e.reduce((e=>e+1),0)===t)),Je((([e])=>e)),qt(1))}connect(){this.subscriptions||(Ln++,Ln>100&&$n.warn(`Too many pagers? Connected pagers=${Ln}.`),this.subscriptions=new J,this.subscriptions.add(this.observeAdditions().pipe(zn((e=>this.addMissingTrackCounts(e)))).subscribe($n)))}observeAdditions(){return this.items$.pipe(Qe((function(e,t){var n,r=!1;e.subscribe(Xe(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))})),Je((([e,t])=>t.filter((t=>!e.find((e=>e.src===t.src)))))))}addMissingTrackCounts(e){e.forEach((e=>{e.itemType===Wt.Playlist&&!e.trackCount&&e.pager&&this.subscriptions.add(e.pager.observeSize().pipe(zn((t=>{const n=e.src,r=this.items.findIndex((e=>e.src===n));if(-1!==r){const e=this.items.slice(),n=e[r];e[r]=Object.assign(Object.assign({},n),{trackCount:t}),this.items$.next(e)}}))).subscribe($n))}))}}const jn=new l("SequentialPager");class Rn extends Dn{constructor(e,t){super(t),this.fetchNext=e,this.fetching$=new Jt(!1),this.maxEmptyCount=2,this.emptyCount=0}connect(){var e,t;this.subscriptions||(super.connect(),this.subscriptions.add(this.observeShouldFetch().pipe(zn((()=>this.fetching$.next(!0))),(e=()=>this.fetchNext(this.config.pageSize),K(t)?et(e,t,1):et(e,1)),zn((e=>this.addPage(e))),Mn((e=>(jn.error(e),this.error$.next(e),zt(void 0)))),zn((()=>this.fetching$.next(!1))),St(this.observeComplete()),qt(100)).subscribe(jn)))}observeShouldFetch(){const e=Pn([this.fetches$,this.items$]).pipe(Je((([{index:e,length:t},n])=>e+2*t>=n.length)),xt((e=>e)),Je((()=>{})),qt(1));return this.fetching$.pipe(kt((t=>t?ct:e)))}addPage(e){var t,n;const r=(e.items||[]).filter(y),i=k(this.items.concat(r),"src");i.length===this.items.length&&this.emptyCount++,i.length=Math.min(i.length,null!==(t=this.maxSize)&&void 0!==t?t:1/0);const a=e.atEnd||i.length===this.maxSize||this.emptyCount>this.maxEmptyCount?i.length:e.total;void 0!==a&&this.size$.next(Math.min(a,null!==(n=this.maxSize)&&void 0!==n?n:1/0)),this.items$.next(i)}}var Fn=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};class Bn{constructor(e,t,n,r,i){this.album=i,this.nextPageUrl=void 0,this.pager=new Rn((r=>Fn(this,void 0,void 0,(function*(){const i=yield this.fetchNext(this.nextPageUrl||e,r?n?Object.assign(Object.assign({},n),{limit:r}):{limit:r}:n),a=t(i.data),o=this.createItems(a.items),l=a.total,s=!a.nextPageUrl;return this.nextPageUrl=a.nextPageUrl,{items:o,total:l,atEnd:s}}))),r)}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}fetchNext(e,t){return Fn(this,void 0,void 0,(function*(){const n=MusicKit.getInstance();return t&&(e=`${e}${e.includes("?")?"&":"?"}${new URLSearchParams(t)}`),n.api.music(e)}))}createItems(e){return e.map((e=>this.createItem(e)))}createItem(e){switch(e.type){case"playlists":case"library-playlists":return this.createMediaPlaylist(e);case"artists":case"library-artists":return this.createMediaArtist(e);case"albums":case"library-albums":return this.createMediaAlbum(e);case"songs":case"library-songs":case"music-videos":return this.createMediaItem(e)}}createMediaPlaylist(e){var t;const n=this.createFromLibrary(e),{id:r,kind:i}=n.playParams||{id:e.id,kind:"playlist"},a=null===(t=e.href)||void 0===t?void 0:t.startsWith("/v1/me/library/"),o=n.description;return{itemType:Wt.Playlist,src:`apple:${i}:${r}`,externalUrl:n.url||(a?`https://music.apple.com/library/playlist/${r}`:""),title:n.name,description:(null==o?void 0:o.standard)||(null==o?void 0:o.short),thumbnails:this.createThumbnails(e),owner:{name:n.curatorName||"",url:""},modifiedAt:Math.floor(new Date(n.lastModifiedDate).valueOf()/1e3)||void 0,pager:this.createPager(`${e.href}`,{include:"tracks,catalog","fields[library-playlists]":"playParams,name,artwork,url,tracks"}),unplayable:!n.playParams}}createMediaArtist(e){const t=this.createFromLibrary(e);return{itemType:Wt.Artist,src:`apple:artist:${e.id}`,externalUrl:t.url,title:t.name,thumbnails:this.createThumbnails(e),genres:this.getGenres(t),pager:this.createArtistAlbumsPager(e)}}createArtistTopTracks(e){const t=this.createFromLibrary(e);return{itemType:Wt.Album,src:`apple:top-tracks:${e.id}`,externalUrl:"",title:"Top Tracks",thumbnails:this.createThumbnails(e),artist:t.name,genres:this.getGenres(t),pager:this.createTopTracksPager(e)}}createMediaAlbum(e){const t=this.createFromLibrary(e),{id:n,kind:r}=t.playParams||{id:e.id,kind:"album"};return{itemType:Wt.Album,src:`apple:${r}:${n}`,externalUrl:t.url,title:t.name,thumbnails:this.createThumbnails(e),artist:t.artistName,trackCount:t.trackCount,genres:this.getGenres(t),year:new Date(t.releaseDate).getFullYear()||0,pager:this.createPager(e.href,{"include[library-songs]":"catalog","fields[library-songs]":"playParams,name,artistName,albumName,artwork"},void 0,t),unplayable:!t.playParams}}createMediaItem(e){const t=this.createFromLibrary(e),{id:n,kind:r}=t.playParams||{id:e.id,kind:"music-videos"===e.type?"musicVideo":"song"};return{itemType:Wt.Media,mediaType:"musicVideo"===r?yn.Video:yn.Audio,src:`apple:${r}:${n}`,externalUrl:t.url,title:t.name,thumbnails:this.createThumbnails(e),artists:[t.artistName],albumArtist:this.album?this.album.artistName:void 0,album:t.albumName,duration:t.durationInMillis/1e3,genres:this.getGenres(t),track:t.trackNumber,year:new Date(t.releaseDate).getFullYear()||void 0,isrc:t.isrc,unplayable:!t.playParams,playedAt:0}}createFromLibrary(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.relationships)||void 0===t?void 0:t.catalog)||void 0===n?void 0:n.data)||void 0===r?void 0:r[0];return Object.assign(Object.assign({},null==i?void 0:i.attributes),e.attributes)}createThumbnails(e){var t;const n=null===(t=e.attributes)||void 0===t?void 0:t.artwork;return n?[this.createThumbnail(n,60),this.createThumbnail(n,120),this.createThumbnail(n,240),this.createThumbnail(n,480)]:void 0}createThumbnail(e,t){return{url:MusicKit.formatArtworkURL(e,t,t),width:t,height:t}}createArtistAlbumsPager(e){var t;const n=this.createArtistTopTracks(e),r=new Kt([n]),i=this.createPager((null===(t=e.relationships)||void 0===t?void 0:t.albums.href)||`/v1/catalog/{{storefrontId}}/artists/${e.id}/albums`);return new Nn(r,i)}createTopTracksPager(e){return new Bn(e.href,(e=>{var t,n,r;const i=(null===(n=null===(t=e.data[0])||void 0===t?void 0:t.views)||void 0===n?void 0:n["top-songs"])||e,a=i.data||[],o=i.next;return{items:a,total:null===(r=i.meta)||void 0===r?void 0:r.total,nextPageUrl:o}}),{"limit[artists:top-songs]":"20",views:"top-songs"},{maxSize:20})}createPager(e,t,n,r){return new Bn(e,(e=>{var t,n,r;const i=(null===(n=null===(t=e.data[0])||void 0===t?void 0:t.relationships)||void 0===n?void 0:n.tracks)||e,a=i.data||[],o=i.next;return{items:a,total:null===(r=i.meta)||void 0===r?void 0:r.total,nextPageUrl:o}}),t,n,r)}getGenres({genreNames:e=[]}){return e.filter((e=>"Music"!==e))}}console.log("module::apple");const Vn={view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","Duration"]},Un={id:"apple/video",title:"Music Video",icon:"video",itemType:Wt.Media,searchable:!0,layout:Vn,defaultHidden:!0,search:({q:e=""}={})=>e?Gn(Wt.Media,e,{types:"music-videos"},{maxSize:100}):new Kt},Hn={id:"apple/recommendations",title:"Recommended",icon:"playlists",itemType:Wt.Playlist,defaultHidden:!0,search:()=>new Bn("/v1/me/recommendations",(({data:e=[],next:t,meta:n})=>{const r=e.map((e=>e.relationships.contents.data.filter((e=>"playlists"===e.type)))).flat();return{items:r,total:null==n?void 0:n.total,nextPageUrl:t}}))},Wn={id:"apple/recently-played",title:"Recently Played",icon:"clock",itemType:Wt.Media,layout:{view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","LastPlayed"]},search:()=>new Bn("/v1/me/recent/played/tracks",Jn,void 0,{pageSize:30})},qn={id:"apple/library-songs",title:"My Songs",icon:"heart",itemType:Wt.Media,layout:Vn,defaultHidden:!0,search:()=>new Bn("/v1/me/library/songs",Jn,{"include[library-songs]":"catalog","fields[library-songs]":"playParams,name,artistName,albumName,artwork"})},Yn={id:"apple/library-albums",title:"My Albums",icon:"heart",itemType:Wt.Album,search:()=>new Bn("/v1/me/library/albums",Jn,{"include[library-albums]":"catalog","fields[library-albums]":"playParams,name,artistName,artwork"})},Kn={id:"apple/playlists",title:"Playlists",icon:"playlists",itemType:Wt.Playlist,search:()=>new Bn("/v1/me/library/playlists",Jn,{"include[library-playlists]":"catalog","fields[library-playlists]":"playParams,name,artwork"})},Qn={id:"apple",name:"Apple Music",icon:"apple",url:"https://music.apple.com/",lookup:function(e,t,n=10,r){return i=this,a=void 0,l=function*(){if(!e||!t)return[];const i={pageSize:n,maxSize:n};return Yt(Gn(Wt.Media,`${e} ${t}`,void 0,i),r)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof o?e:new o((function(t){t(e)}))}(t.value).then(n,r)}s((l=l.apply(i,a||[])).next())}));var i,a,o,l},roots:[Xn(Wt.Media,{title:"Songs",layout:Vn}),Xn(Wt.Album,{title:"Albums"}),Xn(Wt.Artist,{title:"Artists",layout:{view:"card compact",fields:["Thumbnail","Title","Genre"]}}),Xn(Wt.Playlist,{title:"Playlists"})],sources:[Un,Wn,qn,Yn,Kn,Hn],observeIsLoggedIn:vn,isLoggedIn:hn,login:function(){return fn(this,void 0,void 0,(function*(){if(!hn())try{const e=yield gn(),t=yield e.authorize();mn.log("Access token successfully obtained."),pn.next(t)}catch(e){mn.log("Could not obtain access token."),mn.error(e)}}))},logout:function(){return fn(this,void 0,void 0,(function*(){yield MusicKit.getInstance().unauthorize(),pn.next("")}))}};function Xn(e,t){return Object.assign(Object.assign({},t),{itemType:e,id:String(e),icon:"search",searchable:!0,search:({q:t=""}={})=>Gn(e,t)})}function Gn(e,t,n,r){if(t){const i=Object.assign(Object.assign({},n),{term:t});if(!i.types)switch(e){case Wt.Media:i.types="songs";break;case Wt.Album:i.types="albums";break;case Wt.Artist:i.types="artists";break;case Wt.Playlist:i.types="playlists"}const a=i.types;return new Bn("/v1/catalog/{{storefrontId}}/search",(e=>{var t;const n=e.results[a]||{data:[]},r=n.next,i=null===(t=e.meta)||void 0===t?void 0:t.total;return{items:n.data,total:i,nextPageUrl:r}}),i,Object.assign({maxSize:250,pageSize:25},r))}return new Kt}function Jn({data:e=[],next:t,meta:n}){return{items:e,total:null==n?void 0:n.total,nextPageUrl:t}}const Zn=Qn;var er;!function(e){e[e.Pending=0]="Pending",e[e.Fulfilled=1]="Fulfilled",e[e.Rejected=2]="Rejected"}(er||(er={}));const tr=new l("OffsetPager");class nr extends Dn{constructor(e,t){super(t),this.fetch=e,this.fetchStates={},this.size=0}connect(){this.subscriptions||(super.connect(),this.subscriptions.add(this.fetches$.pipe(xt((({index:e})=>this.isInRange(e))),Je((({index:e,length:t})=>this.getPageNumbersFromIndex(e,t))),et((e=>e)),et((e=>this.fetchPage(e))),Mn((e=>(tr.error(e),this.error$.next(e),zt(void 0)))),St(this.observeComplete())).subscribe(tr)))}get pageSize(){return this.config.pageSize||20}fetchPage(e){return t=this,n=void 0,i=function*(){if(this.fetchStates[e]!==er.Fulfilled&&this.fetchStates[e]!==er.Pending){this.fetchStates[e]=er.Pending;try{const t=yield this.fetch(e,this.pageSize);this.fetchStates[e]=er.Fulfilled,this.insertPage(e,t)}catch(t){throw this.fetchStates[e]=er.Rejected,t}}},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}insertPage(e,t){var n;const r=this.items.slice(),i=Math.min(t.total,null!==(n=this.maxSize)&&void 0!==n?n:1/0),a=Math.ceil(i/this.pageSize),o=(e-1)*this.pageSize,l=e===a;if(r.length=l||t.items.length<this.pageSize?o:i,t.items.forEach(((e,t)=>r[t+o]=e)),r.length=Math.min(r.length,i),t.items.length===i)for(let e=0;e<=a;e++)this.fetchStates[e+1]=er.Fulfilled;this.size=i,this.size$.next(i),this.items$.next(r)}getPageNumbersFromIndex(e,t){const n=this.size,r=Math.max(Math.ceil(this.pageSize/2),t),i=Math.max(e-r,0),a=Math.min(e+r+t-1,0===n?this.maxSize?this.maxSize-1:1/0:n-1),o=this.getPageNumberFromIndex(i),l=this.getPageNumberFromIndex(a);if(o===l)return[o];{const e=[];for(let t=o;t<=l;t++)e.push(t);return e}}getPageNumberFromIndex(e){return Math.floor(e/this.pageSize)+1}isInRange(e){return 0===this.size?e>=0:e>=0&&e<this.size}}let rr=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),"");const ir=new f("jellyfin"),ar={get host(){return ir.getString("host")},set host(e){ir.setString("host",e)},get device(){return"PC"},get deviceId(){let e=ir.getString("deviceId");return e||(e=rr(),ir.setString("deviceId",e)),e},get token(){return ir.getString("token")},set token(e){ir.setString("token",e)},get userId(){return ir.getString("userId")},set userId(e){ir.setString("userId",e)},clear(){ir.removeItem("userId"),ir.removeItem("token")}};var or=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};function lr(e,t){return or(this,void 0,void 0,(function*(){const{device:n,deviceId:r,token:i}=ar;if(!i)throw Error("No access token.");return t.headers=Object.assign(Object.assign({},t.headers),{"X-Emby-Authorization":`MediaBrowser Client="ampcast", Version="0.6.0", Device="${n}", DeviceId="${r}", Token="${i}"`}),window.fetch(`${ar.host}/${e}`,t)}))}console.log("module::jellyfinApi");const sr={get:function(e,t){return or(this,void 0,void 0,(function*(){return lr(`${e}?${new URLSearchParams(t)}`,{method:"GET"})}))},post:function(e,t){return or(this,void 0,void 0,(function*(){const n=JSON.stringify(t);return lr(e,{method:"POST",headers:{"Content-Type":"application/json"},body:n})}))},getPlayableUrlFromSrc:function(e){const{host:t,userId:n,token:r,deviceId:i}=ar;if(t&&n&&r&&i){const[,,a]=e.split(":");return`${t}/Audio/${a}/universal?${new URLSearchParams({MaxStreamingBitrate:"140000000",MaxSampleRate:"48000",TranscodingProtocol:"hls",TranscodingContainer:"ts",Container:"opus,webm|opus,mp3,aac,m4a|aac,m4a|alac,m4b|aac,flac,webma,webm|webma,wav,ogg",AudioCodec:"aac",static:"true",UserId:n,api_key:r,DeviceId:i})}`}throw Error("Not logged in.")}},cr=sr;class ur{constructor(e,t={},n){this.path=e,this.params=t,this.pageSize=(null==n?void 0:n.pageSize)||100,this.pager=new nr((e=>this.fetch(e)),Object.assign({pageSize:this.pageSize},n))}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}fetch(e){return t=this,n=void 0,i=function*(){const t=Object.assign(Object.assign({IncludeItemTypes:"Audio",Fields:"AudioInfo,Genres",Recursive:"true",ImageTypeLimit:"1",EnableImageTypes:"Primary"},this.params),{Limit:String(this.pageSize),StartIndex:String((e-1)*this.pageSize)}),n=yield cr.get(this.path,t);if(!n.ok)throw Error(`${n.status}: ${n.statusText}`);const{Items:r,TotalRecordCount:i}=yield n.json();return{items:r.map((e=>this.createItem(e))),total:i}},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}createItem(e){switch(e.Type){case"MusicArtist":return this.createMediaArtist(e);case"MusicAlbum":return this.createMediaAlbum(e);case"Playlist":return this.createMediaPlaylist(e);default:return this.createMediaItemFromTrack(e)}}createMediaArtist(e){return{itemType:Wt.Artist,src:`jellyfin:album:${e.Id}`,externalUrl:"",title:e.Name||"",genres:e.Genres||void 0,thumbnails:this.createThumbnails(e.Id),pager:this.createAlbumsPager(e)}}createMediaAlbum(e){var t,n;return{itemType:Wt.Album,src:`jellyfin:album:${e.Id}`,externalUrl:"",title:e.Name||"",duration:e.RunTimeTicks?e.RunTimeTicks/1e7:0,playedAt:(null===(t=e.UserData)||void 0===t?void 0:t.LastPlayedDate)?Math.floor(new Date(e.UserData.LastPlayedDate).getTime()/1e3):void 0,playCount:(null===(n=e.UserData)||void 0===n?void 0:n.PlayCount)||void 0,genres:e.Genres||void 0,thumbnails:this.createThumbnails(e.Id),trackCount:e.ChildCount||void 0,pager:this.createAlbumPager(e),artist:e.AlbumArtist||void 0,year:e.ProductionYear||void 0}}createMediaPlaylist(e){var t,n;return{itemType:Wt.Playlist,src:`jellyfin:playlist:${e.Id}`,externalUrl:"",title:e.Name||"",duration:e.RunTimeTicks?e.RunTimeTicks/1e7:0,playedAt:(null===(t=e.UserData)||void 0===t?void 0:t.LastPlayedDate)?Math.floor(new Date(e.UserData.LastPlayedDate).getTime()/1e3):void 0,playCount:(null===(n=e.UserData)||void 0===n?void 0:n.PlayCount)||void 0,genres:e.Genres||void 0,thumbnails:this.createThumbnails(e.Id),trackCount:e.ChildCount||void 0,pager:this.createPlaylistPager(e)}}createMediaItemFromTrack(e){var t,n,r;const i=(null===(t=e.ImageTags)||void 0===t?void 0:t.Primary)?e.Id:e.AlbumId;return{itemType:Wt.Media,mediaType:yn.Audio,src:`jellyfin:audio:${e.Id}`,externalUrl:"",title:e.Name||"",duration:e.RunTimeTicks?e.RunTimeTicks/1e7:0,year:e.ProductionYear||void 0,playedAt:(null===(n=e.UserData)||void 0===n?void 0:n.LastPlayedDate)?Math.floor(new Date(e.UserData.LastPlayedDate).getTime()/1e3):0,playCount:(null===(r=e.UserData)||void 0===r?void 0:r.PlayCount)||void 0,genres:e.Genres||void 0,thumbnails:this.createThumbnails(i),artists:e.Artists||(e.AlbumArtist?[e.AlbumArtist]:void 0),albumArtist:e.AlbumArtist||void 0,album:e.Album||void 0,track:e.Album&&e.IndexNumber||0}}createThumbnails(e){return e?[this.createThumbnail(e,60),this.createThumbnail(e,120),this.createThumbnail(e,240),this.createThumbnail(e,480)]:void 0}createThumbnail(e,t,n=t){return{url:`${ar.host}/Items/${e}/Images/Primary?fillWidth=${t}&fillHeight=${n}`,width:t,height:n}}createAlbumPager(e){return new ur(`Users/${ar.userId}/Items`,{ParentId:e.Id,SortBy:"SortName",SortOrder:"Ascending"})}createAlbumsPager(e){return new ur(`Users/${ar.userId}/Items`,{AlbumArtistIds:e.Id,IncludeItemTypes:"MusicAlbum",SortOrder:"Descending"})}createPlaylistPager(e){return new ur(`Playlists/${e.Id}/Items`,{UserId:ar.userId,MediaType:"Audio",Fields:"ChildCount"})}}function dr({name:e,className:t=""}){switch(t=`icon icon-${e} ${t}`,e){case"ampcast":return r.createElement("svg",{className:t,viewBox:"0 0 24 24"},r.createElement("circle",{cx:"12",cy:"12",r:"8",strokeWidth:"4",stroke:"orange",fill:"black"}),r.createElement("circle",{cx:"12",cy:"12",r:"2",stroke:"none",fill:"white"}));case"play":return r.createElement("svg",{className:t,viewBox:"0 0 448 512"},r.createElement("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}));case"pause":return r.createElement("svg",{className:t,viewBox:"0 0 448 512"},r.createElement("path",{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}));case"stop":return r.createElement("svg",{className:t,viewBox:"0 0 448 512"},r.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}));case"volume":return r.createElement("svg",{className:t,viewBox:"0 0 16 16"},r.createElement("path",{className:"high medium",stroke:"none",d:"M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"}),r.createElement("path",{className:"medium",stroke:"none",d:"M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"}),r.createElement("path",{stroke:"none",d:"M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z"}));case"muted":return r.createElement("svg",{className:t,viewBox:"0 0 16 16"},r.createElement("path",{stroke:"none",d:"M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z"}));case"prev":return r.createElement("svg",{className:t,viewBox:"0 0 448 512"},r.createElement("path",{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"}));case"next":return r.createElement("svg",{className:t,viewBox:"0 0 448 512"},r.createElement("path",{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"}));case"info":return r.createElement("svg",{className:t,viewBox:"0 0 512 512"},r.createElement("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}));case"settings":return r.createElement("svg",{className:t,viewBox:"0 0 512 512"},r.createElement("path",{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}));case"album":return r.createElement("svg",{className:t,viewBox:"0 0 24 24"},r.createElement("circle",{cx:"12",cy:"12",r:"8.5",strokeWidth:"6.5",fill:"none"}),r.createElement("circle",{cx:"12",cy:"12",r:"2",stroke:"none"}));case"locked":return r.createElement("svg",{className:t,viewBox:"0 0 448 512",transform:"scale(0.95)"},r.createElement("path",{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}));case"unlocked":return r.createElement("svg",{className:t,viewBox:"0 0 576 512",transform:"scale(0.95)"},r.createElement("path",{d:"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"}));case"left":return r.createElement("svg",{className:t,viewBox:"0 0 320 512"},r.createElement("path",{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}));case"right":return r.createElement("svg",{className:t,viewBox:"0 0 320 512"},r.createElement("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}));case"saved":return r.createElement("svg",{className:t,viewBox:"0 0 448 512"},r.createElement("path",{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}));case"unsaved":return r.createElement("svg",{className:t,viewBox:"0 0 448 512"},r.createElement("path",{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"}));case"close":return r.createElement("svg",{className:t,viewBox:"0 0 64 64"},r.createElement("path",{d:"M 10.5,-0.5 C 12.1667,-0.5 13.8333,-0.5 15.5,-0.5C 20.7971,5.29805 26.2971,10.9647 32,16.5C 37.0314,10.303 42.5314,4.63636 48.5,-0.5C 49.8333,-0.5 51.1667,-0.5 52.5,-0.5C 55.8333,3.5 59.5,7.16667 63.5,10.5C 63.5,11.8333 63.5,13.1667 63.5,14.5C 57.7019,19.7971 52.0353,25.2971 46.5,31C 52.0353,36.7029 57.7019,42.2029 63.5,47.5C 63.5,49.1667 63.5,50.8333 63.5,52.5C 59.5,55.8333 55.8333,59.5 52.5,63.5C 50.8333,63.5 49.1667,63.5 47.5,63.5C 42.1604,57.8275 36.8271,52.1608 31.5,46.5C 25.479,51.8543 19.8123,57.521 14.5,63.5C 13.1667,63.5 11.8333,63.5 10.5,63.5C 7.16667,59.5 3.5,55.8333 -0.5,52.5C -0.5,50.8333 -0.5,49.1667 -0.5,47.5C 5.17254,42.1604 10.8392,36.8271 16.5,31.5C 10.8392,26.1729 5.17254,20.8396 -0.5,15.5C -0.5,13.8333 -0.5,12.1667 -0.5,10.5C 3.5,7.16667 7.16667,3.5 10.5,-0.5 Z"}));case"audio":return r.createElement("svg",{className:t,viewBox:"0 0 384 512"},r.createElement("path",{d:"M369.941 97.941l-83.882-83.882A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zM332.118 128H256V51.882L332.118 128zM48 464V48h160v104c0 13.255 10.745 24 24 24h104v288H48zm144-76.024c0 10.691-12.926 16.045-20.485 8.485L136 360.486h-28c-6.627 0-12-5.373-12-12v-56c0-6.627 5.373-12 12-12h28l35.515-36.947c7.56-7.56 20.485-2.206 20.485 8.485v135.952zm41.201-47.13c9.051-9.297 9.06-24.133.001-33.439-22.149-22.752 12.235-56.246 34.395-33.481 27.198 27.94 27.212 72.444.001 100.401-21.793 22.386-56.947-10.315-34.397-33.481z"}));case"video":return r.createElement("svg",{className:t,viewBox:"0 0 16 16"},r.createElement("path",{fillRule:"evenodd",d:"M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5zm11.5 5.175 3.5 1.556V4.269l-3.5 1.556v4.35zM2 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H2z"}));case"note":return r.createElement("svg",{className:t,viewBox:"0 0 24 24"},r.createElement("path",{stroke:"none",d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"}));case"star":return r.createElement("svg",{className:t,viewBox:"0 0 576 512"},r.createElement("path",{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"}));case"heart":return r.createElement("svg",{className:t,viewBox:"0 0 512 512"},r.createElement("path",{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"}));case"thumbs-up":return r.createElement("svg",{className:t,viewBox:"0 0 512 512"},r.createElement("path",{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"}));case"person":return r.createElement("svg",{className:t,viewBox:"0 0 16 16"},r.createElement("path",{stroke:"none",d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}));case"most-played":return r.createElement("svg",{className:t,viewBox:"0 0 16 16"},r.createElement("path",{stroke:"none",d:"M2 3a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11A.5.5 0 0 0 2 3zm2-2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7A.5.5 0 0 0 4 1zm2.765 5.576A.5.5 0 0 0 6 7v5a.5.5 0 0 0 .765.424l4-2.5a.5.5 0 0 0 0-.848l-4-2.5z"}),r.createElement("path",{stroke:"none",d:"M1.5 14.5A1.5 1.5 0 0 1 0 13V6a1.5 1.5 0 0 1 1.5-1.5h13A1.5 1.5 0 0 1 16 6v7a1.5 1.5 0 0 1-1.5 1.5h-13zm13-1a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5h-13A.5.5 0 0 0 1 6v7a.5.5 0 0 0 .5.5h13z"}));case"clock":return r.createElement("svg",{className:t,viewBox:"0 0 512 512"},r.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"}));case"search":return r.createElement("svg",{className:t,viewBox:"0 0 16 16"},r.createElement("path",{stroke:"none",d:"M15.504 13.616l-3.79-3.223c-0.392-0.353-0.811-0.514-1.149-0.499 0.895-1.048 1.435-2.407 1.435-3.893 0-3.314-2.686-6-6-6s-6 2.686-6 6 2.686 6 6 6c1.486 0 2.845-0.54 3.893-1.435-0.016 0.338 0.146 0.757 0.499 1.149l3.223 3.79c0.552 0.613 1.453 0.665 2.003 0.115s0.498-1.452-0.115-2.003zM6 10c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"}));case"recently-added":return r.createElement("svg",{className:t,viewBox:"0 0 384 512"},r.createElement("path",{d:"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"}),r.createElement("rect",{x:"177",y:"220",width:"40",height:"210",strokeWidth:"20",strokeLinejoin:"round"}),r.createElement("rect",{x:"87",y:"310",width:"210",height:"40",strokeWidth:"20",strokeLinejoin:"round"}));case"playlists":return r.createElement("svg",{className:t,viewBox:"0 0 512 512"},r.createElement("path",{d:"M88 48C101.3 48 112 58.75 112 72V120C112 133.3 101.3 144 88 144H40C26.75 144 16 133.3 16 120V72C16 58.75 26.75 48 40 48H88zM480 64C497.7 64 512 78.33 512 96C512 113.7 497.7 128 480 128H192C174.3 128 160 113.7 160 96C160 78.33 174.3 64 192 64H480zM480 224C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H192C174.3 288 160 273.7 160 256C160 238.3 174.3 224 192 224H480zM480 384C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H192C174.3 448 160 433.7 160 416C160 398.3 174.3 384 192 384H480zM16 232C16 218.7 26.75 208 40 208H88C101.3 208 112 218.7 112 232V280C112 293.3 101.3 304 88 304H40C26.75 304 16 293.3 16 280V232zM88 368C101.3 368 112 378.7 112 392V440C112 453.3 101.3 464 88 464H40C26.75 464 16 453.3 16 440V392C16 378.7 26.75 368 40 368H88z"}));case"file":case"blob":return r.createElement("svg",{className:t,viewBox:"0 0 448 512",transform:"scale(0.875)"},r.createElement("path",{fill:"#00cccc",d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"}));case"apple":return r.createElement("svg",{className:t,viewBox:"0 0 24 24",transform:"scale(1.1) translate(0,-1)"},r.createElement("path",{fillRule:"nonzero",d:"M11.624 7.222c-.876 0-2.232-.996-3.66-.96-1.884.024-3.612 1.092-4.584 2.784-1.956 3.396-.504 8.412 1.404 11.172.936 1.344 2.04 2.856 3.504 2.808 1.404-.06 1.932-.912 3.636-.912 1.692 0 2.172.912 3.66.876 1.512-.024 2.472-1.368 3.396-2.724 1.068-1.56 1.512-3.072 1.536-3.156-.036-.012-2.94-1.128-2.976-4.488-.024-2.808 2.292-4.152 2.4-4.212-1.32-1.932-3.348-2.148-4.056-2.196-1.848-.144-3.396 1.008-4.26 1.008zm3.12-2.832c.78-.936 1.296-2.244 1.152-3.54-1.116.048-2.46.744-3.264 1.68-.72.828-1.344 2.16-1.176 3.432 1.236.096 2.508-.636 3.288-1.572z"}));case"plex":return r.createElement("svg",{className:t,viewBox:"0 0 122.88 122.88"},r.createElement("path",{className:"icon-plex-outer",d:"M18.43,0h86.02c10.18,0,18.43,8.25,18.43,18.43v86.02c0,10.18-8.25,18.43-18.43,18.43H18.43 C8.25,122.88,0,114.63,0,104.45l0-86.02C0,8.25,8.25,0,18.43,0L18.43,0z"}),r.createElement("polygon",{className:"icon-plex-inner",points:"61.44,16.8 35.52,16.8 61.44,61.44 35.52,106.08 61.44,106.08 87.36,61.44 61.44,16.8"}));case"jellyfin":return r.createElement("svg",{className:t,viewBox:"0 0 512 512"},r.createElement("defs",null,r.createElement("linearGradient",{id:"jellyfin-linear-gradient",gradientUnits:"userSpaceOnUse",x1:"110.25",y1:"213.3",x2:"496.14",y2:"436.09"},r.createElement("stop",{offset:"0",style:{stopColor:"#aa5cc3"}}),r.createElement("stop",{offset:"1",style:{stopColor:"#00a4dc"}}))),r.createElement("path",{d:"M256,201.6c-20.4,0-86.2,119.3-76.2,139.4s142.5,19.9,152.4,0S276.5,201.6,256,201.6z"}),r.createElement("path",{d:"M256,23.3c-61.6,0-259.8,359.4-229.6,420.1s429.3,60,459.2,0S317.6,23.3,256,23.3z M406.5,390.8c-19.6,39.3-281.1,39.8-300.9,0s110.1-275.3,150.4-275.3S426.1,351.4,406.5,390.8z"}));case"spotify":return r.createElement("svg",{className:t,viewBox:"0 0 168 168"},r.createElement("path",{stroke:"none",d:"m83.996 0.277c-46.249 0-83.743 37.493-83.743 83.742 0 46.251 37.494 83.741 83.743 83.741 46.254 0 83.744-37.49 83.744-83.741 0-46.246-37.49-83.738-83.745-83.738l0.001-0.004zm38.404 120.78c-1.5 2.46-4.72 3.24-7.18 1.73-19.662-12.01-44.414-14.73-73.564-8.07-2.809 0.64-5.609-1.12-6.249-3.93-0.643-2.81 1.11-5.61 3.926-6.25 31.9-7.291 59.263-4.15 81.337 9.34 2.46 1.51 3.24 4.72 1.73 7.18zm10.25-22.805c-1.89 3.075-5.91 4.045-8.98 2.155-22.51-13.839-56.823-17.846-83.448-9.764-3.453 1.043-7.1-0.903-8.148-4.35-1.04-3.453 0.907-7.093 4.354-8.143 30.413-9.228 68.222-4.758 94.072 11.127 3.07 1.89 4.04 5.91 2.15 8.976v-0.001zm0.88-23.744c-26.99-16.031-71.52-17.505-97.289-9.684-4.138 1.255-8.514-1.081-9.768-5.219-1.254-4.14 1.08-8.513 5.221-9.771 29.581-8.98 78.756-7.245 109.83 11.202 3.73 2.209 4.95 7.016 2.74 10.733-2.2 3.722-7.02 4.949-10.73 2.739z"}));case"lastfm":return r.createElement("svg",{className:t,viewBox:"0 0 455 455"},r.createElement("rect",{className:"icon-lastfm-inner",x:"5",y:"5",width:"445",height:"445"}),r.createElement("path",{className:"icon-lastfm-outer",fillRule:"evenodd",clipRule:"evenodd",d:"M0,0v455h455V0H0z M309.94,315.01c-62.425,0-84.085-28.145-95.625-63.145 L202.77,215.77c-8.65-26.33-18.75-46.915-50.505-46.915c-22.035,0-44.395,15.88-44.395,60.275c0,34.63,17.695,56.29,42.575,56.29 c28.145,0,46.915-20.94,46.915-20.94l11.565,31.385c0,0-19.495,19.125-60.275,19.125c-50.51,0-78.65-29.57-78.65-84.435 c0-56.99,28.14-90.565,81.19-90.565c47.99,0,72.165,17.325,87.305,64.235L250.41,240.3c8.65,26.35,23.805,45.47,60.25,45.47 c24.555,0,37.52-5.41,37.52-18.77c0-10.45-6.13-18.025-24.53-22.365l-24.53-5.76c-29.94-7.225-41.855-22.735-41.855-47.265 c0-39.335,31.755-51.6,64.215-51.6c36.82,0,59.18,13.34,62.07,45.82l-36.07,4.335c-1.445-15.53-10.82-22.015-28.145-22.015 c-15.88,0-25.625,7.21-25.625,19.475c0,10.84,4.685,17.325,20.565,20.94l23.085,5.055c31.035,7.21,47.64,22.365,47.64,51.585 C385,301.295,354.685,315.01,309.94,315.01z"}));case"listenbrainz":case"musicbrainz":return r.createElement("svg",{className:t,viewBox:"0 0 27 30"},r.createElement("polygon",{className:`icon-${e}-left`,stroke:"none",points:"13 1 1 8 1 22 13 29 13 1"}),r.createElement("polygon",{className:`icon-${e}-right`,stroke:"none",points:"14 1 26 8 26 22 14 29 14 1"}));case"youtube":return r.createElement("svg",{className:t,viewBox:"0 0 576 512",transform:"scale(1.125)"},r.createElement("rect",{className:"icon-youtube-inner",x:"144",y:"128",width:"288",height:"256"}),r.createElement("path",{className:"icon-youtube-outer",d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"}));case"lookup-pending":return r.createElement("svg",{className:`${t} icon-lookup`,viewBox:"0 0 16 16"},r.createElement("circle",{className:"icon-lookup-outer",cx:"8",cy:"8",r:"8",stroke:"none"}),r.createElement("path",{className:"icon-lookup-inner",d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"}));case"lookup-looking":return r.createElement("svg",{className:`${t} icon-lookup`,viewBox:"0 0 100 100"},r.createElement("circle",{className:"icon-lookup-outer",cx:"50",cy:"50",r:"50",stroke:"none"}),r.createElement("path",{className:"icon-lookup-inner",d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"},r.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})));case"lookup-not-found":return r.createElement("svg",{className:`${t} icon-lookup`,viewBox:"0 0 16 16",transform:"rotate(45)"},r.createElement("circle",{className:"icon-lookup-outer",cx:"8",cy:"8",r:"8",stroke:"none"}),r.createElement("path",{className:"icon-lookup-inner",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"}))}}ur.minPageSize=10,ur.maxPageSize=1e3;var fr=n(908);const mr={left:0,top:0},pr=(0,r.forwardRef)((function(e,t){var{title:n,className:i="",children:a,onClose:o}=e,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["title","className","children","onClose"]);const s=(0,r.useRef)(null),[c,u]=(0,r.useState)(mr),[d,f]=(0,r.useState)(null),[m,p]=(0,r.useState)(mr);(0,r.useImperativeHandle)(t,(()=>({close:e=>{s.current.open&&s.current.close(e)}}))),(0,r.useEffect)((()=>{const e=s.current;fr.Z.registerDialog(e),e.showModal()}),[]);const h=(0,r.useCallback)((()=>{s.current.close()}),[]),v=(0,r.useCallback)((()=>{o(s.current.returnValue)}),[o]),g=(0,r.useCallback)((e=>{let t=e.target;for(;t&&"submit"!==t.type;)t=t.parentElement;"#cancel"===(null==t?void 0:t.value)&&(e.preventDefault(),s.current.close())}),[]),b=(0,r.useCallback)((e=>{e.preventDefault(),0===e.button&&f({left:e.screenX,top:e.screenY})}),[]),y=(0,r.useCallback)((e=>{p({left:e.screenX-d.left,top:e.screenY-d.top})}),[d]),w=(0,r.useCallback)((e=>{u({left:c.left+(e.screenX-d.left),top:c.top+(e.screenY-d.top)}),p(mr),f(null)}),[c,d]);return(0,r.useEffect)((()=>{if(d)return document.documentElement.style.cursor="default",document.body.classList.add("dragging"),document.addEventListener("mouseup",w),document.addEventListener("mousemove",y),()=>{document.documentElement.style.cursor="",document.body.classList.remove("dragging"),document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",y)}}),[d,y,w]),r.createElement("dialog",Object.assign({},l,{className:`dialog ${i}`,onClose:v,style:{transform:`translate(${c.left+m.left}px, ${c.top+m.top}px)`},ref:s}),r.createElement("header",{className:"dialog-head",onMouseDown:b},r.createElement("h2",null,n),r.createElement("button",{onClick:h,onMouseDown:T},r.createElement(dr,{name:"close"}))),r.createElement("div",{className:"dialog-body",onClick:g},a))}));function hr(e,t=!1){return n=this,a=void 0,l=function*(){return new Promise(((n,a)=>{const o=document.getElementById("popup"),l=document.getElementById("system"),s=document.createElement("div"),c=(0,i.s)(s);try{const i=e=>{c.unmount(),s.remove(),n(e)};(t?l:o).append(s),c.render(r.createElement(e,{onClose:i}))}catch(e){c.unmount(),s.remove(),a(e)}}))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof o?e:new o((function(t){t(e)}))}(t.value).then(r,i)}s((l=l.apply(n,a||[])).next())}));var n,a,o,l}var vr=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};function gr(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(null),o=(0,r.useRef)(null),l=(0,r.useCallback)((()=>vr(this,void 0,void 0,(function*(){try{const e=i.current.value,r=a.current.value;ar.host=n.current.value.replace(/\/+$/,"");const{device:o,deviceId:l}=ar,s=`MediaBrowser Client="ampcast", Version="0.6.0", Device="${o}", DeviceId="${l}"`,c=yield fetch(`${ar.host}/Users/AuthenticateByName`,{method:"POST",headers:{"Content-Type":"application/json","X-Emby-Authorization":s},body:JSON.stringify({Username:e,Pw:r})});if(!c.ok)throw Error(`${c.status}: ${c.statusText}`);const u=yield c.json(),d=u.User.Id,f=u.AccessToken;t.current.close(JSON.stringify({userId:d,token:f}))}catch(e){console.error(e)}}))),[]),s=(0,r.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),e.repeat||o.current.click())}),[]),c=(0,r.useCallback)((e=>{e.preventDefault(),l()}),[l]);return r.createElement(pr,Object.assign({},e,{className:"jellyfin-login-dialog",title:"Login to Jellyfin",ref:t}),r.createElement("form",{method:"dialog",onKeyDown:s,onSubmit:c},r.createElement("div",{className:"table-layout"},r.createElement("p",null,r.createElement("label",{htmlFor:"jellyfin-host"},"Host:"),r.createElement("input",{type:"url",id:"jellyfin-host",defaultValue:ar.host,placeholder:"https://",ref:n,required:!0})),r.createElement("p",null,r.createElement("label",{htmlFor:"jellyfin-username"},"User:"),r.createElement("input",{type:"text",id:"jellyfin-username",autoFocus:!0,ref:i,required:!0})),r.createElement("p",null,r.createElement("label",{htmlFor:"jellyfin-password"},"Password:"),r.createElement("input",{type:"password",id:"jellyfin-password",ref:a,required:!0}))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",{ref:o},"Login"))))}var br=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::jellyfinAuth");const yr=new l("jellyfinAuth"),wr=new Jt("");function xr(){return""!==wr.getValue()}function kr(){return wr.pipe(Zt()).pipe(Je((e=>""!==e)),Zt())}function Sr(e){ar.token=e,e&&yr.log("Access token successfully obtained."),wr.next(e)}Sr(ar.token);console.log("module::jellyfin");const Er="jellyfin",Cr={view:"details",fields:["Artist","Title","Album","Track","Duration","Genre","PlayCount"]},Pr={view:"details",fields:["Index","Artist","Title","Album","Track","Duration","PlayCount"]},Tr={id:"jellyfin/liked-songs",title:"Liked Songs",icon:"heart",itemType:Wt.Media,layout:Cr,search:()=>$r({Filters:"IsFavorite"})},Ar={id:"jellyfin/liked-albums",title:"Liked Albums",icon:"heart",itemType:Wt.Album,search:()=>$r({Filters:"IsFavorite",IncludeItemTypes:"MusicAlbum"})},zr={id:"jellyfin/recently-played",title:"Recently Played",icon:"clock",itemType:Wt.Media,layout:{view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","LastPlayed"]},search:()=>$r({SortBy:"DatePlayed",SortOrder:"Descending",Filters:"IsPlayed"})},Ir={id:"jellyfin/most-played",title:"Most Played",icon:"most-played",itemType:Wt.Media,layout:Cr,search:()=>$r({SortBy:"PlayCount,DatePlayed",SortOrder:"Descending",Filters:"IsPlayed"})},Nr={id:"jellyfin/playlists",title:"Playlists",icon:"playlists",itemType:Wt.Playlist,layout:{view:"card compact",fields:["Thumbnail","Title","TrackCount"]},secondaryLayout:Pr,search:()=>$r({SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Playlist"})},Mr={id:Er,icon:Er,name:"Jellyfin",url:"https://jellyfin.org/",lookup:function(e,t,n=10,r){return i=this,a=void 0,l=function*(){if(!e||!t)return[];const i={pageSize:n,maxSize:n};return Yt(_r(Wt.Media,t,{Artists:e},i),r)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof o?e:new o((function(t){t(e)}))}(t.value).then(n,r)}s((l=l.apply(i,a||[])).next())}));var i,a,o,l},roots:[Or(Wt.Media,{title:"Songs"}),Or(Wt.Album,{title:"Albums"}),Or(Wt.Artist,{title:"Artists"}),Or(Wt.Playlist,{title:"Playlists",secondaryLayout:Pr})],sources:[Ir,zr,Tr,Ar,Nr],observeIsLoggedIn:kr,isLoggedIn:xr,login:function(){return br(this,void 0,void 0,(function*(){if(!xr())try{const e=yield function(){return vr(this,void 0,void 0,(function*(){return hr(gr,!0)}))}();if(e){const{userId:t,token:n}=JSON.parse(e);ar.userId=t,Sr(n)}}catch(e){yr.log("Could not obtain access token."),yr.error(e)}}))},logout:function(){return br(this,void 0,void 0,(function*(){Sr(""),ar.clear()}))}};function Or(e,t){return Object.assign(Object.assign({},t),{itemType:e,id:String(e),icon:"search",searchable:!0,search:({q:t=""}={})=>_r(e,t)})}function _r(e,t,n,r){if(t){const i=Object.assign(Object.assign({},n),{SearchTerm:t});if(e===Wt.Artist)return new ur("Artists",i,r);switch(e){case Wt.Media:i.IncludeItemTypes="Audio";break;case Wt.Album:i.IncludeItemTypes="MusicAlbum";break;case Wt.Playlist:i.IncludeItemTypes="Playlist"}return $r(i,r)}return new Kt}function $r(e,t){return new ur(`Users/${ar.userId}/Items`,e,t)}const Lr=Mr;var Dr=n(2568),jr=n.n(Dr);const Rr=new f("lastfm"),Fr={get token(){return Rr.getString("token")},set token(e){Rr.setString("token",e)},get userId(){return Rr.getString("userId")},set userId(e){Rr.setString("userId",e)},get sessionKey(){return Rr.getString("sessionKey")},set sessionKey(e){Rr.setString("sessionKey",e)},get firstScrobbledAt(){return Rr.getString("firstScrobbledAt")},set firstScrobbledAt(e){Rr.setString("firstScrobbledAt",e)},get playCount(){return Rr.getNumber("playCount")},set playCount(e){Rr.setNumber("playCount",e)},get removeDuplicates(){return Rr.getBoolean("removeDuplicates")},set removeDuplicates(e){Rr.setBoolean("removeDuplicates",e)},clear(){Rr.clear()}};var Br=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::lastfmAuth");const Vr=new l("lastfmAuth"),Ur=new Jt(""),Hr=new Jt("");function Wr(){return""!==Ur.getValue()}function qr(){return Ur.pipe(Zt()).pipe(Je((e=>""!==e)),Zt())}function Yr(e){const t=Object.keys(e);let n="";return t.sort(),t.forEach((t=>n+=t+e[t])),n+=rn,jr()(n)}Hr.next(Fr.sessionKey),Ur.next(Fr.token);var Kr=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::lastfmApi");const Qr=new l("lastfmApi"),Xr=new class{constructor(){this.host="https://ws.audioscrobbler.com/2.0"}scrobble(e){return Kr(this,void 0,void 0,(function*(){Qr.log("scrobble",{items:e});const t="track.scrobble";if(1===e.length){const n=e[0],r=String(n.playedAt);yield this.post(Object.assign({method:t,timestamp:r},this.getScrobbleParams(n)))}else if(e.length>0){const n={};e.forEach(((e,t)=>{const r=this.getScrobbleParams(e);n[`timestamp[${t}]`]=String(e.playedAt),Object.keys(r).forEach((e=>{n[`${e}[${t}]`]=r[e]}))})),yield this.post(Object.assign({method:t},n))}}))}updateNowPlaying(e){return Kr(this,void 0,void 0,(function*(){Qr.log("updateNowPlaying",{item:e});try{this.canScrobble(e)&&(yield this.post(Object.assign({method:"track.updateNowPlaying"},this.getScrobbleParams(e))))}catch(t){Qr.log('Failed to update "now playing":',{item:e}),Qr.error(t)}}))}getUserInfo(){return Kr(this,void 0,void 0,(function*(){return this.get({method:"user.getInfo",user:Fr.userId})}))}get(e){return Kr(this,void 0,void 0,(function*(){const t=`${this.host}?${new URLSearchParams(Object.assign(Object.assign({},e),{api_key:nn,format:"json"}))}`,n=yield fetch(t,{method:"GET"});if(!n.ok)throw n;return n.json()}))}post(e){return Kr(this,void 0,void 0,(function*(){const t=Fr.token,n=Fr.sessionKey,r=Yr(e=Object.assign(Object.assign({},e),{api_key:nn,token:t,sk:n})),i=`${new URLSearchParams(e)}&api_sig=${r}`;return fetch(this.host,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i})}))}getScrobbleParams(e){const t={};return t.track=e.title,t.artist=e.artists[0],e.album&&(t.album=e.album),e.albumArtist&&(t.albumArtist=e.albumArtist),e.duration&&(t.duration=String(Math.round(e.duration))),e.track&&(t.trackNumber=String(e.track)),e.recording_mbid&&(t.mbid=e.recording_mbid),t}canScrobble(e){var t;return!!e&&!!e.title&&!!(null===(t=e.artists)||void 0===t?void 0:t[0])&&e.duration>30}},Gr=Xr;class Jr{constructor(e,t,n,r){this.album=r,this.defaultConfig={minPageSize:Jr.minPageSize,maxPageSize:Jr.maxPageSize,pageSize:50},this.pageNumber=1,this.playCountName="playcount";const i=Object.assign(Object.assign({},this.defaultConfig),n),{page:a}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["page"]);this.pageNumber=Number(a)||1,this.playCountName=i.playCountName||"playcount",this.pager=new Rn(((e=this.defaultConfig.pageSize)=>{return n=this,r=void 0,a=function*(){const n=this.pageNumber,r=yield Gr.get(Object.assign(Object.assign({},o),{page:n,limit:e}));this.pageNumber++;const{items:i,total:a,atEnd:l,itemType:s}=t(r),c={items:this.createMediaObjects(s,i),total:a,atEnd:l};return console.log({test:c}),c},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function l(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(t.value).then(o,l)}s((a=a.apply(n,r||[])).next())}));var n,r,i,a}),i)}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}createMediaObjects(e,t){switch(e){case Wt.Artist:return t.map((e=>this.createMediaArtist(e)));case Wt.Album:return t.map((e=>this.createMediaAlbum(e)));case Wt.Media:return t.map((e=>this.createMediaItem(e)));case Wt.Playlist:return[]}}createMediaItem(e){var t,n,r,i,a,o;const l=e.date&&Number(e.date.uts)||0,s=null===(t=e["@attr"])||void 0===t?void 0:t.rank;return Object.assign(Object.assign({},this.createMediaObject(Wt.Media,e)),{mediaType:yn.Audio,src:l?`lastfm:listen:${l}`:`lastfm:track:${rr()}`,artists:e.artist?[e.artist.name]:void 0,album:(null===(n=this.album)||void 0===n?void 0:n.name)||(null===(r=e.album)||void 0===r?void 0:r["#text"]),albumArtist:null===(i=this.album)||void 0===i?void 0:i.artist.name,release_mbid:(null===(a=this.album)||void 0===a?void 0:a.mbid)||(null===(o=e.album)||void 0===o?void 0:o.mbid),duration:Number(e.duration)||0,track:s&&Number(s)||void 0,playedAt:l})}createMediaAlbum(e){var t;return Object.assign(Object.assign({},this.createMediaObject(Wt.Album,e)),{src:`lastfm:album:${rr()}`,artist:e.artist.name,year:(null===(t=e.wiki)||void 0===t?void 0:t.published)&&new Date(e.wiki.published).getFullYear()||void 0,pager:this.createAlbumPager(e)})}createMediaArtist(e){return Object.assign(Object.assign({},this.createMediaObject(Wt.Artist,e)),{src:`lastfm:artist:${rr()}`,pager:this.createArtistAlbumsPager(e)})}createArtistTopTracks(e){return{itemType:Wt.Album,title:"Top Tracks",thumbnails:this.createThumbnails(e.image),src:`lastfm:top-tracks:${rr()}`,externalUrl:"",artist:e.name,pager:this.createTopTracksPager(e)}}createMediaObject(e,t){return{itemType:e,title:t.name,rating:"loved"in t?Number(t.loved)||0:void 0,playCount:Number(t[this.playCountName])||void 0,globalPlayCount:"userplaycount"===this.playCountName&&Number(t.playcount)||void 0,thumbnails:this.createThumbnails(t.image),externalUrl:t.url||""}}createThumbnails(e){const t=e?[this.createThumbnail(e[0],34),this.createThumbnail(e[1],64),this.createThumbnail(e[2],174),this.createThumbnail(e[3],300)].filter(y):[];return 0===t.length?void 0:t}createThumbnail(e,t,n=t){if(e){const r=e["#text"];if(r&&!r.endsWith("2a96cbd8b46e442fc41c2b86b821562f.png"))return{url:r,width:t,height:n}}}createArtistAlbumsPager(e){const t=this.createArtistTopTracks(e),n=new Kt([t]),r=new Jr({method:"artist.getTopAlbums",artist:e.name},(({topalbums:e})=>{const t=e["@attr"];return{items:e.album,total:Number(t.total)||void 0,atEnd:t.page===t.totalPages,itemType:Wt.Album}}),{maxSize:100,playCountName:"userplaycount"});return new Nn(n,r)}createAlbumPager(e){return new Jr({method:"album.getInfo",album:e.name,artist:e.artist.name,user:Fr.userId},(({album:e})=>{if(e.tracks){const t=e.tracks.track,n=(t?Array.isArray(t)?t:[t]:[]).map((t=>Object.assign(Object.assign({},t),{album:{"#text":e.name},image:t.image||e.image})));return{items:n,total:n.length,atEnd:!0,itemType:Wt.Media}}throw Error("No track info")}),{playCountName:"userplaycount"},e)}createTopTracksPager(e){return new Jr({method:"artist.getTopTracks",artist:e.name},(({toptracks:e})=>{const t=e["@attr"];return{items:e.track,total:Number(t.total)||void 0,atEnd:t.page===t.totalPages,itemType:Wt.Media}}),{maxSize:20})}}Jr.minPageSize=10,Jr.maxPageSize=200;class Zr extends Jr{constructor(e,t){super(Object.assign(Object.assign({},e),{method:"user.getRecentTracks",extended:"1",user:Fr.userId}),(({recenttracks:e})=>{var t,n;const r=e["@attr"]||{},i=e.track,a=i?Array.isArray(i)?i:[i]:[],o="true"===(null===(n=null===(t=a[0])||void 0===t?void 0:t["@attr"])||void 0===n?void 0:n.nowplaying),l=Number(r.page)||1,s=Number(r.totalPages)||1,c=1===s||l===s,u=Number(r.total)||void 0;return o&&a.shift(),{items:a,total:u,atEnd:c,itemType:Wt.Media}}),t)}}console.log("module::lastfm");const ei={view:"card compact",fields:["Thumbnail","Title","Artist","Year","PlayCount"]},ti={view:"details",fields:["Index","Title","Artist"]},ni={id:"lastfm/history",title:"History",icon:"clock",itemType:Wt.Media,defaultHidden:!0,search:({startAt:e=0}={})=>new Zr(e?{to:e}:void 0)},ri={id:"lastfm/recently-played",title:"Recently Played",icon:"clock",itemType:Wt.Media,search:()=>new Zr},ii={id:"lastfm/loved-tracks",title:"Loved Tracks",icon:"heart",itemType:Wt.Media,layout:{view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear"]},defaultHidden:!0,search:()=>new Jr({method:"user.getLovedTracks",user:Fr.userId},(({lovedtracks:e})=>{const t=e["@attr"]||{},n=e.track,r=n?Array.isArray(n)?n:[n]:[],i=Number(t.page)||1,a=Number(t.totalPages)||1,o=1===a||i===a;return{items:r,total:Number(t.total)||void 0,atEnd:o,itemType:Wt.Media}}))};function ai(e,t){return Object.assign(Object.assign({},t),{id:`lastfm/top/${e.slice(11).toLowerCase()}`,icon:"star",searchable:!1,search:({period:n="overall"}={})=>new Jr({method:e,period:n,user:Fr.userId},(n=>{const[,r]=e.toLowerCase().split("."),i=n[r.slice(3)],a=i["@attr"],o=i[r.slice(6,-1)],l=Number(a.page)||1,s=Number(a.totalPages)||1,c=1===s||l===s;return{items:o,total:Number(a.total)||void 0,atEnd:c,itemType:t.itemType}}))})}const oi={id:"lastfm",name:"last.fm",icon:"lastfm",url:"https://www.last.fm/",scrobbler:!0,roots:[ri],sources:[ai("user.getTopTracks",{title:"Top Tracks",itemType:Wt.Media,layout:{view:"card compact",fields:["Thumbnail","Title","Artist","PlayCount"]}}),ai("user.getTopAlbums",{title:"Top Albums",itemType:Wt.Album,layout:ei,secondaryLayout:ti}),ai("user.getTopArtists",{title:"Top Artists",itemType:Wt.Artist,layout:{view:"card minimal",fields:["Thumbnail","Title","PlayCount"]},secondaryLayout:ei,tertiaryLayout:ti}),ni,ii],observeIsLoggedIn:qr,isLoggedIn:Wr,login:function(){return Br(this,void 0,void 0,(function*(){if(!Wr())try{const e=yield function(){return Br(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{const n=location.hostname,r=("localhost"===n?`http://${n}:${location.port}`:`https://${n}`)+"/auth/lastfm/callback/";let i=null;const a=n=>{if(/(localhost|ampcast)/.test(n.origin)){if(clearInterval(o),window.removeEventListener("message",a,!1),null==i||i.close(),i=null,n.origin!==location.origin)return void t({message:`Origin ${n.origin} does not match ${location.origin}`});e(n.data.token)}};window.addEventListener("message",a,!1),i=window.open(`https://www.last.fm/api/auth?api_key=${nn}&cb=${r}`,"last.fm","popup");const o=setInterval((()=>{(null==i?void 0:i.closed)&&(clearInterval(o),t({message:"access_denied"}))}),500)}))}))}(),t=yield function(e){return Br(this,void 0,void 0,(function*(){const t="auth.getSession",n=Yr({api_key:nn,token:e,method:t}),r=yield fetch(`https://ws.audioscrobbler.com/2.0?method=${t}&api_key=${nn}&token=${e}&api_sig=${n}&format=json`);if(!r.ok)throw r;const{session:i}=yield r.json();return Fr.userId=i.name,Fr.token=e,Fr.sessionKey=i.key,i.key}))}(e);Vr.log("Access token successfully obtained."),Hr.next(t),Ur.next(e)}catch(e){Vr.log("Could not obtain access token."),Vr.error(e)}}))},logout:function(){return Br(this,void 0,void 0,(function*(){Fr.clear(),Hr.next(""),Ur.next("")}))}};function li(e){var{href:t,children:n=t}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["href","children"]);return r.createElement("span",{className:"external-link"},r.createElement("a",Object.assign({},i,{href:t,target:"_blank",rel:"noopener"}),n))}const si=new f("listenbrainz"),ci={get token(){return si.getString("token")},set token(e){si.setString("token",e)},get userId(){return si.getString("userId")},set userId(e){si.setString("userId",e)},get firstScrobbledAt(){return si.getString("firstScrobbledAt")},set firstScrobbledAt(e){si.setString("firstScrobbledAt",e)},clear(){si.clear()}};var ui=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};function di(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(null),o="https://listenbrainz.org/profile/",l=(0,r.useCallback)((()=>ui(this,void 0,void 0,(function*(){try{const e=n.current.value,r=i.current.value;ci.userId=e;const a=yield fetch("https://api.listenbrainz.org/1/validate-token",{headers:{"Content-Type":"application/json",Authorization:`Token ${r}`}});if(!a.ok)throw a;const{valid:o,user_name:l}=yield a.json();if(!o)throw Error("Invalid token.");if(l!==e)throw Error("Token not valid for this user.");t.current.close(JSON.stringify({userId:e,token:r}))}catch(e){console.error(e)}}))),[]),s=(0,r.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),e.repeat||a.current.click())}),[]),c=(0,r.useCallback)((e=>{e.preventDefault(),l()}),[l]);return r.createElement(pr,Object.assign({},e,{className:"listenbrainz-login-dialog",title:"Login to ListenBrainz",ref:t}),r.createElement("form",{method:"dialog",onKeyDown:s,onSubmit:c},r.createElement("div",{className:"table-layout"},r.createElement("p",null,r.createElement("label",{htmlFor:"listenbrainz-username"},"User:"),r.createElement("input",{type:"text",id:"listenbrainz-username",autoFocus:!0,ref:n,required:!0,defaultValue:ci.userId})),r.createElement("p",null,r.createElement("label",{htmlFor:"listenbrainz-token"},"Token:"),r.createElement("input",{type:"password",id:"listenbrainz-token",required:!0,ref:i}))),r.createElement("p",{className:"listenbrainz-link"},r.createElement(li,{href:o},r.createElement(dr,{name:"listenbrainz"}),o)),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",{ref:a},"Login"))))}var fi=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::listenbrainzAuth");const mi=new l("listenbrainzAuth"),pi=new Jt("");function hi(){return""!==pi.getValue()}function vi(){return pi.pipe(Zt()).pipe(Je((e=>""!==e)),Zt())}pi.next(ci.token);var gi=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::listenbrainzApi");const bi=new l("listenbrainzApi"),yi=new class{constructor(){this.host="https://api.listenbrainz.org/1",this.rateLimitRemainingCalls=2,this.rateLimitResetTime=0}getListeningActivity({range:e="all_time"}={}){return gi(this,void 0,void 0,(function*(){const{payload:{listening_activity:t}}=yield this.get(`stats/user/${ci.userId}/listening-activity`,{range:e});return t}))}getListenCount(){return gi(this,void 0,void 0,(function*(){const{payload:{count:e}}=yield this.get(`user/${ci.userId}/listen-count`);return e}))}getListens(e){return gi(this,void 0,void 0,(function*(){return bi.log("getListens",{params:e}),yield this.get(`user/${ci.userId}/listens`,e)}))}scrobble(e){return gi(this,void 0,void 0,(function*(){e.length>0&&(bi.log("scrobble",{items:e}),yield this.post("submit-listens",{listen_type:1===e.length?"single":"import",payload:e.map((e=>({listened_at:e.playedAt,track_metadata:this.getScrobbleParams(e)})))}))}))}updateNowPlaying(e){return gi(this,void 0,void 0,(function*(){bi.log("updateNowPlaying",{item:e});try{this.canScrobble(e)&&(yield this.post("submit-listens",{listen_type:"playing_now",payload:[{track_metadata:this.getScrobbleParams(e)}]}))}catch(t){bi.log('Failed to update "now playing":',{item:e}),bi.error(t)}}))}get(e,t,n){return gi(this,void 0,void 0,(function*(){t&&(e=`${e}?${new URLSearchParams(t)}`);const r=yield this.fetch(e,{method:"GET"},n);if(!r.ok||204===r.status)throw r;return r.json()}))}post(e,t){return gi(this,void 0,void 0,(function*(){const n=JSON.stringify(t);return this.fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:n},!0)}))}fetch(e,t,n=!1){return gi(this,void 0,void 0,(function*(){yield this.applyRateLimiting(),n&&(t.headers=Object.assign(Object.assign({},t.headers),{Authorization:`Token ${ci.token}`})),e.startsWith("/")&&(e=e.slice(1));const r=yield window.fetch(`${this.host}/${e}`,t);if(!r.ok)throw r;const i=r.headers;return i.has("x-ratelimit-remaining")&&(this.rateLimitRemainingCalls=Number(i.get("x-ratelimit-remaining"))||1),i.has("x-ratelimit-reset-in")&&(this.rateLimitResetTime=Date.now()+1e3*(Number(i.get("x-ratelimit-reset-in"))||1)),this.rateLimitRemainingCalls<5&&bi.log({rateLimitRemainingCalls:this.rateLimitRemainingCalls,rateLimitReset:new Date(this.rateLimitResetTime).toISOString()}),r}))}getScrobbleParams(e){const t={media_player:"ampcast",media_player_version:"0.6.0",submission_client:"ampcast"};e.duration&&(t.duration=Math.round(e.duration)),e.track&&(t.tracknumber=e.track),e.artist_mbids&&(t.artist_mbids=e.artist_mbids),e.release_mbid&&(t.release_mbid=e.release_mbid),e.recording_mbid&&(t.recording_mbid=e.recording_mbid),e.isrc&&(t.isrc=e.isrc),e.externalUrl&&(t.origin_url=e.externalUrl);const[n]=e.src.split(":");switch(n){case"spotify":e.externalUrl&&(t.spotify_id=e.externalUrl),t.music_service="spotify.com";break;case"apple":t.music_service="music.apple.com";break;case"youtube":t.music_service="youtube.com";break;case"jellyfin":t.music_service_name="Jellyfin";break;case"plex":t.music_service_name="Plex";break;case"blob":case"file":t.music_service_name="Local file"}const r={track_name:e.title,artist_name:e.artists[0],additional_info:t};return e.album&&(r.release_name=e.album),r}canScrobble(e){var t;return!!e&&!!e.title&&!!(null===(t=e.artists)||void 0===t?void 0:t[0])&&e.duration>30}applyRateLimiting(){return new Promise((e=>{if(this.rateLimitRemainingCalls)this.rateLimitRemainingCalls--,e();else{const t=this.rateLimitResetTime-Date.now();t>0?setTimeout(e,t):e()}}))}},wi=yi;class xi{constructor(e){this.nextPageParams=void 0,this.pager=new Rn(((t=50)=>{return n=this,r=void 0,a=function*(){try{const{payload:n}=yield wi.get(`user/${ci.userId}/listens`,Object.assign(Object.assign(Object.assign({},e),{count:t}),this.nextPageParams)),r=n.listens,i=this.createItems(r),a=i.length<t;return this.nextPageParams=a?void 0:{max_ts:r.at(-1).listened_at-1},{items:i,atEnd:a}}catch(e){if(this.isNoContentError(e))return{items:[],atEnd:!0};throw e}},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function l(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(t.value).then(o,l)}s((a=a.apply(n,r||[])).next())}));var n,r,i,a}),{pageSize:50})}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}createItems(e){return e.map((e=>this.createItem(e)))}createItem(e){var t,n;const r=e.track_metadata,i=r.additional_info,a=(null===(t=r.mbid_mapping)||void 0===t?void 0:t.recording_mbid)||void 0;return{itemType:Wt.Media,mediaType:yn.Audio,src:`listenbrainz:listen:${e.listened_at}`,title:r.track_name,addedAt:e.inserted_at,artists:r.artist_name?[r.artist_name]:void 0,albumArtist:null==i?void 0:i.release_artist_name,album:r.release_name,duration:(null==i?void 0:i.duration)||((null==i?void 0:i.duration_ms)?Math.round(i.duration_ms/1e3):0),track:(null==i?void 0:i.tracknumber)||(null==i?void 0:i.track_number),isrc:null==i?void 0:i.isrc,externalUrl:a?`https://musicbrainz.org/recording/${a}`:"",recording_mbid:a,release_mbid:null===(n=r.mbid_mapping)||void 0===n?void 0:n.release_mbid,playedAt:e.listened_at,link:{src:this.getPlayableSrc(i)||"",externalUrl:(null==i?void 0:i.origin_url)||""}}}getPlayableSrc(e){var t,n,r;if(e){if(e.spotify_id)return this.getSpotifySrc(e.spotify_id);if(null===(t=e.origin_url)||void 0===t?void 0:t.includes("spotify.com"))return this.getSpotifySrc(e.origin_url);if(null===(n=e.origin_url)||void 0===n?void 0:n.includes("apple.com"))return this.getAppleSrc(e.origin_url);const i=(null===(r=e.music_service_name)||void 0===r?void 0:r.toLowerCase())||"",a="jellyfin|spotify|youtube|apple|plex".split("|");for(const e of a)if(i.includes(e))return`${e}:`}}getSpotifySrc(e){if(e){const t=e.split("/").pop();if(t)return`spotify:track:${t}`}}getAppleSrc(e){if(e){const t=e.split("i=").pop();if(t)return`apple:song:${t}`}}isNoContentError(e){return 204===(null==e?void 0:e.status)}}xi.maxPageSize=100;var ki=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::musicbrainzApi");const Si=new class{constructor(){this.host="https://musicbrainz.org/ws/2",this.lastCall=0}getISRCs(e){return ki(this,void 0,void 0,(function*(){return(yield this.get(`/recording/${e}`,{inc:"isrcs"})).isrcs||[]}))}getRecordingsByISRC(e){return ki(this,void 0,void 0,(function*(){return(yield this.get(`/isrc/${e}`)).recordings||[]}))}get(e,t={}){return ki(this,void 0,void 0,(function*(){e.startsWith("/")&&(e=e.slice(1)),t.fmt="json",e=`${e}?${new URLSearchParams(t)}`,yield this.applyRateLimiting(),this.lastCall=Date.now();const n=yield fetch(`${this.host}/${e}`,{method:"GET",headers:{"User-Agent":"ampcast/0.6.0 ( rekky.rosso@gmail.com )"}});if(!n.ok)throw n;return yield n.json()}))}applyRateLimiting(){return new Promise((e=>{const t=Date.now()-this.lastCall;t>1e3?e():setTimeout((()=>e),t)}))}};class Ei{constructor(e,t){this.release_mbid=e,this.pager=new Rn((()=>{return n=this,r=void 0,a=function*(){var n;const{media:r=[]}=yield Si.get(`release/${e}`,{inc:"recordings"});return{items:this.createItems((null===(n=r[0])||void 0===n?void 0:n.tracks)||[],t),atEnd:!0}},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function l(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(t.value).then(o,l)}s((a=a.apply(n,r||[])).next())}));var n,r,i,a}))}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}createItems(e,t){return e.map((e=>this.createItem(e,t)))}createItem(e,t){const n=e.recording,r=n.id||void 0;return{itemType:Wt.Media,mediaType:yn.Audio,src:`musicbrainz:track:${r||rr()}`,title:e.title,artists:(null==t?void 0:t.artist)?[t.artist]:void 0,albumArtist:null==t?void 0:t.artist,album:null==t?void 0:t.title,duration:e.length/1e3||0,track:e.number?Number(e.number):void 0,recording_mbid:r,release_mbid:this.release_mbid,year:(null==t?void 0:t.year)||new Date(n["first-release-date"]).getUTCFullYear()||void 0,playedAt:0,externalUrl:r?`https://musicbrainz.org/recording/${r}`:""}}}const Ci="https://musicbrainz.org";class Pi{constructor(e,t){let n=0;this.pager=new Rn(((r=50)=>{return i=this,a=void 0,l=function*(){try{const i=yield wi.get(e,Object.assign(Object.assign({},t),{offset:n,count:r}));return n+=r,this.createPage(i)}catch(e){if(this.isNoContentError(e))return{items:[],atEnd:!0};throw e}},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof o?e:new o((function(t){t(e)}))}(t.value).then(n,r)}s((l=l.apply(i,a||[])).next())}));var i,a,o,l}),{pageSize:50})}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}createPage(e){if(this.isRecordingsResponse(e)){const t=e.payload,n=t.recordings.map((e=>this.createMediaItem(e))),r=t.total_recording_count;return{items:n,total:r,atEnd:t.offset+n.length>=r}}if(this.isReleasesResponse(e)){const t=e.payload,n=t.releases.map((e=>this.createMediaAlbum(e))),r=t.total_release_count;return{items:n,total:r,atEnd:t.offset+n.length>=r}}if(this.isArtistsResponse(e)){const t=e.payload,n=t.artists.map((e=>this.createMediaArtist(e))),r=t.total_artist_count;return{items:n,total:r,atEnd:t.offset+n.length>=r}}throw Error("Unknown response.")}createMediaArtist(e){var t;const n=(null===(t=e.artist_mbids)||void 0===t?void 0:t[0])||void 0;return{itemType:Wt.Artist,src:`listenbrainz:artist:${rr()}`,externalUrl:n?`${Ci}/artist/${n}`:"",title:e.artist_name,artist_mbid:n,playCount:e.listen_count,pager:new Kt}}createMediaAlbum(e){const t=e.release_mbid||void 0,n={itemType:Wt.Album,src:`listenbrainz:album:${rr()}`,externalUrl:t?`${Ci}/release/${t}`:"",title:e.release_name,artist:e.artist_name,release_mbid:t,artist_mbids:e.artist_mbids,playCount:e.listen_count};return Object.assign(Object.assign({},n),{pager:t?new Ei(t,n):new Kt})}createMediaItem(e){const t=e.recording_mbid||void 0;return{itemType:Wt.Media,mediaType:yn.Audio,src:`listenbrainz:track:${rr()}`,externalUrl:t?`${Ci}/recording/${t}`:"",title:e.track_name,artists:e.artist_name?[e.artist_name]:void 0,album:e.release_name,duration:0,recording_mbid:t,release_mbid:e.release_mbid||void 0,artist_mbids:e.artist_mbids,playCount:e.listen_count,playedAt:0}}isRecordingsResponse(e){return"total_recording_count"in e.payload}isReleasesResponse(e){return"total_release_count"in e.payload}isArtistsResponse(e){return"total_artist_count"in e.payload}isNoContentError(e){return 204===(null==e?void 0:e.status)}}console.log("module::listenbrainz");const Ti={id:"listenbrainz/history",title:"History",icon:"clock",itemType:Wt.Media,defaultHidden:!0,search:({startAt:e=0}={})=>new xi(e?{max_ts:e}:void 0)},Ai={id:"listenbrainz/recently-played",title:"Recently Played",icon:"clock",itemType:Wt.Media,search:()=>new xi},zi={id:"listenbrainz/top/tracks",title:"Top Tracks",icon:"star",itemType:Wt.Media,layout:{view:"card compact",fields:["Thumbnail","Title","Artist","PlayCount"]},search:e=>new Pi(`stats/user/${ci.userId}/recordings`,e)},Ii={id:"listenbrainz/top/albums",title:"Top Albums",icon:"star",itemType:Wt.Album,layout:{view:"card compact",fields:["Thumbnail","Title","Artist","Year","PlayCount"]},search:e=>new Pi(`stats/user/${ci.userId}/releases`,e)},Ni={id:"listenbrainz/top/artists",title:"Top Artists",icon:"star",itemType:Wt.Artist,layout:{view:"card minimal",fields:["Thumbnail","Title","PlayCount"]},defaultHidden:!0,search:e=>new Pi(`stats/user/${ci.userId}/artists`,e)},Mi={id:"listenbrainz",name:"ListenBrainz",icon:"listenbrainz",url:"https://listenbrainz.org/",scrobbler:!0,roots:[Ai],sources:[zi,Ii,Ni,Ti],observeIsLoggedIn:vi,isLoggedIn:hi,login:function(){return fi(this,void 0,void 0,(function*(){if(!hi())try{const e=yield function(){return ui(this,void 0,void 0,(function*(){return hr(di,!0)}))}();if(e){const{userId:t,token:n}=JSON.parse(e);ci.userId=t,ci.token=n,mi.log("Access token successfully obtained."),pi.next(n)}}catch(e){mi.log("Could not obtain access token."),mi.error(e)}}))},logout:function(){return fi(this,void 0,void 0,(function*(){pi.next(""),ci.clear()}))}},Oi=new f("plex"),_i={get clientId(){let e=Oi.getString("clientId");return e||(e=rr(),Oi.setString("clientId",e)),e},get connection(){return Oi.getJson("connection")},set connection(e){Oi.setJson("connection",e)},get host(){var e;return(null===(e=this.connection)||void 0===e?void 0:e.uri)||""},get libraryId(){return Oi.getString("libraryId")},set libraryId(e){Oi.setString("libraryId",e)},get server(){return Oi.getJson("server")},set server(e){Oi.setJson("server",e)},get serverToken(){var e;return(null===(e=this.server)||void 0===e?void 0:e.accessToken)||""},get userToken(){return Oi.getString("userToken")},set userToken(e){Oi.setString("userToken",e)},get userId(){return Oi.getString("userId")},set userId(e){Oi.setString("userId",e)},clear(){const e=this.clientId;Oi.clear(),e&&Oi.setString("clientId",e)}};var $i=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};function Li({host:e=_i.host,path:t,method:n="GET",params:r,headers:i,body:a,token:o,keepalive:l}){return $i(this,void 0,void 0,(function*(){if(!e)throw Error("No Plex connection.");(t=r?`${t}?${new URLSearchParams(r)}`:t).startsWith("/")||(t=`/${t}`),o||(o=e===_i.host?_i.serverToken:_i.userToken);const s=yield window.fetch(`${e}${t}`,{method:n,headers:Object.assign(Object.assign({},i),Di(o)),body:a,keepalive:l});if(!s.ok)throw Error(s.statusText);return s}))}function Di(e){const t={"X-Plex-Product":"ampcast","X-Plex-Version":"0.6.0","X-Plex-Platform":b.displayName,"X-Plex-Platform-Version":b.version,"X-Plex-Device":b.os,"X-Plex-Device-Name":b.displayName,"X-Plex-Client-Identifier":_i.clientId,"X-Plex-Model":"hosted","Accept-Encoding":"gzip, deflate, br"};return e&&(t["X-Plex-Token"]=e),t}console.log("module::plexApi");const ji={fetch:Li,fetchJSON:function(e){var{headers:t,body:n}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["headers","body"]);return $i(this,void 0,void 0,(function*(){return t=Object.assign(Object.assign({},t),{Accept:"application/json"}),n&&(t=Object.assign(Object.assign({},t),{"Content-Type":"application/json"}),n=JSON.stringify(n)),(yield Li(Object.assign({headers:t,body:n},r))).json()}))},getPlayableUrlFromSrc:function(e){const{host:t,serverToken:n}=_i;if(t&&n){const[,,r]=e.split(":");return`${t}${r}?X-Plex-Token=${n}`}throw Error("Not logged in.")}},Ri=ji;var Fi=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::plexAuth");const Bi=new l("plexAuth"),Vi="https://plex.tv/api/v2",Ui=new Jt(""),Hi=new Jt(!1);let Wi;function qi(){return""!==Ui.getValue()}function Yi(){return Ui.pipe(Zt()).pipe(Je((e=>""!==e)),Zt())}function Ki(e){_i.userToken=e,e&&Bi.log("Access token successfully obtained."),Ui.next(e)}Ki(_i.userToken),Yi().pipe(xt((e=>e)),zn((()=>Fi(void 0,void 0,void 0,(function*(){const e=function(e,t){return Fi(this,void 0,void 0,(function*(){try{return yield Ri.fetch({host:e.uri,path:"/",method:"HEAD",token:t}),e}catch(e){return null}}))},t=_i.connection;if(t){if(yield e(t,_i.serverToken))return Bi.log(`Using existing ${t.local?"local":"public"} connection.`),void Hi.next(!0);_i.server=null,_i.connection=null}Bi.log("Searching for a connection...");try{const t=(yield function(){return Fi(this,void 0,void 0,(function*(){return Ri.fetchJSON({host:Vi,path:"/resources",params:{includeHttps:"1"}})}))}()).filter((e=>"server"===e.provides));for(const n of t){const t=yield Promise.all([...n.connections.map((t=>e(t,n.accessToken)))]),r=t.filter(y);if(r.length){const e=r.find((e=>e.local))||r[0];return _i.server=n,_i.connection=e,Bi.log(`Using ${e.local?"local":"public"} connection.`),void Hi.next(!0)}}Bi.log("Could not establish a connection.")}catch(e){Bi.log(e),Ki("")}}))))).subscribe(Bi),Hi.pipe(xt((e=>e)),zn((()=>Fi(void 0,void 0,void 0,(function*(){Bi.log("Connected");const{MediaContainer:{Directory:e}}=yield Ri.fetchJSON({path:"/library/sections"}),t=e.find((e=>"artist"===e.type));_i.libraryId=(null==t?void 0:t.key)||""}))))).subscribe(Bi);class Qi{constructor(e,t,n){var r;this.path=e,this.params=t,this.pageSize=(null==n?void 0:n.pageSize)||(null===(r=_i.connection)||void 0===r?void 0:r.local)?Qi.maxPageSize:100,this.pager=new nr((e=>this.fetch(e)),Object.assign({pageSize:this.pageSize},n))}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}fetch(e){return t=this,n=void 0,i=function*(){const t=yield Ri.fetchJSON({path:this.path,params:this.params,headers:{"X-Plex-Container-Size":String(this.pageSize),"X-Plex-Container-Start":String((e-1)*this.pageSize)}}),{MediaContainer:{Metadata:n=[],totalSize:r}}=t;return{items:n.map((e=>this.createItem(e))),total:r}},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}createItem(e){switch(e.type){case"clip":return this.createMediaItemFromVideo(e);case"album":return this.createMediaAlbum(e);case"artist":return this.createMediaArtist(e);case"playlist":return this.createMediaPlaylist(e);default:return this.createMediaItemFromTrack(e)}}createMediaItemFromTrack(e){const[t]=e.Media,[n]=t.Part,r="[Unknown Album]"===e.parentTitle?"":e.parentTitle||"";return{itemType:Wt.Media,mediaType:yn.Audio,src:`plex:audio:${n.key}`,externalUrl:"",title:e.title,addedAt:e.addedAt,artists:e.originalTitle?[e.originalTitle]:e.grandparentTitle?[e.grandparentTitle]:void 0,albumArtist:r&&!e.originalTitle?e.grandparentTitle:void 0,album:r,duration:e.duration/1e3,track:r?e.index:void 0,rating:e.userRating,year:e.parentYear,playedAt:e.lastViewedAt||0,playCount:e.viewCount,plex:{ratingKey:e.ratingKey},thumbnails:this.createThumbnails(e.thumb)}}createMediaAlbum(e){var t;return{itemType:Wt.Album,src:`plex:album:${e.ratingKey}`,externalUrl:"",title:e.title||"",addedAt:e.addedAt,artist:e.parentTitle,rating:e.userRating,year:e.year,playedAt:e.lastViewedAt,playCount:e.viewCount,genres:null===(t=e.Genre)||void 0===t?void 0:t.map((e=>e.tag)),plex:{ratingKey:e.ratingKey},pager:this.createPager(e.key),thumbnails:this.createThumbnails(e.thumb)}}createMediaArtist(e){var t;return{itemType:Wt.Artist,src:`plex:album:${e.ratingKey}`,externalUrl:"",title:e.title,addedAt:e.addedAt,rating:e.userRating,genres:null===(t=e.Genre)||void 0===t?void 0:t.map((e=>e.tag)),plex:{ratingKey:e.ratingKey},pager:this.createPager(e.key),thumbnails:this.createThumbnails(e.thumb)}}createMediaItemFromVideo(e){const[t]=e.Media,[n]=t.Part;return{itemType:Wt.Media,mediaType:yn.Video,src:`plex:video:${n.key}`,externalUrl:"",title:e.title||"Video",addedAt:e.addedAt,artists:e.grandparentTitle?[e.grandparentTitle]:void 0,duration:e.duration/1e3,playedAt:e.lastViewedAt||0,playCount:e.viewCount,plex:{ratingKey:e.ratingKey},thumbnails:this.createThumbnails(e.thumb)}}createMediaPlaylist(e){return{itemType:Wt.Playlist,src:`plex:playlist:${e.key}`,externalUrl:"",title:e.title,description:e.summary,addedAt:e.addedAt,duration:e.duration/1e3,playedAt:e.lastViewedAt,playCount:e.viewCount,trackCount:e.leafCount,plex:{ratingKey:e.ratingKey},pager:this.createPager(e.key),thumbnails:this.createThumbnails(e.composite)}}createThumbnails(e){return e?[this.createThumbnail(e,60),this.createThumbnail(e,120),this.createThumbnail(e,240),this.createThumbnail(e,480)]:void 0}createThumbnail(e,t,n=t){return{url:`${_i.host}/photo/:/transcode?url=${encodeURIComponent(e)}&width=${t}&height=${n}&minSize=1&upscale=1&X-Plex-Token={plex-token}`,width:t,height:n}}createPager(e,t){return new Qi(e,t)}}Qi.minPageSize=10,Qi.maxPageSize=1e3;var Xi=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::plex");const Gi={view:"details",fields:["Artist","Title","Album","Track","Duration","PlayCount"]},Ji={view:"details",fields:["Index","Artist","Title","Album","Track","Duration","PlayCount"]},Zi={id:"plex/video",title:"Music Video",icon:"video",itemType:Wt.Media,searchable:!0,layout:Gi,search:({q:e=""}={})=>new Qi(`/library/sections/${_i.libraryId}/extras/all`,{title:e,type:"8",extraType:"4"})},ea={id:"plex/recently-played",title:"Recently Played",icon:"clock",itemType:Wt.Media,layout:{view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","LastPlayed"]},search:()=>new Qi(`/library/sections/${_i.libraryId}/all`,{type:"10","lastViewedAt>":"0",sort:"lastViewedAt:desc"})},ta={id:"plex/most-played",title:"Most Played",icon:"most-played",itemType:Wt.Media,layout:Gi,search:()=>new Qi(`/library/sections/${_i.libraryId}/all`,{type:"10","viewCount>":"1",sort:"viewCount:desc,lastViewedAt:desc"})},na={id:"plex/top-rated",title:"Top Rated",icon:"star",itemType:Wt.Media,layout:Gi,search:()=>new Qi(`/library/sections/${_i.libraryId}/all`,{type:"10","track.userRating>":"1",sort:"track.userRating:desc,viewCount:desc,lastViewedAt:desc"})},ra={id:"plex/playlists",title:"Playlists",icon:"playlists",itemType:Wt.Playlist,secondaryLayout:Ji,search:()=>new Qi("/playlists/all",{type:"15",playlistType:"audio"})},ia={id:"plex",name:"Plex",icon:"plex",url:"https://www.plex.tv/",lookup:function(e,t,n=10,r){return Xi(this,void 0,void 0,(function*(){if(!e||!t)return[];const i={pageSize:n,maxSize:n},a=e=>Xi(this,void 0,void 0,(function*(){return Yt(oa(Wt.Media,t,e,i),r)}));return k((yield Promise.all([a({"artist.title":e}),a({originalTitle:e})])).flat(),"src")}))},roots:[aa(Wt.Media,{title:"Songs",layout:Gi}),aa(Wt.Album,{title:"Albums"}),aa(Wt.Artist,{title:"Artists"}),aa(Wt.Playlist,{title:"Playlists",secondaryLayout:Ji})],sources:[Zi,ta,ea,na,ra],observeIsLoggedIn:Yi,isLoggedIn:qi,login:function(){return Fi(this,void 0,void 0,(function*(){if(!qi())try{const{id:e,authToken:t}=yield function(){return Fi(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{const n=location.hostname,r=("localhost"===n?`http://${n}:${location.port}`:`https://${n}`)+"/auth/plex/callback/";let i=null;const a=n=>{if(/(localhost|ampcast)/.test(n.origin)){if(clearInterval(l),window.removeEventListener("message",a,!1),null==i||i.close(),i=null,n.origin!==location.origin)return void t({message:`Origin ${n.origin} does not match ${location.origin}`});let r=10;const o=()=>Fi(this,void 0,void 0,(function*(){r--;try{const{authToken:n,id:i}=yield Ri.fetchJSON({host:Vi,path:`/pins/${Wi.id}`});n?e({id:i,authToken:n}):r?setTimeout(o,200):t("Timeout.")}catch(e){t(e)}}));o()}};window.addEventListener("message",a,!1);const o=`clientID=${_i.clientId}&code=${Wi.code}&forwardUrl=${encodeURIComponent(r)}&context%5Bdevice%5D%5Bproduct%5D=ampcast`;i=window.open(`https://app.plex.tv/auth#?${o}`,"Plex","popup");const l=setInterval((()=>{(null==i?void 0:i.closed)&&(clearInterval(l),t({message:"access_denied"}))}),500)}))}))}();_i.userId=e,Ki(t)}catch(e){Bi.log("Could not obtain access token."),Bi.error(e)}}))},logout:function(){return Fi(this,void 0,void 0,(function*(){Hi.next(!1),Ki(""),_i.clear()}))}};function aa(e,t){return Object.assign(Object.assign({},t),{itemType:e,id:String(e),icon:"search",searchable:!0,search:({q:t=""}={})=>oa(e,t)})}function oa(e,t,n,r){if(t){const i=e===Wt.Playlist?"/playlists/all":`/library/sections/${_i.libraryId}/all`,a=Object.assign(Object.assign({},n),{title:t});switch(e){case Wt.Media:a.type="10";break;case Wt.Album:a.type="9";break;case Wt.Artist:a.type="8";break;case Wt.Playlist:a.playlistType="audio",a.type="15"}return new Qi(i,a,r)}return new Kt}const la=ia;function sa(e){return Qe((function(t,n){var r=!1,i=0;t.subscribe(Xe(n,(function(t){return(r||(r=!e(t,i++)))&&n.next(t)})))}))}var ca=n(5754),ua=n.n(ca),da=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::spotifyAuth");const fa=new l("spotifyAuth"),ma=new f("spotify/auth"),pa=location.hostname,ha=("localhost"===pa?`http://${pa}:${location.port}`:`https://${pa}`)+"/auth/spotify/callback/",va="https://accounts.spotify.com";let ga;const ba=new Jt("");function ya(){return ba.pipe(Zt())}function wa(){return""!==ba.getValue()}function xa(){return da(this,void 0,void 0,(function*(){const e=Sa(),t=null==e?void 0:e.refresh_token;if(t){const e=yield fetch(`${va}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({client_id:an,grant_type:"refresh_token",refresh_token:t})});if(!e.ok)throw Ca(),e;const n=yield e.json();return ka(n),n.access_token}throw Ca(),Error("No 'refresh_token'")}))}function ka(e){const{access_token:t,refresh_token:n,expires_in:r}=e,i=new Date,a=new Date(i.setSeconds(i.getSeconds()+r)).toISOString();ma.setJson("token",{access_token:t,refresh_token:n,expires_at:a}),Ea(t)}function Sa(){const e=ma.getJson("token");return e&&(e.expires_at=new Date(e.expires_at)),e}function Ea(e){fa.log("Access token successfully obtained."),ba.next(e)}function Ca(){ma.removeItem("token"),ba.next("")}function Pa(){return da(this,void 0,void 0,(function*(){const e=function(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let e=0;e<64;e++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}();ma.setString("code_verifier",e),ga=yield function(e){return da(this,void 0,void 0,(function*(){const t=yield crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}))}(e)}))}!function(){da(this,void 0,void 0,(function*(){try{const e=Sa();if(e)return void(e.expires_at.getTime()-Date.now()<=0?yield xa():Ea(e.access_token))}catch(e){fa.error(e)}yield Pa()}))}();var Ta=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};class Aa{constructor(e,t){this.defaultConfig={minPageSize:Aa.minPageSize,maxPageSize:Aa.maxPageSize,pageSize:Aa.maxPageSize},this.pageNumber=1;const n=Object.assign(Object.assign({},this.defaultConfig),t);this.pager=new Rn(((t=this.defaultConfig.pageSize)=>Ta(this,void 0,void 0,(function*(){const n=(this.pageNumber-1)*t,r=()=>Ta(this,void 0,void 0,(function*(){const{items:r,total:i,next:a}=yield e(n,t);return this.pageNumber++,{items:r.map((e=>this.createMediaObject(e))),total:i,atEnd:!a}}));try{return yield r()}catch(e){if(401===e.status)return yield xa(),yield r();throw e}}))),n)}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}createMediaObject(e){switch(e.type){case"episode":return this.createMediaItemFromEpisode(e);case"artist":return this.createMediaArtist(e);case"album":return this.createMediaAlbum(e);case"playlist":return this.createMediaPlaylist(e);case"track":return this.createMediaItemFromTrack(e)}}createMediaItemFromEpisode(e){return{itemType:Wt.Media,mediaType:yn.Audio,src:e.uri,externalUrl:e.external_urls.spotify,title:e.name,duration:e.duration_ms/1e3,thumbnails:e.images,unplayable:!1===e.is_playable,playedAt:e.played_at?Math.floor((new Date(e.played_at).getTime()||0)/1e3):0}}createMediaAlbum(e){var t;return{itemType:Wt.Album,src:e.uri,externalUrl:e.external_urls.spotify,title:e.name,artist:e.artists.map((e=>e.name)).join(", "),year:new Date(e.release_date).getFullYear(),thumbnails:e.images,trackCount:null===(t=e.tracks)||void 0===t?void 0:t.total,pager:this.createAlbumPager(e)}}createMediaArtist(e){return{itemType:Wt.Artist,src:e.uri,externalUrl:e.external_urls.spotify,title:e.name,genres:e.genres,thumbnails:e.images,pager:this.createArtistAlbumsPager(e)}}createArtistTopTracks(e){return{itemType:Wt.Album,src:`spotify:top-tracks:${e.id}`,externalUrl:"",title:"Top Tracks",artist:e.name,thumbnails:e.images,pager:this.createTopTracksPager(e)}}createMediaPlaylist(e){return{itemType:Wt.Playlist,src:e.uri,externalUrl:e.external_urls.spotify,title:e.name,description:e.description||void 0,thumbnails:e.images,trackCount:e.tracks.total,pager:this.createPlaylistPager(e),owner:{name:e.owner.display_name||"",url:e.owner.external_urls.spotify}}}createMediaItemFromTrack(e){var t,n,r,i,a;const o=/album|compilation/i.test((null===(t=e.album)||void 0===t?void 0:t.album_type)||"")?e.album:void 0;return{itemType:Wt.Media,mediaType:yn.Audio,src:e.uri,externalUrl:e.external_urls.spotify,title:e.name,artists:null===(n=e.artists)||void 0===n?void 0:n.map((e=>e.name)),albumArtist:null==o?void 0:o.artists.map((e=>e.name)).join(", "),album:null==o?void 0:o.name,duration:e.duration_ms/1e3,playedAt:e.played_at?Math.floor((new Date(e.played_at).getTime()||0)/1e3):0,genres:null===(r=e.album)||void 0===r?void 0:r.genres,track:o?e.track_number:void 0,year:e.album&&new Date(e.album.release_date).getUTCFullYear()||void 0,isrc:null===(i=e.external_ids)||void 0===i?void 0:i.isrc,thumbnails:null===(a=e.album)||void 0===a?void 0:a.images,unplayable:!1===e.is_playable}}createArtistAlbumsPager(e){const t=this.getMarket(),n=this.createArtistTopTracks(e),r=new Kt([n]),i=new Aa(((n,r)=>Ta(this,void 0,void 0,(function*(){const{items:i,total:a,next:o}=yield Na.getArtistAlbums(e.id,{offset:n,limit:r,market:t,include_groups:"album,compilation,single"});return{items:i,total:a,next:o}}))));return new Nn(r,i)}createTopTracksPager(e){const t=this.getMarket();return new Aa(((n,r)=>Ta(this,void 0,void 0,(function*(){const{tracks:i}=yield Na.getArtistTopTracks(e.id,t,{offset:n,limit:r,market:t});return{items:i,next:""}}))))}createAlbumPager(e){var t,n;const r=null===(t=e.tracks)||void 0===t?void 0:t.items;if(r&&r.length===e.total_tracks){const t=null===(n=e.tracks)||void 0===n?void 0:n.items;return new Kt(t.map((t=>this.createMediaItemFromTrack(Object.assign(Object.assign({},t),{album:e})))))}{const t=this.getMarket();return new Aa(((n,r)=>Ta(this,void 0,void 0,(function*(){const{items:i,total:a,next:o}=yield Na.getAlbumTracks(e.id,{offset:n,limit:r,market:t});return{items:i.map((t=>Object.assign(Object.assign({},t),{album:e}))),total:a,next:o}}))))}}createPlaylistPager(e){const t=this.getMarket();return new Aa(((n,r)=>Ta(this,void 0,void 0,(function*(){const{items:i,total:a,next:o}=yield Na.getPlaylistTracks(e.id,{offset:n,limit:r,market:t});return{items:i.map((e=>e.track)),total:a,next:o}}))))}getMarket(){return ma.getString("market")}}Aa.minPageSize=10,Aa.maxPageSize=50;var za=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::spotify");const Ia=new l("spotify"),Na=new(ua()),Ma={view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","Duration"]},Oa={view:"details",fields:["Index","Artist","Title","Album","Track","Duration"]},_a={view:"card compact",fields:["Thumbnail","Title","Genre"]},$a={id:"spotify/recently-played",title:"Recently Played",icon:"clock",itemType:Wt.Media,defaultHidden:!0,layout:{view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","LastPlayed"]},search(){return new Aa(((e,t)=>za(this,void 0,void 0,(function*(){const{items:e,total:n}=yield Na.getMyRecentlyPlayedTracks({limit:t});return{items:e.map((e=>Object.assign({played_at:e.played_at},e.track))),total:n,next:void 0}}))),{maxSize:50,pageSize:50})}},La={id:"spotify/top-tracks",title:"Top Tracks",icon:"star",itemType:Wt.Media,layout:Ma,search(){return new Aa(((e,t)=>za(this,void 0,void 0,(function*(){return Na.getMyTopTracks({offset:e,limit:t})}))))}},Da={id:"spotify/top-artists",title:"Top Artists",icon:"star",itemType:Wt.Artist,layout:_a,defaultHidden:!0,search(){return new Aa(((e,t)=>za(this,void 0,void 0,(function*(){return Na.getMyTopArtists({offset:e,limit:t})}))))}},ja={id:"spotify/liked-songs",title:"Liked Songs",icon:"heart",itemType:Wt.Media,layout:Ma,search(){const e=qa();return new Aa(((t,n)=>za(this,void 0,void 0,(function*(){const{items:r,total:i,next:a}=yield Na.getMySavedTracks({offset:t,limit:n,market:e});return{items:r.map((e=>e.track)),total:i,next:a}}))))}},Ra={id:"spotify/liked-albums",title:"Liked Albums",icon:"heart",itemType:Wt.Album,search(){const e=qa();return new Aa(((t,n)=>za(this,void 0,void 0,(function*(){const{items:r,total:i,next:a}=yield Na.getMySavedAlbums({offset:t,limit:n,market:e});return{items:r.map((e=>e.album)),total:i,next:a}}))),{calculatePageSize:!0})}},Fa={id:"spotify/playlists",title:"Playlists",icon:"playlists",itemType:Wt.Playlist,secondaryLayout:Oa,search(){const e=qa();return new Aa(((t,n)=>za(this,void 0,void 0,(function*(){const{items:r,total:i,next:a}=yield Na.getUserPlaylists(void 0,{offset:t,limit:n,market:e});return{items:r,total:i,next:a}}))))}},Ba={id:"spotify/featured-playlists",title:"Featured Playlists",icon:"playlists",itemType:Wt.Playlist,defaultHidden:!0,secondaryLayout:Oa,search(){const e=qa();return new Aa(((t,n)=>za(this,void 0,void 0,(function*(){const{playlists:{items:r,total:i,next:a}}=yield Na.getFeaturedPlaylists({offset:t,limit:n,market:e});return{items:r,total:i,next:a}}))))}},Va={id:"spotify",name:"Spotify",icon:"spotify",url:"https://www.spotify.com/",lookup:function(e,t,n=10,r){return za(this,void 0,void 0,(function*(){if(!e||!t)return[];const i=e=>e.replace(/['"]/g," "),a={pageSize:n,maxSize:n};return Yt(Wa(Wt.Media,`${i(e)} ${i(t)}`,a),r)}))},roots:[Ha(Wt.Media,{title:"Songs",layout:Ma}),Ha(Wt.Album,{title:"Albums"}),Ha(Wt.Artist,{title:"Artists",layout:_a}),Ha(Wt.Playlist,{title:"Playlists",secondaryLayout:Oa})],sources:[$a,La,Da,ja,Ra,Fa,Ba],observeIsLoggedIn:function(){return ya().pipe(Je((e=>""!==e)),Zt())},isLoggedIn:wa,login:function(){return da(this,void 0,void 0,(function*(){if(!wa())try{ka(yield function(){return da(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let n=null;const r=i=>{if(/(localhost|ampcast)/.test(i.origin)){if(clearInterval(a),window.removeEventListener("message",r,!1),null==n||n.close(),n=null,i.origin!==location.origin)return void t({message:`Origin ${i.origin} does not match ${location.origin}`});(function(e){return da(this,void 0,void 0,(function*(){const t=ma.getString("code_verifier"),n=yield fetch(`${va}/api/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({client_id:an,grant_type:"authorization_code",code:e,redirect_uri:ha,code_verifier:t})});if(!n.ok)throw n;return yield n.json()}))})(i.data.code).then(e,t)}};window.addEventListener("message",r,!1);const i=new URLSearchParams({client_id:an,scope:["user-read-recently-played","user-read-playback-position","user-top-read","user-read-playback-state","user-modify-playback-state","user-read-currently-playing","streaming","user-read-email","user-read-private","playlist-read-private","user-library-read"].join(" "),redirect_uri:ha,response_type:"code",code_challenge_method:"S256",code_challenge:ga});n=window.open(`${va}/authorize?${i}`,"Spotify","popup");const a=setInterval((()=>{(null==n?void 0:n.closed)&&(clearInterval(a),t({message:"access_denied"}))}),500)}))}))}())}catch(e){fa.log("Could not obtain access token."),fa.error(e)}}))},logout:function(){return da(this,void 0,void 0,(function*(){Ca(),yield Pa()}))}},Ua=Va;function Ha(e,t){return Object.assign(Object.assign({},t),{itemType:e,id:String(e),icon:"search",searchable:!0,search:({q:t=""}={})=>Wa(e,t)})}function Wa(e,t,n){return t?new Aa(function(e,t){const n=qa();switch(e){case Wt.Media:return(e,r)=>za(this,void 0,void 0,(function*(){const{tracks:{items:i,total:a,next:o}}=yield Na.searchTracks(t,{offset:e,limit:r,market:n});return{items:i,total:a,next:o}}));case Wt.Album:return(e,r)=>za(this,void 0,void 0,(function*(){const{albums:{items:i,total:a,next:o}}=yield Na.searchAlbums(t,{offset:e,limit:r,market:n});return{items:i,total:a,next:o}}));case Wt.Artist:return(e,r)=>za(this,void 0,void 0,(function*(){const{artists:{items:i,total:a,next:o}}=yield Na.searchArtists(t,{offset:e,limit:r,market:n});return{items:i,total:a,next:o}}));case Wt.Playlist:return(e,r)=>za(this,void 0,void 0,(function*(){const{playlists:{items:i,total:a,next:o}}=yield Na.searchPlaylists(t,{offset:e,limit:r,market:n});return{items:i,total:a,next:o}}))}}(e,t),Object.assign({maxSize:250},n)):new Kt}function qa(){return ma.getString("market")}ya().subscribe((e=>Na.setAccessToken(e))),qa()||ya().pipe(sa((e=>!e)),et((()=>Na.getMe())),zn((e=>ma.setString("market",e.country))),qt(1)).subscribe(Ia);var Ya=Q((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function Ka(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=dt(e);return Qe((function(t,r){for(var i=e.length,a=new Array(i),o=e.map((function(){return!1})),l=!1,s=function(t){Ye(e[t]).subscribe(Xe(r,(function(e){a[t]=e,l||o[t]||(o[t]=!0,(l=o.every(Ie))&&(o=null))}),ve))},c=0;c<i;c++)s(c);t.subscribe(Xe(r,(function(e){if(l){var t=W([e],H(a));r.next(n?n.apply(void 0,W([],H(t))):t)}})))}))}function Qa(e){return xt((function(t,n){return e<=n}))}function Xa(e,t){return t?function(n){return wt(t.pipe(qt(1),Qe((function(e,t){e.subscribe(Xe(t,ve))}))),n.pipe(Xa(e)))}:et((function(t,n){return e(t,n).pipe(qt(1),function(e){return Je((function(){return e}))}(t))}))}function Ga(e,t){void 0===t&&(t=le);var n=$e(e,t);return Xa((function(){return n}))}var Ja,Za,eo,to=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))},no=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ro=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};const io=new l("SpotifyPlayer"),ao="Spotify player not connected.",oo=(e,t)=>e.paused===t.paused&&e.position===t.position;Ja=new WeakMap,Za=new WeakMap,eo=new WeakMap;const lo=new class{constructor(e){this.accessToken$=e,this.player=null,this.paused$=new Jt(!0),this.src$=new Jt(""),this.currentTrackSrc$=new Jt(""),this.error$=new Xt,this.playerReady$=new Jt(!1),this.playerStarted$=new Jt(!1),this.state$=new Jt(null),this.loadedSrc="",this.isLoggedIn=!1,this.deviceId="",this.hidden=!0,this.loop=!1,Ja.set(this,!1),Za.set(this,!0),eo.set(this,1),this.onSpotifyWebPlaybackSDKReady=()=>{io.log("onSpotifyWebPlaybackSDKReady"),this.observeAccessToken().pipe(xt((e=>""!==e)),et((e=>this.connect(e))),zn((()=>this.playerReady$.next(!0))),qt(1)).subscribe(io)},window.onSpotifyWebPlaybackSDKReady=this.onSpotifyWebPlaybackSDKReady,this.observeReady().pipe(zn((()=>this.player.activateElement())),qt(1)).subscribe(io),this.observeReady().pipe(kt((()=>this.observeIsLoggedIn())),kt((e=>e?this.observePaused():ct)),kt((e=>e?ct:this.observeSrc())),Ka(this.observeAccessToken()),kt((([e,t])=>e&&e!==this.loadedSrc?zt(void 0).pipe(kt((()=>this.loadError?this.reconnect(t):zt(void 0))),et((()=>this.addToQueue(e,t))),Mn((t=>(this.loadedSrc="",this.loadError={src:e,error:t},this.error$.next(t),this.currentTrackSrc$.next(""),ct))),qt(1)):ct))).subscribe(io),this.observeSrc().subscribe((()=>this.currentTrackSrc$.next(""))),this.observeState().pipe(zn((e=>{var t,n;const r=null===(n=null===(t=e.track_window)||void 0===t?void 0:t.current_track)||void 0===n?void 0:n.uri;r&&this.loadedSrc===this.src&&this.currentTrackSrc!==r&&this.currentTrackSrc$.next(r)}))).subscribe(io),this.currentTrackSrc$.pipe(xt((e=>!!e)),kt((()=>this.observeCurrentTrackState().pipe(Qa(2),et((e=>!e.paused&&this.paused?this.safePause():zt(void 0))),qt(1))))).subscribe(io),this.observeIsLoggedIn().pipe(sa((e=>e===this.isLoggedIn)),zn((e=>{this.isLoggedIn=e,e||this.paused||this.error$.next(Error(ao))}))).subscribe(io),this.observeError().subscribe(io.error),w("https://sdk.scdn.co/spotify-player.js")}get autoplay(){return no(this,Ja,"f")}set autoplay(e){no(this,Ja,"f")!==e&&(ro(this,Ja,e,"f"),e&&this.playerStarted$.next(!0))}get muted(){return no(this,Za,"f")}set muted(e){no(this,Za,"f")!==e&&(ro(this,Za,e,"f"),this.safeVolume(e?0:this.volume))}get volume(){return no(this,eo,"f")}set volume(e){no(this,eo,"f")!==e&&(ro(this,eo,e,"f"),this.safeVolume(this.muted?0:e))}observeCurrentTime(){return bt(this.observeCurrentTrackState(),this.observePaused().pipe(kt((e=>e?this.getCurrentState():Le(250).pipe(et((()=>this.getCurrentState()))))))).pipe(Je((e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.track_window)||void 0===t?void 0:t.current_track)||void 0===n?void 0:n.uri)===this.currentTrackSrc?e.position/1e3:0})),Zt())}observeDuration(){return this.observeCurrentTrackState().pipe(Je((e=>e.duration/1e3)),Zt())}observeEnded(){return this.observePlaying().pipe(kt((()=>this.observeCurrentTrackState())),Zt(oo),Ka(this.observePaused()),Je((([e,t])=>!t&&e.paused&&0===e.position)),xt((e=>e)),Je((()=>{})))}observeError(){return this.error$}observePlaying(){return this.observeCurrentTrackState().pipe(Zt(oo),Ka(this.observePaused()),Je((([e,t])=>!t&&!e.paused)),Zt(),xt((e=>e)),Je((()=>{})))}observeCurrentTrackState(){return this.observeState().pipe(xt((e=>{var t,n;return(null===(n=null===(t=e.track_window)||void 0===t?void 0:t.current_track)||void 0===n?void 0:n.uri)===this.currentTrackSrc})))}appendTo(){}load(e){io.log("load"),this.src$.next(e),this.autoplay&&this.paused$.next(!1),this.player&&this.isLoggedIn?this.autoplay&&e===this.loadedSrc&&this.safePlay():this.autoplay&&this.error$.next(Error(ao))}play(){var e;io.log("play"),this.paused$.next(!1),this.player&&this.isLoggedIn?this.src===(null===(e=this.loadError)||void 0===e?void 0:e.src)?this.error$.next(this.loadError.error):this.src===this.loadedSrc&&this.safePlay():this.error$.next(Error(ao))}pause(){io.log("pause"),this.paused$.next(!0),this.safePause()}stop(){io.log("stop"),this.paused$.next(!0),this.safeStop()}seek(e){var t;null===(t=this.player)||void 0===t||t.seek(1e3*e)}resize(){}getCurrentState(){var e;return to(this,void 0,void 0,(function*(){return(null===(e=this.player)||void 0===e?void 0:e.getCurrentState())||null}))}get paused(){return this.paused$.getValue()}get src(){return this.src$.getValue()}get currentTrackSrc(){return this.currentTrackSrc$.getValue()}observeAccessToken(){return this.accessToken$}observeIsLoggedIn(){return this.observeAccessToken().pipe(Je((e=>!!e)),Zt())}observePaused(){return this.paused$.pipe(Zt())}observeReady(){return Pn([this.playerReady$,this.playerStarted$]).pipe(xt((([e,t])=>e&&t)),Je((()=>{})),qt(1))}observeSrc(){return this.src$.pipe(Zt())}observeState(){return this.state$.pipe(xt(y))}addToQueue(e,t,n=3){return to(this,void 0,void 0,(function*(){if(!t)throw Error(ao);const r=yield fetch(`https://api.spotify.com/v1/me/player/play?device_id=${this.deviceId}`,{method:"PUT",body:JSON.stringify({uris:[e],position_ms:0}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!r.ok){if(n>0)switch(r.status){case 401:{const t=yield xa();return this.addToQueue(e,t,--n)}case 404:case 502:case 503:return yield this.reconnect(t),this.addToQueue(e,t,--n)}throw r}this.loadError=void 0,this.loadedSrc=e}))}connect(e){return to(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;const i=new Spotify.Player({name:"ampcast",getOAuthToken:t=>to(this,void 0,void 0,(function*(){r&&(e=yield xa()),r=!0,t(e)})),volume:this.muted?0:this.volume});i.addListener("initialization_error",n),i.addListener("authentication_error",n),i.addListener("account_error",n),i.addListener("playback_error",(e=>this.error$.next(e))),i.addListener("player_state_changed",(e=>this.state$.next(e))),i.addListener("not_ready",(()=>{io.log("not_ready"),this.deviceId="",n("not_ready")})),i.addListener("ready",(({device_id:e})=>{io.log("ready"),this.player=i,this.deviceId=e,t(i)})),i.connect()}))}))}disconnect(){return to(this,void 0,void 0,(function*(){this.loadedSrc="",this.currentTrackSrc$.next(""),this.loadError=void 0;const e=this.player;e&&(e.removeListener("initialization_error"),e.removeListener("authentication_error"),e.removeListener("account_error"),e.removeListener("playback_error"),e.removeListener("player_state_changed"),e.removeListener("not_ready"),e.removeListener("ready"),yield this.safePause(),e.disconnect())}))}reconnect(e){return to(this,void 0,void 0,(function*(){return io.log("reconnect"),t=gt(this.disconnect()).pipe(Ga(1e3),et((()=>this.connect(e))),Ga(3e3),Je((()=>{}))),new Promise((function(e,n){var r=new Ce({next:function(t){e(t),r.unsubscribe()},error:n,complete:function(){n(new Ya)}});t.subscribe(r)}));var t}))}safePause(){return to(this,void 0,void 0,(function*(){try{this.player&&this.loadedSrc&&(yield this.player.pause())}catch(e){io.error(e)}}))}safePlay(){return to(this,void 0,void 0,(function*(){try{this.player&&this.loadedSrc&&(yield this.player.resume())}catch(e){this.error$.next(e)}}))}safeStop(){return to(this,void 0,void 0,(function*(){try{if(this.player&&this.loadedSrc){yield this.player.pause();const e=yield this.getCurrentState();(null==e?void 0:e.position)&&(yield this.player.seek(0))}}catch(e){io.error(e)}}))}safeVolume(e){var t;return to(this,void 0,void 0,(function*(){try{yield null===(t=this.player)||void 0===t?void 0:t.setVolume(e)}catch(e){io.error(e)}}))}}(ya());var so=n(6998),co=n.n(so),uo=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::youtubeAuth");const fo=new l("youtubeAuth"),mo="https://www.googleapis.com/auth/youtube.readonly",po=["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],ho=new Jt("");function vo(){return""!==go()}function go(){return ho.getValue()}function bo(){var e,t;return uo(this,void 0,void 0,(function*(){return(null===(t=null===(e=window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.oauth2)||(yield w("https://accounts.google.com/gsi/client")),google.accounts.oauth2}))}function yo(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function wo(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=yo(n);return(e,n)=>r.then((r=>n(r.transaction(t,e).objectStore(t))))}let xo;function ko(){return xo||(xo=wo("keyval-store","keyval")),xo}function So(e,t=ko()){return t("readonly",(t=>yo(t.get(e))))}function Eo(e,t,n=ko()){return n("readwrite",(n=>(n.put(t,e),yo(n.transaction))))}!function(){uo(this,void 0,void 0,(function*(){const e=(yield function(){return uo(this,void 0,void 0,(function*(){const e=yield function(){return uo(this,void 0,void 0,(function*(){return window.gapi||(yield w("https://apis.google.com/js/api.js")),window.gapi}))}();return e.client?e.client:new Promise(((t,n)=>{e.load("client",{callback:()=>{const r={apiKey:on,clientId:ln,discoveryDocs:po,scope:mo};e.client.init(r).then((()=>t(e.client)),n)},onerror:n})}))}))}()).getToken();e&&(fo.log("Access token successfully obtained."),ho.next(e.access_token)),gapi.load("client:auth2",(()=>{gapi.auth2.getAuthInstance().isSignedIn.listen((e=>{if(e){const e=gapi.client.getToken();ho.next((null==e?void 0:e.access_token)||"")}else ho.next("")}))}))}))}();var Co=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))},Po=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const To=wo("ampcast/youtube-cache","keyval");!function(){Co(this,void 0,void 0,(function*(){const e=yield function(e=ko()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([yo(t.getAllKeys()),yo(t.getAll())]).then((([e,t])=>e.map(((e,n)=>[e,t[n]]))));const n=[];return e("readonly",(e=>function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},yo(e.transaction)}(e,(e=>n.push([e.key,e.value]))).then((()=>n))))}))}(To),t=[],n=Date.now();for(const[r,i]of e)n-i.cachedAt>6048e5&&t.push(r);t.length>0&&(yield function(e,t=ko()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),yo(t.transaction))))}(t,To))}))}();class Ao{constructor(e,t,n){this.defaultConfig={pageSize:Ao.maxPageSize},this.nextPageToken=void 0,this.pageNumber=1,this.config=Object.assign(Object.assign({},this.defaultConfig),n),this.pager=new Rn((()=>Co(this,void 0,void 0,(function*(){return this.fetchPage(e,t)}))),this.config)}get maxSize(){return this.pager.maxSize}observeItems(){return this.pager.observeItems()}observeSize(){return this.pager.observeSize()}observeError(){return this.pager.observeError()}disconnect(){this.pager.disconnect()}fetchAt(e,t){this.pager.fetchAt(e,t)}createItems({kind:e,items:t=[]},n){return Co(this,void 0,void 0,(function*(){switch(e){case"youtube#playlistListResponse":return t.map((e=>this.createMediaPlaylist(e)));case"youtube#playlistItemListResponse":{const e=t.map((e=>e.contentDetails.videoId));return(yield this.fetchVideos(e,n)).map((e=>this.createMediaItem(e)))}case"youtube#searchListResponse":{const e=t.map((e=>e.id.videoId));return(yield this.fetchVideos(e,n)).map((e=>this.createMediaItem(e)))}default:return t.map((e=>this.createMediaItem(e)))}}))}createMediaPlaylist(e){var t,n,r;return{itemType:Wt.Playlist,src:`youtube:playlist:${e.id}`,externalUrl:`${zo}/playlist?list=${e.id}`,title:(null===(t=e.snippet)||void 0===t?void 0:t.title)||e.id,thumbnails:this.mapThumbnails(null===(n=e.snippet)||void 0===n?void 0:n.thumbnails),trackCount:null===(r=e.contentDetails)||void 0===r?void 0:r.itemCount,owner:this.createOwner(e.snippet),pager:this.createPlaylistPager(e.id)}}createMediaItem(e){var t,n,r,i,a;return{itemType:Wt.Media,mediaType:yn.Video,src:`youtube:video:${e.id}`,externalUrl:`${zo}/watch?v=${e.id}`,title:(null===(t=e.snippet)||void 0===t?void 0:t.title)||e.id,duration:this.parseDuration(null===(n=e.contentDetails)||void 0===n?void 0:n.duration),thumbnails:this.mapThumbnails(null===(r=e.snippet)||void 0===r?void 0:r.thumbnails),owner:this.createOwner(e.snippet),globalRating:this.parseNumber(null===(i=e.statistics)||void 0===i?void 0:i.likeCount),globalPlayCount:this.parseNumber(null===(a=e.statistics)||void 0===a?void 0:a.viewCount),playedAt:0}}createOwner({channelId:e="",channelTitle:t=""}){return e?{name:t,url:`${zo}/channel/${e}`}:void 0}createPlaylistPager(e){return new Ao("/playlistItems",{playlistId:e,part:"contentDetails",fields:"items(contentDetails(videoId))"})}mapThumbnails(e){if(e)return Object.keys(e).map((t=>e[t]))}parseDuration(e=""){const[,t=0,n=0,r=0]=/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/.exec(e)||[];return 60*Number(t)*60+60*Number(n)+Number(r)||0}fetchPage(e,t){return Co(this,void 0,void 0,(function*(){const n=this.createCacheKey(e,t,this.pageNumber),r=yield this.getFromCache(n),i=this.nextPageToken,a=yield this.fetch(e,Object.assign(Object.assign({},t),{fields:`etag,kind,pageInfo,nextPageToken,${t.fields||"items"}`,maxResults:String(this.config.pageSize),pageToken:i}),r),{pageInfo:o,nextPageToken:l}=a,s=Po(a,["pageInfo","nextPageToken"]),c=yield this.createItems(s,n),u=null==o?void 0:o.totalResults,d=!l;return this.nextPageToken=l,this.pageNumber++,yield this.saveToCache(n,a),{items:c,total:u,atEnd:d}}))}fetchVideos(e,t){return Co(this,void 0,void 0,(function*(){const n=`${t}/videos`,r=yield this.getFromCache(n),i=yield this.fetch("/videos",{id:e.join(","),part:"contentDetails,snippet,statistics",fields:`etag,${Ao.videoFields}`},r);return yield this.saveToCache(n,i),i.items||[]}))}fetch(e,t,n){return Co(this,void 0,void 0,(function*(){const r=(null==n?void 0:n.etag)?{"If-None-Match":n.etag}:void 0;return gapi.client.request({path:`https://www.googleapis.com/youtube/v3${e}`,params:t,headers:r}).then((e=>Co(this,void 0,void 0,(function*(){const{result:t,status:r,statusText:i}=e;if(t)return t;if(304===r&&n)return n;throw Error(i||`Error (${r})`)}))))}))}getFromCache(e){return Co(this,void 0,void 0,(function*(){const t=yield So(e,To);return null!=t?t:null}))}saveToCache(e,t){return Co(this,void 0,void 0,(function*(){this.config.noCache||(yield Eo(e,Object.assign(Object.assign({},t),{cachedAt:Date.now()}),To))}))}createCacheKey(e,t,n){const{fields:r}=t,i=Po(t,["fields"]);return`${e}?${new URLSearchParams(i)}#${n}`}parseNumber(e){if(null!=e&&!isNaN(Number(e)))return Number(e)}}Ao.minPageSize=5,Ao.maxPageSize=50,Ao.videoFields="items(id,snippet(title,thumbnails,channelId,channelTitle),contentDetails(duration),statistics(viewCount,likeCount))",Ao.playlistFields="items(id,snippet(title,thumbnails,channelId,channelTitle),contentDetails(itemCount))";console.log("module::youtube");const zo="https://www.youtube.com",Io={view:"card",fields:["Thumbnail","Title","Duration","Owner"]},No={id:"youtube/likes",title:"Likes",icon:"thumbs-up",itemType:Wt.Media,layout:Io,defaultHidden:!0,search:()=>new Ao("/videos",{myRating:"like",part:"snippet,contentDetails,statistics",fields:Ao.videoFields})},Mo={id:"youtube/playlists",title:"Playlists",icon:"playlists",itemType:Wt.Playlist,layout:{view:"card compact",fields:["Thumbnail","Title","TrackCount","Owner"]},secondaryLayout:Io,search:()=>new Ao("/playlists",{mine:"true",part:"snippet,contentDetails",fields:Ao.playlistFields})};function Oo(e=""){if(e.startsWith("youtube:"))return e;const t=co()(e);if(t)return`youtube:video:${t}`;if(/youtu\.?be/.test(e)){const t=new URLSearchParams(new URL(e).search).get("list")||"";if(t)return`youtube:playlist:${t}`}return""}function _o(e){return t=this,n=void 0,i=function*(){const t=`${zo}/watch?v=${e}`,n=yield fetch(`${zo}/oembed?url=${t}&format=json`);if(!n.ok)switch(n.status){case 401:throw Error("Embedding prevented by channel owner.");case 403:throw Error("Private video.");case 404:throw Error("Video does not exist.");default:throw Error(`${n.statusText} (${n.status})`)}const r=yield n.json();return{itemType:Wt.Media,mediaType:yn.Video,src:`youtube:video:${e}`,externalUrl:t,title:r.title,aspectRatio:r.width/r.height||16/9,duration:0,track:0,thumbnails:[{url:r.thumbnail_url,width:r.thumbnail_width,height:r.thumbnail_height}],owner:{name:r.author_name,url:r.author_url},playedAt:0}},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}const $o={id:"youtube",name:"YouTube",icon:"youtube",url:"https://www.youtube.com/",defaultNoScrobble:!0,roots:[{id:"youtube/search/video",title:"Video",icon:"",itemType:Wt.Media,layout:Io,searchable:!0,search:({q:e=""}={})=>e?new Ao("/search",{q:e,type:"video",videoCategoryId:"10",part:"id",fields:"items(id(videoId))"},{maxSize:Ao.maxPageSize,noCache:!0}):new Kt}],sources:[No,Mo],observeIsLoggedIn:function(){return ho.pipe(Zt()).pipe(Je((e=>""!==e)),Zt())},isLoggedIn:vo,login:function(){return uo(this,void 0,void 0,(function*(){if(!vo())try{const e=yield function(){return uo(this,void 0,void 0,(function*(){const e=yield bo();return new Promise(((t,n)=>{e.initTokenClient({client_id:ln,scope:mo,callback:e=>{e.error?n(e.error_description):(ho.next(e.access_token),t(e.access_token))}}).requestAccessToken()}))}))}();fo.log("Access token successfully obtained."),ho.next(e)}catch(e){fo.log("Could not obtain access token."),fo.error(e)}}))},logout:function(){return uo(this,void 0,void 0,(function*(){const e=go();e&&(yield bo()).revoke(e,(()=>ho.next("")))}))}};function Lo(){return[Zn,Ua,$o,la,Lr,oi,Mi]}function Do(){return Lo().filter((e=>!!e.lookup))}function jo(e){return Lo().find((t=>t.id===e))}function Ro(e){const t=jo(e);return!!t&&!t.scrobbler}function Fo(e){return!!e&&function(e){if(e){const[t,n,r]=e.split(":");return"blob"===t||"file"===t||!!r&&!!n&&Ro(t)}return!1}(e.src)}const Bo=new f("services"),Vo=new Jt(Bo.getJson("hidden",{}));function Uo(e){return!function(e){var t;return null!==(t=Vo.getValue()[e.id])&&void 0!==t?t:!!e.defaultHidden}(e)}function Ho(e){const t=Vo.getValue(),n=Object.assign(Object.assign({},t),e);Bo.setJson("hidden",n),Vo.next(n)}var Wo=n(5800);function qo({service:e}){return r.createElement("p",null,r.createElement("button",{className:"branded login",onClick:e.login},"Log in to ",e.name))}function Yo({service:e}){return r.createElement("p",null,r.createElement(li,{href:e.url},r.createElement(dr,{name:e.icon}),e.url))}function Ko({service:e}){return r.createElement("div",{className:"panel"},r.createElement("div",{className:"page login"},r.createElement("p",null,"You need to be logged in to play music from ",e.name,"."),r.createElement(qo,{service:e}),r.createElement(Yo,{service:e})))}function Qo(){return(0,r.useEffect)((()=>{const e=new Xt,t=e.pipe(et((e=>$e(e))),et((()=>function(){return Fi(this,void 0,void 0,(function*(){return Wi=yield Ri.fetchJSON({host:Vi,path:"/pins",method:"POST",params:{strong:"true"}}),Wi}))}())),Je((e=>1e3*e.expiresIn)),zn((t=>e.next(t)))).subscribe();return e.next(0),()=>t.unsubscribe()})),r.createElement(Ko,{service:la})}function Xo({service:e}){return r.createElement("div",{className:"dev-mode note"},r.createElement("p",null,"This application is in ",r.createElement("strong",null,"development mode"),"."),r.createElement("p",null,"You currently need to be authorized to access services from ",e.name,"."))}function Go(){return r.createElement("div",{className:"panel"},r.createElement("div",{className:"page login"},r.createElement(Xo,{service:Ua}),r.createElement("p",null,"You need to be logged in to play music from Spotify.*"),r.createElement(qo,{service:Ua}),r.createElement(Yo,{service:Ua}),r.createElement("p",null,r.createElement("small",null,"*Spotify Premium required."))))}function Jo(){return r.createElement("div",{className:"panel"},r.createElement("div",{className:"page login"},r.createElement(Xo,{service:$o}),r.createElement("p",null,"You can still play YouTube videos without being logged in.",r.createElement("br",null),"But you need to be logged in to search for music and access your playlists."),r.createElement(qo,{service:$o}),r.createElement(Yo,{service:$o})))}function Zo({service:e}){switch(e.id){case"plex":return r.createElement(Qo,null);case"spotify":return r.createElement(Go,null);case"youtube":return r.createElement(Jo,null);default:return r.createElement(Ko,{service:e})}}function el({onSubmit:e}){const t=(0,r.useRef)(null),n=(0,r.useCallback)((n=>{const r=t.current.value;n.preventDefault(),null==e||e(r)}),[e]);return r.createElement("form",{className:"search-bar",onSubmit:n},r.createElement("p",{className:"search-bar-input"},r.createElement("input",{type:"search",spellCheck:!1,autoComplete:"off",autoCapitalize:"off",ref:t}),r.createElement("button",{type:"submit"},"Search")))}function tl(e,t){return void 0===t&&(t=le),Qe((function(n,r){var i=null,a=null,o=null,l=function(){if(i){i.unsubscribe(),i=null;var e=a;a=null,r.next(e)}};function s(){var n=o+e,a=t.now();if(a<n)return i=this.schedule(void 0,n-a),void r.add(i);l()}n.subscribe(Xe(r,(function(n){a=n,o=t.now(),i||(i=t.schedule(s,e),r.add(i))}),(function(){l(),r.complete()}),void 0,(function(){a=i=null})))}))}var nl=n(4909),rl=n.n(nl),il=n(9520),al=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module:localdb/listens");const ol=new l("localdb/listens"),ll=[],sl=new Jt(ll);class cl extends il.ZP{constructor(){super("ampcast/listens"),this.version(1).stores({items:"&playedAt, src, lastfmScrobbledAt, listenbrainzScrobbledAt"})}}const ul=new cl;function dl(){return sl.pipe(xt((e=>e!==ll)))}function fl(e){return al(this,void 0,void 0,(function*(){try{e.length>0&&(yield ul.items.bulkPut(e))}catch(e){ol.error(e)}}))}function ml(e,t=30){return Math.round(e.playedAt/t)}function pl(e,t,n=5){const r=t.playedAt,i=r-n,a=r+t.duration+n;for(const n of e){if(n.playedAt<i)return;if(n.playedAt>i&&n.playedAt<a&&vl(t,n,.75))return n}}function hl(e,t){const n=sl.getValue();return function(e,t,n=5){const r=t.playedAt;if(r)for(let i=0;i<e.length;i++){const a=e[i-1];if(a&&a.playedAt<r)return;const o=e[i],l=o.playedAt-n,s=o.playedAt+o.duration+n;if(r>l&&r<s&&vl(o,t,.75))return o}}(n,e,t)||function(e,t){return e.find((e=>t.src===e.src||t.externalUrl&&t.externalUrl===e.externalUrl||t.isrc&&t.isrc===e.isrc||t.recording_mbid&&t.recording_mbid===e.recording_mbid))}(n,e)||Ml(n,e)}function vl(e,t,n){return N(e.title,t.title,n)}function gl(e){return al(this,void 0,void 0,(function*(){const t=`${e}ScrobbledAt`,n=Math.floor(Date.now()/1e3)-1209600,r=yield ul.items.where(t).equals(0).toArray();yield fl(r.filter((e=>e.playedAt<n)).map((e=>Object.assign(Object.assign({},e),{[t]:-1}))))}))}al(void 0,void 0,void 0,(function*(){try{yield gl("lastfm"),yield gl("listenbrainz")}catch(e){ol.error(e)}(0,il.Y1)((()=>ul.items.orderBy("playedAt").reverse().toArray())).subscribe(sl)}));const bl=new Xt,yl=new Xt,wl=new f("lookup"),xl={get preferredService(){return wl.getString("preferredService")},set preferredService(e){wl.setString("preferredService",e)}};var kl=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};const Sl=new l("lookupStore");class El extends il.ZP{constructor(){super("ampcast/lookup"),this.version(1).stores({items:"&[service+artist+title]"})}add(e,t,n,r){return kl(this,void 0,void 0,(function*(){try{e&&(Sl.log("add",{service:e,artist:t,title:n,items:r}),t=t.toLowerCase(),n=n.toLowerCase(),yield this.items.put({service:e,artist:t,title:n,items:r}))}catch(e){Sl.error(e)}}))}get(e,t,n){return kl(this,void 0,void 0,(function*(){return this.items.get([e,t.toLowerCase(),n.toLowerCase()])}))}}const Cl=new El;var Pl=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};const Tl=new l("lookup");let Al="";function zl(e){return Pl(this,void 0,void 0,(function*(){try{if(!e)return;if(Fo(e))return e;t=e,bl.next({lookupItem:t});const n=yield function(e){return Pl(this,void 0,void 0,(function*(){const t=hl(e);if(t)return t;const{link:n}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["link"]);if(n&&Fo(n))return Object.assign(Object.assign({},r),n);const{artist:i,title:a}=Rl(e);if(!i||!a)return;let o=[];const[l]=(null==n?void 0:n.src.split(":"))||[],s=jo(l);return s&&(o=yield Il(s,e)),0===o.length&&(o=yield Nl(e,!0,s)),0===o.length&&(o=yield Nl(e,!1,s)),Ml(o,e)}))}(e);return n&&([Al]=n.src.split(":")),function(e,t){yl.next({lookupItem:e,foundItem:t?z(t,e):void 0})}(e,n),n}catch(e){Tl.error(e)}var t}))}function Il(e,t){return Pl(this,void 0,void 0,(function*(){try{if(!e.lookup)return[];const{artist:n,title:r}=Rl(t),i=yield Cl.get(e.id,n,r);if(i)return i.items;if(e.isLoggedIn()){const i=e=>jl(e).replace(/[([].*$/,"").replace(/['"]/g," ").replace(/\s\s+/g," "),a=Ol(yield e.lookup(i(t.albumArtist||Fl(n)),i(Fl(r)),10,2e3),t);return yield Cl.add(e.id,n,r,a),a}}catch(e){Tl.error(e)}return[]}))}function Nl(e,t,n){return Pl(this,void 0,void 0,(function*(){const r=Do().filter((e=>e!==n&&e.isLoggedIn()===t));return 0===r.length?[]:(yield Promise.all([...r.map((t=>Il(t,e)))])).flat()}))}function Ml(e,t){const{artist:n,title:r}=Rl(t);if(!n||!r)return;const i=xl.preferredService||Al;let a=Ol(e,t);return a=I(a,(e=>Ll(e,t))),i&&(a=I(a,(e=>e.src.startsWith(i)))),a[0]}function Ol(e,t){let n=e.filter((e=>$l(e,t,!0)));return 0===n.length&&(n=e.filter((e=>$l(e,t,!1)))),n}const _l=/\s*(feat\.|[([]?\s?feat[\s.]).*$/i;function $l(e,t,n){const{artist:r,title:i}=Rl(t);return(function(e,t,n){const r=jl(e.title);if(Dl(t=jl(t),r))return!0;if(n)return!1;const[,...i]=e.artists||[];if(i.length>0){const e=i.length>1?` & ${i.pop()}`:"";if(Dl(t,`${r} (feat. ${i.join(", ")}${e})`))return!0}return!(!_l.test(t)||!Dl(Fl(t),r))||!(!_l.test(e.title)||!Dl(t,Fl(r)))}(e,i,n)||function(e,t){if(!Ll(e,t))return!1;if(e.track!==t.track)return!1;const n=jl(e.title),r=jl(t.title);return!(!n.startsWith(r)&&!r.startsWith(n))||N(n,r,.75)}(e,t))&&function(e,t,n){const r=e.artists;if(!r)return!1;const i=r[0];if(!i)return!1;if(Dl(t,i))return!0;if(n)return!1;if(Dl(Fl(t),Fl(i)))return!0;if(Dl(Fl(t),e.albumArtist))return!0;const a=",;&|/".split("").map((e=>[e,`${e} `,` ${e} `])).flat();for(const e of a){const[n]=r[0].split(e);if(Dl(t,n))return!0;if(r.length>1&&Dl(t,r.join(e)))return!0}return!1}(e,r,n)}function Ll(e,t){return!(!e.album||!t.album)&&Dl(jl(t.album),jl(e.album))}function Dl(e,t=""){return 0===e.localeCompare(t,void 0,{sensitivity:"accent"})}function jl(e){return rl()(e).replace(/\s\s+/g," ")}function Rl(e){return{artist:e.artists&&e.artists[0]||"",title:e.title}}function Fl(e){return e.replace(_l,"")}var Bl;!function(e){e.Looking="looking",e.NotFound="not-found"}(Bl||(Bl={}));const Vl=Bl;var Ul=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};const Hl=new l("file");function Wl(e){var t,r;return Ul(this,void 0,void 0,(function*(){const{parseBlob:i}=yield Promise.all([n.e(463),n.e(12)]).then(n.bind(n,2463));let a;try{a=yield i(e,{duration:!0,skipCovers:!0})}catch(t){Hl.log(`Error parsing file: ${e.name}`),Hl.error(t),a={format:{},common:{}}}const{common:o,format:l}=a,s=e.type.startsWith("video"),c=l.duration||(yield function(e){return Ul(this,void 0,void 0,(function*(){return new Promise((t=>{const n=e.type.startsWith("video"),r=document.createElement(n?"video":"audio"),i=URL.createObjectURL(e),a=()=>{const e=r.error?0:r.duration;r.ondurationchange=null,r.onerror=null,r.src="",r.removeAttribute("src"),URL.revokeObjectURL(i),t(e)};r.ondurationchange=a,r.onerror=a,r.onended=a,r.muted=!0,r.src=i}))}))}(e)),u=(e=0)=>Math.floor(Number(e))||0;return{itemType:Wt.Media,mediaType:s?yn.Video:yn.Audio,src:`blob:${rr()}`,externalUrl:"",title:o.title||e.name.replace(/\.\w+$/,""),artists:o.artist?[o.artist]:o.artists,albumArtist:o.album&&o.albumartist||"",album:o.album||"",genres:o.genre,duration:c?Number(c.toFixed(3)):0,track:u(null===(t=o.track)||void 0===t?void 0:t.no),year:u(o.year),mood:o.mood||"",rating:Number(o.rating)||0,isrc:null===(r=o.isrc)||void 0===r?void 0:r[0],recording_mbid:o.musicbrainz_recordingid,playedAt:0,blob:e}}))}const ql=new f("playlist"),Yl=new Jt(ql.getJson("settings",{allowDuplicates:!0,showLineNumbers:!0,zeroPadLineNumbers:!0,showSourceIcons:!0})),Kl=function(){return Yl},Ql=function(){return Yl.getValue()},Xl=function(e){ql.setJson("settings",e),Yl.next(e)};var Gl=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::playlist");const Jl=new l("playlist"),Zl=wo("ampcast/playlist","keyval"),es=[],ts=new Jt(es),ns=new Jt("");function rs(){return ts.getValue()}function is(e){e=e.concat(),ts.next(e),0===e.length?os(""):ls()||os(e[0].id)}function as(){return ns.getValue()}function os(e){ns.next(e)}function ls(){const e=rs(),t=as();return e.find((e=>e.id===t))||null}function ss(e){os(e.id)}function cs(){return Pn([ts,ns]).pipe(Je((([e,t])=>{var n;return null!==(n=e.find((e=>e.id===t)))&&void 0!==n?n:null})),Zt())}function us(){const e=ts.getValue(),t=as();return e.findIndex((e=>e.id===t))}function ds(){return ts.getValue().length}function fs(e){const t=as();if(t){const n=rs(),r=n.findIndex((e=>e.id===t));if(-1!==r){const t=n[r+e];t&&ss(t)}}}function ms(e,t){return Gl(this,void 0,void 0,(function*(){const n=rs(),r=Ql().allowDuplicates;let i=yield function(e){return Gl(this,void 0,void 0,(function*(){const t=e=>"itemType"in e&&e.itemType===Wt.Album;let n=[];if(Array.isArray(e))if(t(e[0])){const t=yield Promise.all(e.map((e=>hs(e))));for(const e of t)n=n.concat(e)}else n=yield Promise.all(e.map((e=>vs(e))));else n=t(e)?yield hs(e):e instanceof FileList?yield Promise.all(Array.from(e).map((e=>Wl(e)))):[yield vs(e)];return n.filter(y)}))}(e);if(r||(i=i.filter((e=>-1===n.findIndex((t=>t.src===e.src))))),i.length>0){const e=i.map((e=>Object.assign(Object.assign({},e),{id:rr(),lookupStatus:void 0})));t>=0&&t<n.length?(n.splice(t,0,...e),is(n)):is(n.concat(e))}}))}function ps(e){const t=rs(),n=Array.isArray(e)?e:[e],r=t.filter((e=>!n.includes(e)));if(r.length!==t.length){const e=us(),t=as(),n=r.findIndex((e=>e.id===t));if(-1===n)if(-1===e)os("");else{const t=r[e]||r.at(-1);os((null==t?void 0:t.id)||"")}is(r)}}function hs(e){return Gl(this,void 0,void 0,(function*(){return Yt(e.pager)}))}function vs(e){return Gl(this,void 0,void 0,(function*(){return e instanceof File?/^(audio|video)/.test(e.type)?Wl(e):null:e}))}const gs={get atEnd(){return us()===ds()-1},get atStart(){return 0===ds()||0===us()},observe:function(){return ts.pipe(xt((e=>e!==es)))},observeCurrentIndex:function(){return Pn([ts,ns]).pipe(Je((([e,t])=>e.findIndex((e=>e.id===t)))),Zt())},observeCurrentItem:cs,observeNextItem:function(){return Pn([ts,ns]).pipe(Je((([e,t])=>{const n=e.findIndex((e=>e.id===t));return-1===n?null:e[n+1]||null})),Zt())},observeSize:function(){return ts.pipe(Je((e=>e.length)),Zt())},getCurrentItem:ls,setCurrentItem:ss,add:function(e){return Gl(this,void 0,void 0,(function*(){yield ms(e,-1)}))},clear:function(){is([])},eject:function(){const e=ls();e&&ps(e)},insertAt:ms,moveSelection:function(e,t){const n=rs(),r=n[t];if(e.includes(r))return;const i=n.filter((t=>!e.includes(t))),a=i.indexOf(r);a>=0?(i.splice(a,0,...e),is(i)):is(i.concat(e))},next:function(){fs(1)},prev:function(){fs(-1)},remove:ps,removeAt:function(e){const t=function(e){var t;return null!==(t=rs()[e])&&void 0!==t?t:null}(e);t&&ps(t)},shuffle:function(){const e=rs();let t=e.length;for(;t>0;){const n=Math.floor(Math.random()*t);t--;const r=e[t];e[t]=e[n],e[n]=r}is(e)}},bs=gs;Gl(void 0,void 0,void 0,(function*(){var e,t;const n=null!==(e=yield So("items",Zl))&&void 0!==e?e:[],r=null!==(t=yield So("currently-playing-id",Zl))&&void 0!==t?t:"";ts.next(n),ns.next(r)})),ts.pipe(Qa(2),tl(200),et((e=>Eo("items",e=e.map((e=>e.lookupStatus?Object.assign(Object.assign({},e),{lookupStatus:void 0}):e)),Zl)))).subscribe(Jl),ns.pipe(Qa(2),tl(200),et((e=>Eo("currently-playing-id",e,Zl)))).subscribe(Jl),bl.pipe(zn((({lookupItem:e})=>{const t=rs(),n=t.findIndex((t=>t.src===e.src));if(-1!==n){const e=t[n];t[n]=Object.assign(Object.assign({},e),{lookupStatus:Vl.Looking}),is(t)}}))).subscribe(Jl),yl.pipe(zn((({lookupItem:e,foundItem:t})=>{const n=rs(),r=n.findIndex((t=>t.src===e.src));if(-1!==r){const e=n[r];n[r]=t?Object.assign(Object.assign({},t),{id:e.id,lookupStatus:void 0}):Object.assign(Object.assign({},e),{lookupStatus:Vl.NotFound}),is(n)}}))).subscribe(Jl);var ys,ws,xs,ks=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Ss=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class Es{constructor(e,t,n){this.players=e,this.selectPlayer=t,this.loadPlayer=n,this.player$=new Jt(null),this.error$=new Xt,ys.set(this,!1),ws.set(this,!1),xs.set(this,!1),e.forEach((e=>{e.autoplay=!1,e.muted=!0,e.hidden=!0}))}get autoplay(){return ks(this,ys,"f")}set autoplay(e){Ss(this,ys,e,"f"),this.currentPlayer&&(this.currentPlayer.autoplay=e)}get hidden(){return ks(this,ws,"f")}set hidden(e){Ss(this,ws,e,"f"),this.currentPlayer&&(this.currentPlayer.hidden=e)}get loop(){return this.players[0].loop}set loop(e){this.players.forEach((t=>t.loop=e))}get muted(){return ks(this,xs,"f")}set muted(e){Ss(this,xs,e,"f"),this.currentPlayer&&(this.currentPlayer.muted=e)}get volume(){return this.players[0].volume}set volume(e){this.players.forEach((t=>t.volume=e))}observeCurrentTime(){return this.observeCurrentPlayer().pipe(kt((e=>e?e.observeCurrentTime():zt(0))),Zt())}observeDuration(){return this.observeCurrentPlayer().pipe(kt((e=>e?e.observeDuration():ct)),Zt())}observeEnded(){return this.observeCurrentPlayer().pipe(kt((e=>e?e.observeEnded():ct)))}observeError(){return this.observeCurrentPlayer().pipe(kt((e=>e?bt(this.error$,e.observeError()):ct)))}observePlaying(){return this.observeCurrentPlayer().pipe(kt((e=>e?e.observePlaying():ct)))}appendTo(e){this.players.forEach((t=>t.appendTo(e)))}load(e){const t=this.currentPlayer,n=this.selectPlayer(e);if(this.player$.next(null),t&&t!==n&&(t.muted=!0,t.hidden=!0,t.stop()),this.player$.next(n),n)try{n.autoplay=this.autoplay,this.loadPlayer(n,e),n.muted=this.muted,n.hidden=this.hidden}catch(e){this.error$.next(e)}else this.error$.next(Error("No player found."))}play(){var e;this.autoplay=!0,null===(e=this.currentPlayer)||void 0===e||e.play()}pause(){var e;this.autoplay=!1,null===(e=this.currentPlayer)||void 0===e||e.pause()}stop(){var e;this.autoplay=!1,null===(e=this.currentPlayer)||void 0===e||e.stop()}seek(e){var t;null===(t=this.currentPlayer)||void 0===t||t.seek(e)}resize(e,t){e*t>0&&this.players.forEach((n=>n.resize(e,t)))}get currentPlayer(){return this.player$.getValue()}observeCurrentPlayer(){return this.player$.pipe(Zt())}}ys=new WeakMap,ws=new WeakMap,xs=new WeakMap;const Cs=new f("visualizer/settings"),Ps={get ambientVideoEnabled(){return Cs.getBoolean("ambientVideoEnabled")},set ambientVideoEnabled(e){var t;e!==this.ambientVideoEnabled&&(Cs.setBoolean("ambientVideoEnabled",e),e||("ambientvideo"===this.provider&&Cs.setString("provider",""),"ambientvideo"===(null===(t=this.lockedVisualizer)||void 0===t?void 0:t.providerId)&&Cs.removeItem("lockedVisualizer")),Ts.next(this))},get ambientVideoSource(){return Cs.getString("ambientVideoSource")},set ambientVideoSource(e){var t;e!==this.ambientVideoSource&&(Cs.setString("ambientVideoSource",e),"ambientvideo"===(null===(t=this.lockedVisualizer)||void 0===t?void 0:t.providerId)&&Cs.removeItem("lockedVisualizer"),Ts.next(this))},get useAmbientVideoSource(){return Cs.getBoolean("useAmbientVideoSource")},set useAmbientVideoSource(e){var t;e!==this.useAmbientVideoSource&&(Cs.setBoolean("useAmbientVideoSource",e),"ambientvideo"===(null===(t=this.lockedVisualizer)||void 0===t?void 0:t.providerId)&&Cs.removeItem("lockedVisualizer"),Ts.next(this))},get lockedVisualizer(){return Cs.getJson("lockedVisualizer")},set lockedVisualizer(e){if(e){const{providerId:t,name:n}=e;Cs.setJson("lockedVisualizer",{providerId:t,name:n})}else Cs.removeItem("lockedVisualizer");Ts.next(this)},get provider(){return Cs.getString("provider")},set provider(e){var t;e!==this.provider&&(Cs.setString("provider",e),e&&(null===(t=this.lockedVisualizer)||void 0===t?void 0:t.providerId)!==e&&Cs.removeItem("lockedVisualizer"),Ts.next(this))}},Ts=new Jt(Ps),As=Ps;function zs(){return Ts}var Is,Ns,Ms=n(1062),Os=n.n(Ms),_s=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},$s=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};const Ls=(e,t)=>e.width===t.width&&e.height===t.height,Ds=16/9,js={autohide:1,autoplay:0,controls:0,disablekb:1,enablejsapi:1,fs:0,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0};var Rs;!function(e){e[e.UNSTARTED=-1]="UNSTARTED",e[e.ENDED=0]="ENDED",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.BUFFERING=3]="BUFFERING",e[e.CUED=5]="CUED"}(Rs||(Rs={}));class Fs{constructor(e){this.player=null,this.src$=new Jt(""),this.size$=new Jt({width:0,height:0}),this.error$=new Xt,this.ready$=new Xt,this.state$=new Xt,this.videoId$=new Jt(""),Is.set(this,!0),Ns.set(this,1),this.autoplay=!1,this.loop=!1;const t=this.element=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),i=this.logger=new l(`YouTubePlayer/${e}`);this.targetId=`youtube-iframe-${e}`,t.hidden=!0,t.className="youtube-video",n.className="youtube-video-wrapper",r.id=this.targetId,n.append(r),t.append(n),this.observeReady().pipe(et((()=>this.observeSrc())),sa((e=>!e)),zn((e=>{const t=this.player,[,n,r,i="0"]=e.split(":"),a=Number(i)||0;if(r)if("playlist"===n){const e={list:r,listType:n,startSeconds:a};this.autoplay?t.loadPlaylist(e):t.cuePlaylist(e)}else this.autoplay?t.loadVideoById(r,a):t.cueVideoById(r,a);else t.stopVideo()}))).subscribe(i),this.observeReady().pipe(et((()=>this.observeVideoSize())),zn((({width:e,height:t})=>this.player.setSize(e,t)))).subscribe(i),this.observeState().pipe(xt((e=>e===Rs.ENDED&&this.loop)),zn((()=>this.player.seekTo(0,!0)))).subscribe(i),this.observeState().pipe(xt((e=>e===Rs.PLAYING)),zn((()=>this.element.style.visibility=""))).subscribe(i),this.observeState().pipe(Je((()=>{var e;return this.getVideoId((null===(e=this.player)||void 0===e?void 0:e.getVideoUrl())||"")})),zn((e=>this.videoId$.next(e)))).subscribe(i),this.observeError().subscribe(i.error)}get hidden(){return this.element.hidden}set hidden(e){this.element.hidden=e,e&&(this.element.style.visibility="hidden")}get muted(){return _s(this,Is,"f")}set muted(e){_s(this,Is,"f")!==e&&($s(this,Is,e,"f"),this.player&&(e?this.player.mute():0!==this.volume&&this.player.unMute()))}get volume(){return _s(this,Ns,"f")}set volume(e){_s(this,Ns,"f")!==e&&($s(this,Ns,e,"f"),this.player&&(this.player.setVolume(100*e),0===e?this.player.mute():this.muted||this.player.unMute()))}observeCurrentTime(){return this.observeState().pipe(kt((e=>{var t;return e===Rs.PLAYING?$e(250-Math.round(1e3*this.player.getCurrentTime())%250,250).pipe(Je((()=>this.player.getCurrentTime())),St(this.observeState())):zt((null===(t=this.player)||void 0===t?void 0:t.getCurrentTime())||0)})))}observeDuration(){return this.observeState().pipe(Je((()=>{var e;return(null===(e=this.player)||void 0===e?void 0:e.getDuration())||0})),xt((e=>0!==e)),Zt())}observeEnded(){return this.observeState().pipe(xt((e=>e===Rs.ENDED&&!this.loop)),Je((()=>{})))}observeError(){return this.error$}observePlaying(){return this.observeState().pipe(xt((e=>e===Rs.PLAYING)),Je((()=>{})))}observeVideoId(){return this.videoId$.pipe(Zt())}appendTo(e){if(e.appendChild(this.element),!this.player){const e=Os()(this.targetId,{playerVars:js});e.on("ready",(({target:e})=>{this.player=e,e.setVolume(100*this.volume),(this.muted||0===this.volume)&&e.mute(),this.ready$.next(void 0)})),e.on("stateChange",(({data:e})=>{this.state$.next(e)})),e.on("error",(e=>{this.error$.next(e)}))}}load(e){this.logger.log("load",{src:e}),this.autoplay&&this.player&&e===this.src?this.player.playVideo():this.src$.next(e)}play(){this.logger.log("play"),this.player?this.player.playVideo():this.error$.next(Error("YouTube player not loaded."))}pause(){var e;this.logger.log("pause"),null===(e=this.player)||void 0===e||e.pauseVideo()}stop(){var e;this.logger.log("stop"),null===(e=this.player)||void 0===e||e.stopVideo()}seek(e){var t;null===(t=this.player)||void 0===t||t.seekTo(e,!0)}resize(e,t){this.size$.next({width:e,height:t})}destroy(){var e;null===(e=this.player)||void 0===e||e.destroy(),this.element.remove()}get src(){return this.src$.getValue()}observeAspectRatio(){return this.observeVideoId().pipe(kt((e=>e?this.getAspectRatio(e):zt(Ds))),Zt())}observeReady(){return this.ready$.pipe(qt(1))}observeSize(){return this.size$.pipe(Zt(Ls),xt((({width:e,height:t})=>e*t>0)))}observeSrc(){return this.src$.pipe(Zt())}observeState(){return this.state$}observeVideoSize(){return Pn([this.observeSize(),this.observeAspectRatio()]).pipe(Je((([{width:e,height:t},n])=>{const r=Math.max(Math.round(e/n),t);return{width:Math.max(Math.round(r*n),e),height:r}})),Zt(Ls))}getAspectRatio(e){return gt(_o(e)).pipe(St($e(3e3)),St(this.observeVideoId().pipe(Qa(1))),Je((({aspectRatio:e})=>e||Ds)),Mn((t=>(this.logger.log(`Could not obtain oembed info (videoId=${e}): ${t.message}`),this.error$.next(t),zt(Ds)))))}getPlayerState(){return this.player?this.player.getPlayerState():Rs.UNSTARTED}getPlaylist(){var e;return(null===(e=this.player)||void 0===e?void 0:e.getPlaylist())||[]}getVideoId(e){if(e.startsWith("youtube:video")){const[,,t]=e.split(":");return t}return co()(e)||""}}Is=new WeakMap,Ns=new WeakMap;var Bs=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};class Vs extends Fs{constructor(){super("loader"),this.appendTo(document.body)}observeVideoSize(){return ct}loadPlaylist(e){return Bs(this,void 0,void 0,(function*(){return this.load(e),t=this.observeState().pipe(sa((e=>e!==Rs.UNSTARTED)),xt((e=>e===Rs.CUED)),Je((()=>this.getPlaylist())),qt(1)),new Promise((function(e,n){var r,i=!1;t.subscribe({next:function(e){r=e,i=!0},error:n,complete:function(){i?e(r):n(new Ya)}})}));var t}))}}class Us{constructor(e,t){this.error$=new Xt,this.src="",this.autoplay=!1;const n=this.element=document.createElement(e);n.hidden=!0,n.muted=!0,n.autoplay=!1,n.className=`html5-${e} html5-${e}-${t}`,n.crossOrigin="anonymous",ot(n,"error").pipe(Je((()=>n.error))).subscribe(this.error$);const r=this.logger=new l(`HTML5Player/${e}/${t}`);this.observeError().subscribe(r.error)}get hidden(){return this.element.hidden}set hidden(e){this.element.hidden=e}get loop(){return this.element.loop}set loop(e){this.element.loop=e}get muted(){return this.element.muted}set muted(e){this.element.muted=e}get volume(){return this.element.volume}set volume(e){this.element.volume=e}observeCurrentTime(){return ot(this.element,"timeupdate").pipe(Je((()=>this.element.currentTime)),Je((e=>isFinite(e)?e:0)))}observeDuration(){return ot(this.element,"durationchange").pipe(Je((()=>this.element.duration)),Je((e=>isFinite(e)?e:0)))}observeEnded(){return ot(this.element,"ended").pipe(Je((()=>{})))}observeError(){return this.error$}observePlaying(){return ot(this.element,"playing").pipe(Je((()=>{})))}appendTo(e){e.appendChild(this.element)}load(e){this.logger.log("load"),this.src=e;try{const e=this.getMediaSource(this.src);this.element.setAttribute("src",e),this.autoplay&&this.safePlay()}catch(e){this.error$.next(e)}}play(){this.logger.log("play");try{const e=this.getMediaSource(this.src);this.element.getAttribute("src")!==e&&this.element.setAttribute("src",e),this.safePlay()}catch(e){this.error$.next(e)}}pause(){this.logger.log("pause"),this.element.pause()}stop(){this.logger.log("stop"),this.element.pause(),this.element.currentTime=0}seek(e){this.element.currentTime=e}resize(e,t){this.element.style.width=`${e}px`,this.element.style.height=`${t}px`}getMediaSource(e){return e.startsWith("jellyfin:")?cr.getPlayableUrlFromSrc(e):e.startsWith("plex:")?Ri.getPlayableUrlFromSrc(e):e}safePlay(){return e=this,t=void 0,r=function*(){try{yield this.element.play()}catch(e){this.error$.next(e)}},new((n=void 0)||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}));var e,t,n,r}}const Hs=new l("ambientVideoPlayer"),Ws=new Us("video","ambient"),qs=new Fs("ambient"),Ys=new f("ambientVideoPlayer");function Ks(){return As.useAmbientVideoSource&&As.ambientVideoSource?"user-progress":"progress"}const Qs=new Es([Ws,qs],(function(e){return e?e.src.startsWith("youtube:")?qs:Ws:null}),(function(e,t){const n=t.src;if(n.startsWith("youtube:")){const[,,t]=n.split(":"),r=Ks(),i=Ys.getJson(r,{})[t]||("progress"===r?120:0);e.load(`${n}:${i}`)}else e.load(n)}));Qs.loop=!0,Qs.volume=0,Qs.hidden=!0,qs.observeVideoId().pipe(kt((e=>e?qs.observeCurrentTime().pipe(Je(Math.round),Zt(),xt((e=>e>0&&e%30==0)),Ka(qs.observeDuration()),xt((([,e])=>e>600)),zn((([t])=>{const n=Ks(),r=Ys.getJson(n,{});r[e]=t,Ys.setJson(n,r)}))):ct))).subscribe(Hs),zs().pipe(Je((e=>e.ambientVideoSource)),Zt(),Qa(1),zn((()=>Ys.removeItem("user-progress")))).subscribe(Hs);const Xs=Qs,Gs="\nmo2re_RX3Bs blXien2Jh_o etiatMRgFcM DYsMJiwiZSI _MZ7UZ5frCI HCx1Z92PjJE dIP7wWY4Znw gW4nffCscYs\nA1m0SEqmmbE 9uZ8CCa0t4Y MXlFDpaQ1ec wz_ItcoR0-c jS4-FmNEDKo Tz77vqH_LJw K73lfmxDVR0 W8ayfyRWUrg\ncbuldALGsaQ AJZon2grzmA H5ASEM9dMiA GE2YEq7vaLc MYGOdJNAzrI Oszl95YWfbs b0-IkxXyhmY hoYPURX2RuE\nAgpGXSAS7Cs p-OUNPqRzII XaTxLSPh_Is 1n3ezT1cvAM CWU1pZVw0xM ry1Q7KaQdxM VlC5LSTvoj0 5hcd2VNOqTQ\n1bClbVe4QyI f6OZ01vvmko o4jE24WixcI BIej9P2LrzM dxw91a7C5BQ jmh_usvhHLw VVkZKzTbWQs vXCB1zGGFiY\nJHARFKMl8dU KSB1AZ0-I74 IGqfU6cJJc8 8zg22-ZCUfE WMlR8eJRS3I l4D6bnIdehk A5pbF_YBulo dRFRsKobN9I\nBur1ChHBNsQ IlDvBTDGanI SqMzG8xsynw mOmwk3WyYnw im2eWwIiTOc lxQS58t39_U yk076o8NF3k oggiHfuV4m8\np_GnUkm-G1M xVMsAgHy_IY VdZkfef44JI ZxOd8tmdsIM fszuqfJWKxc 0LGL_lx9XcA i_hU5eUrVIs qtwWkv9OdF0\nuZjCNtOeZG4 ZpXnEvW0XD0 -C8TYbhnVTU WzxSiEWK3cg ZE8vuq4aqNA 7HMw3bcIgRE ZJiCEDweLl8 lyh2kAjcmSY\nvFwqZ4qAUkE QLbPYQcUcgM xwf7EssFnXU FvNFuSTDPuk vvm8b2jAfv0 XkRFSnxXQ_w Ee0Qh_nIoHw 78rppSvbh7A\nNXIaYDJql1c e5eg-tOusSo ZkRjihsMdp8 e1M6jHcRrlM z9Ug-3qhrwY mA30W2dHQIo XIhEPwTMjWk -Tm4H4CrKT0\nT6tapzmF_n0 7QetsPh7BPM xBDqge4w-XA suWbFuw1O_I yCUQ8n2OxjI ZX8fSO8uTPg xX9xfFT-Qw0 hf3r9TNSsyY\n-WIamcIaipI Zjc6DwVDvq0 eHjoav_sb88 7E0WVROBsEE BvLIJSmzAnY YPurG3WT8xI 0ocUnSG4oQQ d8jFMKNy9EI\naC7s2UVXt3c EJArkl7K29k 9eFVeErnUzg 7eyYe-MN1Nc B1-yyoNMUzs Ab5I38wGxko sVuqgnXD9AE EqXNmIh0X4I\nY0U0HAwpw2s Shf_P0PLhNA Nde5P8Ob2xg f-Xul0mdBCA ExStG9rRkoY tMzCwwvHwN0 iaVmsp7dU1Y TV4J01qGE8E\nMPch_urCew8 eYpCCSAW3aw XfBNIrQ5JKQ -b68N6Q4Qus H3mdjo7kYiQ 9CJLtzzUphU yy-aMo2ds2k FFjGdNl5Sso\nLtPGmDskDiY U9rtWGI6H5A NHa506wwN0Y PLSxe5Z8Asw ubQKAfwSLDA aFsNz5VMyC8 h6yhFP_qUro GlotnVckHG4\nPEgQ0dIOB5c KWz3SXWnFys MGRDy2PqCGk 4DcMcAHrURw ETwbuC3p1ls iszl1WqjQIk njcvxMb8TVQ sTS5tBOS4GM\nhNNN5xPyyeY 8ls8xBn70gM 2XREaQqoU1U MXL2qjIL4qI 9YqbQcfIre0 JVI9BvU8-Oo J7QA7WmTGA8 WdtkaLxc464\nPaIH77c53LA FSlhSL8bFoI XLuV3_a-ro0 mo7mUJZV6DM IqWPDr8KCmQ v-QS_Kh_i6o zowLNSKyfI0 Xn8tufsbSz0\n7gG4l70v8mw thurNCHVo08 YgryBZTMVZY XAmU3yQc90M KBUg3U3MRao v_My9t4gadA Xwb1xsWClCM KlH1g1x6RJk\nyYP2A8TkSQ0 LMSmWzCqlPE oN3glsVrnRY PPBV3hem5iM 1JbI8Ml25WQ nSJ67PGjQfQ EoBF2xRsbAc KDUYy3xwCFs\nRZOcoZS_52Q pSP9_otXcTU H36qe8NatNQ qgfd-uWTVwg Blu_yCEFYvk HeYMIBFtwh4 fb0QX7DbqLg kdqyAA0ILD4\nriZWEoGKyuU 4qo9bKRxgYA t0j_GdkG1BM hLq9J32lGRs zfc53CpvlZ4 IjNKQbm4AQ8 Ms0uDHae8FY tG991Undnbc\nsh8l2-cCAGQ XDE5pd4V_xc C2BVXFIX7bY ySPxZpoqXZ8 hiEUaLX4cCM wHxEyBMi1A4 YJSw3ougt9Y 2hUJBRUtrPU\nWsCCYv2adkM kD5x3_b1J0o 9Rvtm2zGEl4 DGlAMkUjcY0 h2s_WOkfTXk 0VhxPdtX0xg 6vuFh6NNa70 ukOHqdPbYYg\nH6OmEQ8RqVk qPp315pPVSI FQqj6gN7M6M Xrwks9O2-JQ ipRwt3TDgY4 aVqRyfRviwA X33dmu12C5c QEwzFKoG7tk\nh98nR30UD8Q Z7WpAwRjprI ilqlSBYfCGs V6SoeDWDon0 d-Hwz42Vfw4 hcmxvqJDpDw 22dlye7h3qU p7l6JQApzak\nblSZ365wpfQ ADF4KgfhzPs jSRvD7Uma1g uLMC6bL_q38 k9DuPxFQ7HQ 7f2taFPyqxc YVYDz_coSfY NXg0IKlrz-Q\nORHIVufNfRM YiezM4raRrY H3GL5jO53NU acTsYqhq-AA vp2yiZnjK0w eR5vsN1Lq4E D_l0pBDHFgs HFnt39uG5W0\n7qXiAaxxGBs m6m6bqHiT6U l5jUOT0XiUM NLxwmtJSvk4 dv_QzcJGHAE kaPD4n9uQ2k r7HpeG2ofU0 O1AQcFpPs04\n44ih4WRTyGg W5BmjLsEsB0 JkNlFaei_k8 2ttB1FzBpZ4 k3Q1vse7In8 7xltSb3VBJQ ojbiGfhnjTU _Qb7TJ-T1HM\ngvT3gIDSwq8 4X95pykbYTY BPDznHIgVMA OIA5xQWkk2U 2uQ58Xwx1V4 UVjCFpYMR6A -uww0BzTb7g EqWBy5i8LyQ\nszErNcJMCdA 5k1DGpr_qDw YNEkjkh0bYo jmjrpHYegzc Eye8xYrjm24 rVLOQB5kGGw F8MN0o6RS9o viim_l9gbF8\nsBtYWK817-0 cFRcqnCpqoo y7vz1qQGUd8 -0ewPjoBBNI S1emxk9UWBE 1muEwEFDKgk P0MbbslO62E MPEvXbw3hYA\nwwXpkTd1CaQ W2A_PcIhUVM ZIb8u6uJwBo TWjid2dVjMk gdJjc6l6iII n3Dru5y3ROc OOf4Z7tyLVM iDXDrTKJehk\nwYhliE9O_3k nw0uvJZonBc cK7x6lUUsYo XPjkpBDEs2U e2AUzM6QgGs 3cxyYOXiJss AsD5u6k6dKI d_hx39kXDUg\nhlvfDL3nSoo 6L2xYzu724E URy2Ak-WRpE V-ntXk-4TPo yttvb9ByOtY ctqujFKaFZQ NWF3dNJ-EhQ WUkwH9WmmBA\nef1wAfrMg5I eN-RZVkFGj0 dc8LEG9jDFM 0-skl5qAC9Q u1rRUwx_Vy4 iTjgWeJMUJo WL9EOfzoSsA xrCNwCD-z-M\nCC3AanQdQZA ZGLrP5eawdY HoOghpRTkvs N787WRdI35A Cw0d-nqSNE8 2vifO3_gjiM OeJ5xXrbkfU vkYBLYAGavM\njP4gBqxfheI gIJxDy25nwM oN8q7p57nZw 6vnxzfejWN4 gVamQ6jodK0 iU5QjAbuhec qLIU_90P4Ac z8k_ximc8Og\nZFBoN7yIMZw 4mexI7cACZk bx-0YlFprqc NDWpXTg3koc Vo2AcHSCRiQ 2ve6LNoU6Qk WXI7byeZk5s y8d7Ihe0IwE\nubmUJcwor3k CGslieDL-04 w7ljU-lmaK4 I0B21LjeSUQ PyFN_FYwqvc vlyVzeLzNe8 ahmrb5EYoxY HGxuVWpN8vQ\nDNR1zyr5Go4 eyPhudLTuis aPWXL4ahxdY JB0A8Me8EKk dGy_6qyyY7c rxrDLgt5YFA uhcocK-td5E 4Z5FLeh7P18\nVB0zDS9ITmk VukLV0AoeFA CouF-tNHV3g lTvYjERVAnY S27YOjpgaaE 24uCC_-zaaE DslTxXsDLsw xilGAQPx5Xw\nzlHISDs2HtQ tdi8B0YzxHg R1OHRQoJOP0 fbqmVbEj9fg asL1AN3hifU rUkLoqxFOTw 3ma3yXXc3V8 1U1We59en3s\niNm7PPqO6rM CLRk8SgtVS4 VYO8Biwffns 9Wm8Ij8rHIE ZMOC332wC7A doORhRob3Qg E2sSvVCRI4s nPQ4BpTfK1Q\nE6Ww7lpuZ2k Ueqm3PQKYPk eFiKAcbp2MY dAfMgDBeqwU Wuq5NHJPXyQ LAFK1EvwulU rU07g1g-PIY L_mlofcsRaA\neZe4Q_58UTU NXObT_Fl-xI t6jlhqNxRYk _WkkH31sTMI ALJcKvnOjHM 85Y1N8avsXs NCY42RnUpCE 2QSukL7dl5o\n0Tpq2mLtXDc Zp1Oajc7VQw WGi4XiEGe8M b6L40CEYVyM Mw9qiV7XlFs UgHKb_7884o mvIYmMo906E VoXOYFlJTuI\nfsjdpo1o-J8 k9rKpHXwA1E MTG3VA-m6qk cU3XY6Ii8v0 NBIdmswtcnM k5sznEJz8BA R8W3U0Mu6t4 1esKStoxuO4\n6KBo0GhU9XM d5R3FK9vLBs N5b7Iy4W0ow VogwWGEO1-c YKRe7n3jQ_M A-mPDdnzipI 6gqU-HL68wE 3ODGCQ-kjGA\nVIlQIVVLWVs 6A-kQCdEIpI _lisL6tLbdg VarS6olPfTA va306f9aN3A zzscMK0ZtjE KpFU_kIw6To hNC6-bxHJac\nbHK0ZvQzfOY PkF4EKJQOOg 0aMUCiKjBDI D1KsEOUqCEU _SFTmh-b-Z4 omlVslJvzxQ FoS3732REf0 kNMOaRRBat4\nqqC80mXlOKo MS2asGj1-_M BizH494DmJI IahW6hJ1-SM 9MIJm1NeUpE 2qzbMPpgtDw H3UY2gQfj-s 9kekiNImlsI\n5zUCClmhjF0 88jpBZdsrT8 e18IjYKZnTA MAFdQs_yWvg xkAUTCdoteI X0IEHj4PhCc JX19TZp8gDQ 7TML_MTQdg4\nSH4f_DnPIto v-A03t6-Kss 5rf_gOfa7O4 MYG6FeY4SKg AVzdfRpE9Q0 1UxoHtG2qas o7XgU4ut6jQ IcOYM87wTRc\noPetbPLA8dM F41dgN-mwrE tpRBHKAJ_tU sTy4stPcD0E p4jroQX6Hwk y2Zl-KXvdSk zffchwaq6KE jv7hNnJEWPU\nDN-BxbMH264 mWaC_VSncEg 8x5Yzxi3LhA 0Txa_T4pHY4 McT_FUPZR5k H6Xy97CD9Hs vHf4WQtJvdI nAMkwo2eSbY\nX_M2DNPp9a8 epD5ixtaID0\n".match(/\S+/g).map((e=>({providerId:"ambientvideo",name:e,src:`youtube:video:${e}`})));console.log("Ambient videos:",Gs.length);const Js=new l("ambientvideo"),Zs=new Jt([]),ec={id:"ambientvideo",name:"Ambient Video",defaultHidden:!0,player:Xs,get visualizers(){return Zs.getValue()},observeVisualizers:()=>Zs};zs().pipe(tl(1),Je((e=>!!e.ambientVideoEnabled)),Zt(),kt((e=>e?zs().pipe(Je((e=>!!e.useAmbientVideoSource)),Zt(),kt((e=>e?zs().pipe(Je((e=>e.ambientVideoSource||"")),Zt(),kt((e=>e?function(e){return t=this,n=void 0,i=function*(){const t=Oo(e),[,n,r]=t.split(":");let i=[r];return"playlist"===n&&(i=yield function(e){return Bs(this,void 0,void 0,(function*(){const t=new Vs,n=yield t.loadPlaylist(e);return t.destroy(),n}))}(t)),i.map((e=>({providerId:"ambientvideo",name:e,src:`youtube:video:${e}`})))},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}(e):zt([])))):zt(Gs)))):zt([]))),Mn((e=>(Js.error(e),zt([]))))).subscribe(Zs);var tc={leading:!0,trailing:!1};function nc(e,t,n){void 0===t&&(t=le),void 0===n&&(n=tc);var r=$e(e,t);return function(e,t){return void 0===t&&(t=tc),Qe((function(e,n){var i=t.leading,a=t.trailing,o=!1,l=null,s=null,c=!1,u=function(){null==s||s.unsubscribe(),s=null,a&&(m(),c&&n.complete())},d=function(){s=null,c&&n.complete()},f=function(e){return s=Ye(r).subscribe(Xe(n,u,d))},m=function(){if(o){o=!1;var e=l;l=null,n.next(e),!c&&f()}};e.subscribe(Xe(n,(function(e){o=!0,l=e,(!s||s.closed)&&(i?m():f())}),(function(){c=!0,(!(a&&o&&s)||s.closed)&&n.complete()})))}))}(0,n)}console.log("module::playback");const rc=new Jt({currentItem:null,currentTime:0,startedAt:0,endedAt:0,duration:0,paused:!0});function ic(){return rc}function ac(){return ic().pipe(xt((e=>0!==e.startedAt)),Zt(((e,t)=>e.startedAt===t.startedAt)))}function oc(){return ic().pipe(xt((e=>0!==e.endedAt)),Zt(((e,t)=>e.endedAt===t.endedAt)))}function lc(e=1e4){return ac().pipe(kt((()=>ic().pipe(nc(e,void 0,{trailing:!0}),St(oc())))))}function sc(){return ic().pipe(Je((e=>e.paused)),Zt())}function cc(){const e=rc.getValue();e.startedAt&&(e.endedAt||rc.next(Object.assign(Object.assign({},e),{endedAt:Date.now()})),rc.next(Object.assign(Object.assign({},e),{startedAt:0,endedAt:0})))}cs().subscribe((e=>{cc(),rc.next(Object.assign(Object.assign({},rc.getValue()),{currentItem:e,currentTime:0,duration:(null==e?void 0:e.duration)||0,startedAt:0,endedAt:0}))}));const uc={get paused(){return rc.getValue().paused},observePlaybackState:ic,observePlaybackStart:ac,observePlaybackEnd:oc,observePlaybackProgress:lc,observeCurrentTime:function(){return ic().pipe(Je((e=>e.currentTime)),Zt())},observeDuration:function(){return ic().pipe(Je((e=>e.duration)),Zt())},observePaused:sc,getCurrentTime:function(){return rc.getValue().currentTime},setCurrentTime:function(e){const t=rc.getValue();(e=Math.max(Math.min(Math.floor(isFinite(e)?e:0),t.duration),0))!==t.currentTime&&rc.next(Object.assign(Object.assign({},t),{currentTime:e}))},getDuration:function(){return rc.getValue().duration},setDuration:function(e){const t=rc.getValue();if((e=Math.max(Math.floor(isFinite(e)?e:0),0))!==t.duration){const n=Math.min(t.currentTime,e);rc.next(Object.assign(Object.assign({},t),{duration:e,currentTime:n}))}},play:function(){const e=rc.getValue();e.currentItem&&e.paused&&rc.next(Object.assign(Object.assign({},e),{paused:!1}))},pause:function(){const e=rc.getValue();e.paused||rc.next(Object.assign(Object.assign({},e),{paused:!0}))},stop:function(){const e=rc.getValue();if(!e.paused||0!==e.currentTime||0!==e.startedAt&&0===e.endedAt){const t=Object.assign(Object.assign({},e),{paused:!0,currentTime:0,endedAt:e.endedAt||(e.startedAt?Date.now():0)});rc.next(t),e.startedAt&&rc.next(Object.assign(Object.assign({},t),{startedAt:0,endedAt:0}))}},started:function(){const e=rc.getValue();e.startedAt||rc.next(Object.assign(Object.assign({},e),{startedAt:Date.now()}))},ended:cc};function dc(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function fc(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,l=r<t-1?e[r+2]:2*a-i;return dc((n-r/t)*t,o,i,a,l)}}function mc(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}var pc=Math.sqrt(50),hc=Math.sqrt(10),vc=Math.sqrt(2);function gc(e,t,n){var r,i,a,o,l=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=function(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=pc?10:a>=hc?5:a>=vc?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=pc?10:a>=hc?5:a>=vc?2:1)}(e,t,n))||!isFinite(o))return[];if(o>0){let n=Math.round(e/o),r=Math.round(t/o);for(n*o<e&&++n,r*o>t&&--r,a=new Array(i=r-n+1);++l<i;)a[l]=(n+l)*o}else{o=-o;let n=Math.round(e*o),r=Math.round(t*o);for(n/o<e&&++n,r/o>t&&--r,a=new Array(i=r-n+1);++l<i;)a[l]=(n+l)/o}return r&&a.reverse(),a}var bc,yc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wc(e){if(!(t=yc.exec(e)))throw new Error("invalid format: "+e);var t;return new xc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function xc(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function kc(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Sc(e,t){var n=kc(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}wc.prototype=xc.prototype,xc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ec={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sc(100*e,t),r:Sc,s:function(e,t){var n=kc(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(bc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+kc(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cc(e){return e}var Pc,Tc,Ac=Array.prototype.map,zc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ic(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Nc(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mc(e){let t,n,r;function i(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=Ic,n=(t,n)=>Ic(e(t),n),r=(t,n)=>e(t)-n):(t=e===Ic||e===Nc?e:Oc,n=e,r=e),{left:i,center:function(e,t,n=0,a=e.length){const o=i(e,t,n,a-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}}}function Oc(){return 0}Pc=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Cc:(t=Ac.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,l=t[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),a.push(e.substring(i-=l,i+l)),!((s+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?Cc:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ac.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=wc(e)).fill,n=e.align,d=e.sign,f=e.symbol,m=e.zero,p=e.width,h=e.comma,v=e.precision,g=e.trim,b=e.type;"n"===b?(h=!0,b="g"):Ec[b]||(void 0===v&&(v=12),g=!0,b="g"),(m||"0"===t&&"="===n)&&(m=!0,t="0",n="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===f?a:/[%p]/.test(b)?s:"",x=Ec[b],k=/[defgprs%]/.test(b);function S(e){var i,a,s,f=y,S=w;if("c"===b)S=x(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),v),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==d&&(E=!1),f=(E?"("===d?d:c:"-"===d||"("===d?"":d)+f,S=("s"===b?zc[8+bc/3]:"")+S+(E&&"("===d?")":""),k)for(i=-1,a=e.length;++i<a;)if(48>(s=e.charCodeAt(i))||s>57){S=(46===s?o+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}h&&!m&&(e=r(e,1/0));var C=f.length+e.length+S.length,P=C<p?new Array(p-C+1).join(t):"";switch(h&&m&&(e=r(P+e,P.length?p-S.length:1/0),P=""),n){case"<":e=f+e+S+P;break;case"=":e=f+P+e+S;break;case"^":e=P.slice(0,C=P.length>>1)+f+e+S+P.slice(C);break;default:e=P+f+e+S}return l(e)}return v=void 0===v?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n,r=d(((e=wc(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor((n=t,((n=kc(Math.abs(n)))?n[1]:NaN)/3)))),a=Math.pow(10,-i),o=zc[8+i/3];return function(e){return r(a*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),Tc=Pc.format,Pc.formatPrefix;const _c=Mc(Ic),$c=_c.right,Lc=(_c.left,Mc((function(e){return null===e?NaN:+e})).center,$c);function Dc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rc(){}var Fc=.7,Bc=1/Fc,Vc="\\s*([+-]?\\d+)\\s*",Uc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wc=/^#([0-9a-f]{3,8})$/,qc=new RegExp(`^rgb\\(${Vc},${Vc},${Vc}\\)$`),Yc=new RegExp(`^rgb\\(${Hc},${Hc},${Hc}\\)$`),Kc=new RegExp(`^rgba\\(${Vc},${Vc},${Vc},${Uc}\\)$`),Qc=new RegExp(`^rgba\\(${Hc},${Hc},${Hc},${Uc}\\)$`),Xc=new RegExp(`^hsl\\(${Uc},${Hc},${Hc}\\)$`),Gc=new RegExp(`^hsla\\(${Uc},${Hc},${Hc},${Uc}\\)$`),Jc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Zc(){return this.rgb().formatHex()}function eu(){return this.rgb().formatRgb()}function tu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nu(t):3===n?new ou(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ru(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ru(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=qc.exec(e))?new ou(t[1],t[2],t[3],1):(t=Yc.exec(e))?new ou(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Kc.exec(e))?ru(t[1],t[2],t[3],t[4]):(t=Qc.exec(e))?ru(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Xc.exec(e))?fu(t[1],t[2]/100,t[3]/100,1):(t=Gc.exec(e))?fu(t[1],t[2]/100,t[3]/100,t[4]):Jc.hasOwnProperty(e)?nu(Jc[e]):"transparent"===e?new ou(NaN,NaN,NaN,0):null}function nu(e){return new ou(e>>16&255,e>>8&255,255&e,1)}function ru(e,t,n,r){return r<=0&&(e=t=n=NaN),new ou(e,t,n,r)}function iu(e){return e instanceof Rc||(e=tu(e)),e?new ou((e=e.rgb()).r,e.g,e.b,e.opacity):new ou}function au(e,t,n,r){return 1===arguments.length?iu(e):new ou(e,t,n,null==r?1:r)}function ou(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function lu(){return`#${du(this.r)}${du(this.g)}${du(this.b)}`}function su(){const e=cu(this.opacity);return`${1===e?"rgb(":"rgba("}${uu(this.r)}, ${uu(this.g)}, ${uu(this.b)}${1===e?")":`, ${e})`}`}function cu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function uu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function du(e){return((e=uu(e))<16?"0":"")+e.toString(16)}function fu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pu(e,t,n,r)}function mu(e){if(e instanceof pu)return new pu(e.h,e.s,e.l,e.opacity);if(e instanceof Rc||(e=tu(e)),!e)return new pu;if(e instanceof pu)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new pu(o,l,s,e.opacity)}function pu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function hu(e){return(e=(e||0)%360)<0?e+360:e}function vu(e){return Math.max(0,Math.min(1,e||0))}function gu(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Dc(Rc,tu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Zc,formatHex:Zc,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return mu(this).formatHsl()},formatRgb:eu,toString:eu}),Dc(ou,au,jc(Rc,{brighter(e){return e=null==e?Bc:Math.pow(Bc,e),new ou(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Fc:Math.pow(Fc,e),new ou(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ou(uu(this.r),uu(this.g),uu(this.b),cu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lu,formatHex:lu,formatHex8:function(){return`#${du(this.r)}${du(this.g)}${du(this.b)}${du(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:su,toString:su})),Dc(pu,(function(e,t,n,r){return 1===arguments.length?mu(e):new pu(e,t,n,null==r?1:r)}),jc(Rc,{brighter(e){return e=null==e?Bc:Math.pow(Bc,e),new pu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Fc:Math.pow(Fc,e),new pu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ou(gu(e>=240?e-240:e+120,i,r),gu(e,i,r),gu(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new pu(hu(this.h),vu(this.s),vu(this.l),cu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cu(this.opacity);return`${1===e?"hsl(":"hsla("}${hu(this.h)}, ${100*vu(this.s)}%, ${100*vu(this.l)}%${1===e?")":`, ${e})`}`}}));const bu=e=>()=>e;function yu(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):bu(isNaN(e)?t:e)}const wu=function e(t){var n=function(e){return 1==(e=+e)?yu:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):bu(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=au(e)).r,(t=au(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=yu(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function xu(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),l=new Array(i);for(n=0;n<i;++n)r=au(t[n]),a[n]=r.r||0,o[n]=r.g||0,l[n]=r.b||0;return a=e(a),o=e(o),l=e(l),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=l(e),r+""}}}function ku(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Iu(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Su(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Eu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cu(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Iu(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}xu(fc),xu((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],l=e[(r+2)%t];return dc((n-r/t)*t,i,a,o,l)}}));var Pu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tu=new RegExp(Pu.source,"g");function Au(e,t){var n,r,i,a=Pu.lastIndex=Tu.lastIndex=0,o=-1,l=[],s=[];for(e+="",t+="";(n=Pu.exec(e))&&(r=Tu.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:Eu(n,r)})),a=Tu.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}function zu(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function Iu(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?bu(t):("number"===i?Eu:"string"===i?(n=tu(t))?(t=n,wu):Au:t instanceof tu?wu:t instanceof Date?Su:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?ku:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Cu:Eu:zu))(e,t)}function Nu(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Mu(e){return+e}var Ou=[0,1];function _u(e){return e}function $u(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Lu(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=$u(i,r),a=n(o,a)):(r=$u(r,i),a=n(a,o)),function(e){return a(r(e))}}function Du(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=$u(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Lc(e,t,1,r)-1;return a[n](i[n](t))}}function ju(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ru(){var e,t,n,r,i,a,o=Ou,l=Ou,s=Iu,c=_u;function u(){var e,t,n,s=Math.min(o.length,l.length);return c!==_u&&(e=o[0],t=o[s-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=s>2?Du:Lu,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),l,s)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(l,o.map(e),Eu)))(n)))},d.domain=function(e){return arguments.length?(o=Array.from(e,Mu),u()):o.slice()},d.range=function(e){return arguments.length?(l=Array.from(e),u()):l.slice()},d.rangeRound=function(e){return l=Array.from(e),s=Nu,u()},d.clamp=function(e){return arguments.length?(c=!!e||_u,u()):c!==_u},d.interpolate=function(e){return arguments.length?(s=e,u()):s},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function Fu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Bu(e){return Math.log(e)}function Vu(e){return Math.exp(e)}function Uu(e){return-Math.log(-e)}function Hu(e){return-Math.exp(-e)}function Wu(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qu(e){return(t,n)=>-e(-t,n)}function Yu(e){const t=e(Bu,Vu),n=t.domain;let r,i,a=10;function o(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),i=function(e){return 10===e?Wu:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),n()[0]<0?(r=qu(r),i=qu(i),e(Uu,Hu)):e(Bu,Vu),t}return t.base=function(e){return arguments.length?(a=+e,o()):a},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=e=>{const t=n();let o=t[0],l=t[t.length-1];const s=l<o;s&&([o,l]=[l,o]);let c,u,d=r(o),f=r(l);const m=null==e?10:+e;let p=[];if(!(a%1)&&f-d<m){if(d=Math.floor(d),f=Math.ceil(f),o>0){for(;d<=f;++d)for(c=1;c<a;++c)if(u=d<0?c/i(-d):c*i(d),!(u<o)){if(u>l)break;p.push(u)}}else for(;d<=f;++d)for(c=a-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<o)){if(u>l)break;p.push(u)}2*p.length<m&&(p=gc(o,l,m))}else p=gc(d,f,Math.min(f-d,m)).map(i);return s?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===a?"s":","),"function"!=typeof n&&(a%1||null!=(n=wc(n)).precision||(n.trim=!0),n=Tc(n)),e===1/0)return n;const o=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*a<a-.5&&(t*=a),t<=o?n(e):""}},t.nice=()=>n(function(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function Ku(){const e=Yu(Ru()).domain([1,10]);return e.copy=()=>ju(e,Ku()).base(e.base()),Fu.apply(e,arguments),e}var Qu,Xu=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};const Gu=[[16.35],[17.32],[18.35],[19.45],[20.6],[21.83],[23.12],[24.5],[25.96],[27.5],[29.14],[30.87]];Gu.forEach((e=>{const t=e[0];for(let n=1;n<12;n++)e[n]=t*Math.pow(2,n)})),Qu=new WeakMap;const Ju=new class{constructor(e){this.intervalTypes=["bars","beats","sections","segments","tatums"],this.animationFrameId=0,this.currentTrackId="",this.currentTrackAnalysis=null,this.trackAnalysis={},this.initialTrackProgress=0,this.initialStart=0,this.trackProgress=0,this.active=!1,this.queues={volume:[],beat:[]},this.activeIntervals$=new Jt({bars:{},beats:{},sections:{},segments:{},tatums:{}}),this.fftSize=2048,this.volumeSmoothing=100,Qu.set(this,0),e.observeCurrentTrackState().subscribe((t=>Xu(this,void 0,void 0,(function*(){var n,r;const i=null===(r=null===(n=null==t?void 0:t.track_window)||void 0===n?void 0:n.current_track)||void 0===r?void 0:r.id;if(i&&this.currentTrackId!==i){this.currentTrackId=i,this.currentTrackAnalysis=null;try{this.currentTrackAnalysis=yield Na.getAudioAnalysisForTrack(i),t=yield e.getCurrentState()}catch(e){console.error(e),this.currentTrackAnalysis=null,t=null}}t&&this.currentTrackAnalysis&&this.updateState(t),this.active=!(!this.currentTrackAnalysis||!t||t.paused||t.loading),this.active?this.start():this.stop()}))))}get bar(){return this.activeIntervals.bars}get beat(){return this.activeIntervals.beats}get frequencyBinCount(){return this.fftSize/2}get section(){return this.activeIntervals.sections}get segment(){return this.activeIntervals.segments}get tatum(){return this.activeIntervals.tatums}get volume(){return function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}(this,Qu,"f")}observeBar(){return this.observeActiveIntervals().pipe(Je((e=>e.bars)),Zt())}observeBeat(){return this.observeActiveIntervals().pipe(Je((e=>e.beats)),Zt())}observeSection(){return this.observeActiveIntervals().pipe(Je((e=>e.sections)),Zt())}observeSegment(){return this.observeActiveIntervals().pipe(Je((e=>e.segments)),Zt())}observeTatum(){return this.observeActiveIntervals().pipe(Je((e=>e.tatums)),Zt())}getByteFrequencyData(e){if(!this.active)return;const t=this.segment.pitches;if(t){const n=fc([0,this.volume,0])(this.beat.progress),r=this.frequencyBinCount;for(let i=0;i<r;i++){const r=this.samplePitches(t,i);e[i]=r*n*256}}}samplePitches(e,t){const n=this.sampleSize,r=t*n,i=r+n;let a=0;for(let t=0;t<12;t++)for(let n=0;n<12;n++){const o=Gu[t][n];if(o>=r&&o<i){a+=e[t];break}}return a}getByteTimeDomainData(e){e.fill(128)}get activeIntervals(){return this.activeIntervals$.getValue()}get sampleSize(){return 24e3/this.frequencyBinCount}observeActiveIntervals(){return sc().pipe(kt((e=>e?ct:this.activeIntervals$)),xt((()=>this.active)))}updateState(e){return Xu(this,void 0,void 0,(function*(){this.trackAnalysis=JSON.parse(JSON.stringify(this.currentTrackAnalysis)),this.intervalTypes.forEach((e=>{const t=this.trackAnalysis[e];t[0].duration=t[0].start+t[0].duration,t[0].start=0,t.forEach((e=>{this.isSegment(e)&&(e.loudness_max_time=1e3*e.loudness_max_time),e.start=1e3*(e.start||0),e.duration=1e3*(e.duration||0)}))})),this.initialTrackProgress=e.position,this.trackProgress=e.position,this.initialStart=window.performance.now()}))}setActiveIntervals(){const e=this.activeIntervals,t=e=>{const t=this.trackAnalysis[e],n=this.trackProgress;for(let e=0;e<t.length;e++){if(e===t.length-1)return e;if(t[e].start<n&&n<t[e+1].start)return e}return 0};this.intervalTypes.forEach((n=>{const r=t(n);null!=e[n].start&&r===e[n].index||(e[n]=Object.assign(Object.assign({},this.trackAnalysis[n][r]),{index:r}));const{start:i,duration:a}=e[n],o=this.trackProgress-i;var l;e[n].elapsed=o,e[n].progress=(l=o/a,l=Math.min(Math.max(0,l),1),1- --l*l*l*l)})),this.activeIntervals$.next(e)}getVolume(){const{loudness_max:e,loudness_start:t,loudness_max_time:n,duration:r,elapsed:i,start:a,index:o}=this.activeIntervals.segments;if(!this.trackAnalysis.segments[o+1])return 0;const l=this.trackAnalysis.segments[o+1].loudness_start,s=a+i;if(i<n){const r=Math.min(1,i/n);return this.interpolate(t,e)(r)}{const t=s-(a+n),i=r-n,o=Math.min(1,t/i);return this.interpolate(e,l)(o)}}start(){this.animationFrameId||(this.animationFrameId=requestAnimationFrame(this.tick.bind(this)))}stop(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0)}tick(e){if(this.animationFrameId=requestAnimationFrame(this.tick.bind(this)),!this.active)return;this.trackProgress=e-this.initialStart+this.initialTrackProgress,this.setActiveIntervals();const t=this.getVolume(),n=this.queues;function r(e){return e.reduce(((e,t)=>e+t))/e.length}n.volume.unshift(t),n.volume.length>400&&n.volume.pop(),n.beat.unshift(t),n.beat.length>this.volumeSmoothing&&n.beat.pop();const i=Ku().domain([mc(n.volume),r(n.volume)]).range([0,1]),a=r(n.beat);!function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(e,n):i?i.value=n:t.set(e,n)}(this,Qu,i(a),"f")}interpolate(e,t){return n=>e*(1-n)+t*n}isSegment(e){return"loudness_max_time"in e}}(lo);console.log("module::audio");const Zu=new AudioContext,ed=new AnalyserNode(Zu,{fftSize:2048,smoothingTimeConstant:0}),td=new class{constructor(e,t){this.analyserNode=e,this.spotifyAudioAnalyser=t,this.currentAnalyser=e,ac().subscribe((({currentItem:n})=>{n.src.startsWith("spotify:")?this.currentAnalyser=t:this.currentAnalyser=e}))}get fftSize(){return this.analyserNode.fftSize}set fftSize(e){this.analyserNode.fftSize=e,this.spotifyAudioAnalyser.fftSize=e}get frequencyBinCount(){return this.analyserNode.frequencyBinCount}getByteFrequencyData(e){this.currentAnalyser.getByteFrequencyData(e)}getByteTimeDomainData(e){this.currentAnalyser.getByteTimeDomainData(e)}}(ed,Ju);let nd,rd;ed.connect(Zu.destination);const id=new Jt(Zu.createMediaElementSource(new Audio));function ad(){return id.pipe(Zt())}ac().subscribe((({currentItem:e})=>{if(e.src.startsWith("apple:")){if(!rd){const e=document.querySelector("audio#apple-music-player");e&&(rd=Zu.createMediaElementSource(e))}rd&&id.next(rd)}else{if(!nd){const e=document.querySelector("audio.html5-audio");e&&(nd=Zu.createMediaElementSource(e))}nd&&id.next(nd)}})),ad().pipe(Qa(1)).subscribe((e=>e.connect(ed)));class od{constructor(){this.autoplay=!1,this.loop=!0,this.muted=!0,this.volume=0}observeCurrentTime(){return ct}observeDuration(){return ct}observeEnded(){return ct}observeError(){return ct}observePlaying(){return ct}seek(){}}const ld=new l("AmpShaderPlayer"),sd="precision mediump float;\r\nuniform float time;\r\nuniform vec2 resolution;\r\nuniform sampler2D spectrum;\r\n\r\n// For ShaderToy\r\nvec3 iMouse = vec3(0., 0., 0.);\r\n#define iTime time\r\n#define iResolution resolution\r\n#define iChannel0 spectrum\r\n#define texture texture2D\r\n",cd="https://www.shadertoy.com/view",ud="ampshader",dd=[{providerId:ud,name:"Creation by Silexars",externalUrl:`${cd}/XsXXDn`,shader:`${sd}// Creation by Silexars\r\n// https://www.shadertoy.com/view/XsXXDn\r\n\r\n\r\n// http://www.pouet.net/prod.php?which=57245\r\n// If you intend to reuse this shader, please add credits to 'Danilo Guanabara'\r\n\r\nvoid main(void) {\r\n    vec3 c;\r\n    float z = 0.1 * time;\r\n    vec2 uv = gl_FragCoord.xy / resolution;\r\n    vec2 p = uv - 0.5;\r\n    p.x *= resolution.x / resolution.y;\r\n    float l = 0.2 * length(p);\r\n    for (int i = 0; i < 3; i++) {\r\n        z += 0.07;\r\n        uv += p / l * (sin(z) + 1.0) * abs(sin(l * 9.0 - z * 2.0));\r\n        c[i] = 0.01 / length(abs(mod(uv, 1.0) - 0.5));\r\n    }\r\n    float intensity = texture2D(spectrum, vec2(l, 0.5)).x;\r\n    gl_FragColor = vec4(c / l * intensity, time);\r\n}\r\n`},{providerId:ud,name:"Nautilus by weyland",externalUrl:`${cd}/MdXGz4`,shader:`${sd}// Nautilus by weyland\r\n// https://www.shadertoy.com/view/MdXGz4\r\n\r\n\r\nfloat e(vec3 c) {\r\n\tc=cos(vec3(cos(c.r+time/8.)*c.r-cos(c.g+time/9.)*c.g,c.b/3.*c.r-cos(time/7.)*c.g,c.r+c.g+c.b/1.25+time));\r\n\treturn dot(c*c,vec3(1.))-1.0;\r\n}\r\n\r\nvoid main(void) {\r\n    vec2 c=-1.+2.*gl_FragCoord.xy / resolution.xy;\r\n    vec3 o=vec3(c.r,c.g+cos(time/2.)/30.,0),g=vec3(c.r+cos(time)/30.,c.g,1)/64.;\r\n    float m=1.0;\r\n\tfloat t=0.0;\r\n    for(int j=0;j<333;j++) {\r\n        if( m>.4) {\r\n            t = (1.0+float(j))*2.0;\r\n   \t\t\tm = e(o+g*t);\r\n\t\t}\r\n    }\r\n    vec3 r=vec3(.1,0.,0.);\r\n\tvec3 n=m-vec3( e(vec3(o+g*t+r.rgg)),\r\n                   e(vec3(o+g*t+r.grg)),\r\n                   e(vec3(o+g*t+r.ggr)) );\r\n    vec3 v=vec3(dot(vec3(0,0,-.5),n)+dot(vec3(0.0,-.5,.5),n));\r\n    vec2 uv = gl_FragCoord.xy / resolution;\r\n    vec2 p = uv - 0.5;\r\n    p.x *= resolution.x / resolution.y;\r\n    float l = 0.1 * length(p);\r\n    float intensity = texture2D(spectrum, vec2(l, 0.5)).x;\r\n\tgl_FragColor=vec4(v + intensity * vec3(.1+cos(time/14.)/8.,.1,.1-cos(time/3.)/19.)*(t/41.),time);\r\n}\r\n`},{providerId:ud,name:"Quasicrystal by Ebanflo",externalUrl:`${cd}/4sXfzj`,shader:`${sd}// Quasicrystal by Ebanflo\r\n// https://www.shadertoy.com/view/4sXfzj\r\n\r\n\r\nconst int numWaves = 6;\r\nconst float numStripes = 1.0;\r\nconst float numFreqs = 8.0;\r\nconst float meanFreq = 4.0;\r\nconst float stdDev = 2.0;\r\nconst float period = 3.0;\r\nconst float pi = 4.0 * atan(1.0);\r\nconst float pi2 = 2.0 * pi;\r\nconst float ln2 = log(2.0);\r\nconst float mean = meanFreq * .69314718;\r\n\r\nfloat wavething(int n, float x) {\r\n    float l = ln2 * float(n) + log(x);\r\n    l -= mean;\r\n    return exp(-l * l / stdDev) / 2.0;\r\n}\r\n\r\nvoid main(void) {\r\n    gl_FragColor = vec4(0.0);\r\n    float scale = exp2(-fract(time / period));\r\n    float sum1 = 0.0;\r\n    for(int n = 0; n < int(numFreqs); n++){\r\n        sum1 += wavething(n, scale + 0.5*float(n));\r\n    }\r\n    vec2 xy = pi2 * numStripes\r\n        * ((2.0 * gl_FragCoord.xy - resolution.xy) / resolution.y);\r\n\r\n    float sum2 = 0.0;\r\n    for(int n = 0; n < numWaves; n++){\r\n        float theta = pi * float(n) / float(numWaves);\r\n        vec2 waveVec = vec2(cos(theta), sin(theta));\r\n        float phase = dot(xy, waveVec);\r\n        for(int k = 0; k < int(numFreqs); k++){\r\n            sum2 += cos(phase * scale * exp2(float(k))) * wavething(k, scale + 0.5*float(n));\r\n        }\r\n    }\r\n    gl_FragColor += vec4(1.0 - sum2 / sum1);\r\n    xy /= pi2 * numStripes;\r\n    float r = length(xy);\r\n    gl_FragColor.x *= texture2D(spectrum, vec2(.161616 * r, .2)).x;\r\n    gl_FragColor.y *= texture2D(spectrum, vec2(.161616 * r + .161616, .2)).x;\r\n    gl_FragColor.z *= texture2D(spectrum, vec2(.161616 * r + .333333, .2)).x;\r\n    gl_FragColor = 1.0 - gl_FragColor;\r\n    gl_FragColor = 1.0 - (r + 1.0) * gl_FragColor;\r\n    if(length(gl_FragColor) > 3.0) gl_FragColor = vec4(0.0);\r\n}\r\n`},{providerId:ud,name:"Rainbow by avin",externalUrl:`${cd}/ttfGzH`,shader:`${sd}// Rainbow by avin\r\n// https://www.shadertoy.com/view/ttfGzH\r\n\r\n\r\n#define PI 3.1415926\r\n#define PI2 6.2831852\r\n#define hue(h)clamp(abs(fract(h + vec4(3, 2, 1, 0) / 3.0) * 6.0 - 3.0) - 1.0 , 0.0, 1.0)\r\n\r\nvoid main(void) {\r\n    vec2 uv = (gl_FragCoord.xy - resolution.xy * 0.5) / resolution.y;\r\n    float CIRCLES = 20.0;\r\n    float cS = 0.375;\r\n    float sm = 1.0 / resolution.y * 2.0; // smooth\r\n    float ps = 1.0 / resolution.y * sqrt(resolution.y) * 0.225; // circle thin\r\n    float d = length(uv);\r\n    float a = atan(uv.y, uv.x);\r\n    a = a < 0.0 ? PI + (PI - abs(a)) : a;\r\n    float lPos = a /PI2;\r\n    float m = 0.0;\r\n    float partSize = 1.0 / CIRCLES;\r\n    vec3 col;\r\n    for (float i = 20.0; i > 1.0; i -= 1.0) {\r\n        float ilPos = fract(lPos + i*0.1 + time * 0.1);\r\n        float cPos = partSize * i + ilPos * partSize;\r\n        float invPos = partSize * (i + 1.0) - ilPos * partSize;\r\n        float nzF = (1.0 - ilPos);\r\n        float mP0 = texture2D(spectrum, vec2(partSize * i, 0.0)).x;\r\n        float mP = texture2D(spectrum, vec2(cPos, 0.0)).x;\r\n        float mPInv = texture2D(spectrum, vec2(invPos, 0.0)).x;\r\n        mP = (mP + mPInv) / 2.0;\r\n        float rDiff = i*(1.0 / CIRCLES * 0.35);\r\n        float r = mP * (1.0 / CIRCLES * 3.0) - rDiff;\r\n        float subm = smoothstep(cS - ps + r, cS - ps + sm + r, d) * smoothstep(cS + r, cS - sm + r, d);\r\n        if (subm > 0.0) {\r\n            col = hue(i / CIRCLES * 0.5 + time * 0.05 + mP0 * 0.84).rgb;\r\n        }\r\n        m += subm;\r\n    }\r\n    m = clamp(m, 0.0, 1.0);\r\n    float r = (sin(time * 0.5) * 0.5 + 0.5);\r\n    float b = (cos(time * 0.5) * 0.5 + 0.5);\r\n    vec3 backCol = vec3(r, 0.0, b) * length(uv * 0.75) * 0.5;\r\n    col = mix(backCol, col, m);\r\n    gl_FragColor = vec4(col, 1.0);\r\n}\r\n`},{providerId:ud,name:"Audio-Visualizer by CoolerZ",externalUrl:`${cd}/wd3XzS`,shader:`${sd}// Audio-Visualizer by CoolerZ\r\n// https://www.shadertoy.com/view/wd3XzS\r\n\r\n\r\nfloat sigmoid(float x) {\r\n    return 1. / (1. + exp(x));\r\n}\r\n\r\nvec3 sigmoid(vec3 xyz) {\r\n    return vec3(sigmoid(xyz.x), sigmoid(xyz.y), sigmoid(xyz.z));\r\n}\r\n\r\nfloat sample_at(float f) {\r\n    return texture2D(spectrum, vec2(f / 16.0, 0.)).x;\r\n}\r\n\r\nfloat sample_multiple(float f) {\r\n    float delta = .1;\r\n    return 0.2 * (sample_at(f - 2. * delta) + sample_at(f - delta) + sample_at(f) + sample_at(f + delta) + sample_at(f + 2. * delta));\r\n}\r\n\r\nvoid main(void) {\r\n    vec2 uv = (gl_FragCoord.xy - 0.5) / resolution.xy;\r\n    uv = 2. * uv - 1.;\r\n    uv.x *= resolution.x/resolution.y;\r\n    vec2 center = vec2(0.);// 0.5 * vec2(cos(time), sin(time));\r\n    float d = length(uv - center);\r\n    float amplitude = sample_multiple(d * d);\r\n    d -= amplitude;\r\n    float weird = sigmoid(abs(uv.x) * abs(uv.y));\r\n    float speed = 6. * amplitude * sin(time * weird * 0.005) * 0.001;\r\n    float dist_diagonal = abs(abs(uv.x) - abs(uv.y));\r\n    dist_diagonal += d * amplitude;\r\n    dist_diagonal *= dist_diagonal;\r\n    amplitude += .1 / (.1 + smoothstep(1., 0.1, dist_diagonal));\r\n    float brightness = 3. * amplitude * sigmoid(sin(d * d * 16. - speed * time + 2. * speed * amplitude));\r\n    vec3 col = sigmoid(vec3(uv, sin(time)));\r\n    gl_FragColor = vec4(col * brightness,1.0);\r\n}`},{providerId:ud,name:"Radiant by TekF",externalUrl:`${cd}/4sVBWy`,shader:`${sd}// Radiant by TekF\r\n// https://www.shadertoy.com/view/4sVBWy\r\n\r\n\r\n// Radiant Music Visualiser\r\n// by Hazel Quantock 2018\r\n// This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. http://creativecommons.org/licenses/by-nc-sa/4.0/\r\n\r\nvoid main(void) {\r\n    vec2 uv = (gl_FragCoord.xy*2.-iResolution.xy)/iResolution.y;\r\n    float l = length(uv)/length(iResolution.xy/iResolution.y);\r\n    float a = atan(uv.x,uv.y)+iTime;\r\n    float s = texture(iChannel0,vec2(abs(fract(5.*a/6.283)*2.-1.),.75)).r;\r\n    // float A = .16;\r\n    // float B = .2025;\r\n    float A = .4;\r\n    float B = .45;\r\n    if (iMouse.z > 0.) {\r\n        A = iMouse.x / iResolution.x; // strength of chromatic dispersion\r\n        B = iMouse.y / iResolution.y; // strength of waveform\r\n    }\r\n    A *= A; // apply a curve so mouse movements feel better\r\n    B *= B;\r\n    gl_FragColor.r = texture(iChannel0,vec2(pow(mix(mix(l,.0,A),    s ,B),2.),.25)).r;\r\n    gl_FragColor.g = texture(iChannel0,vec2(pow(mix(mix(l,.5,A),(1.-s),B),2.),.25)).r;\r\n    gl_FragColor.b = texture(iChannel0,vec2(pow(mix(mix(l,1.,A),    s ,B),2.),.25)).r;\r\n    // tweak the contrast\r\n    gl_FragColor.rgb = smoothstep(.05,1.,gl_FragColor.rgb+.2*l);\r\n    gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(2));\r\n    gl_FragColor.a = 1.;\r\n}\r\n`},{providerId:ud,name:"ambilight 2.0 by MillhausVKodi",externalUrl:`${cd}/ltc3WH`,shader:`${sd}// ambilight 2.0 by MillhausVKodi\r\n// https://www.shadertoy.com/view/ltc3WH\r\n\r\n\r\nconst float bands = 20.0;\r\nconst float leds = 25.0;\r\nconst float colorRange = 0.3; // >0. (=1. full color range, >1. repeat colors)\r\n\r\n//convert HSV to RGB\r\nvec3 hsv2rgb(vec3 c) {\r\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\r\n}\r\n\r\nvoid main(void) {\r\n    // middle = (0/0)\r\n    vec2 k=(gl_FragCoord.xy-.5*resolution.xy)/(max(resolution.x,resolution.y));\r\n    //distance from the middle\r\n    float dis = distance(k , vec2(0));\r\n    //and approximated by "leds"\r\n    float disA = floor(dis*leds)/leds;\r\n    //disA = dis;\r\n    //degree from bottom 0 and top 1.0.  /left right symmetric\r\n    float deg = acos(k.y/dis)/3.14;\r\n    //and approximated by "bands"\r\n    float degA = floor(deg*bands)/bands;\r\n    //colorwheel, dark in the middle, changing colors over time\r\n    vec3 color = hsv2rgb(  vec3( degA*colorRange + time*0.07 , 1.0 , smoothstep(0.0, 0.6, disA) )  );\r\n\t//brightness of a band by fourier (degree to frequency / magnitude to brightness)\r\n    float bandBrightness = texture2D(spectrum, vec2(degA,0.25)).x;\r\n    //more blinky blinky x^2\r\n    color*=bandBrightness*bandBrightness;\r\n    //brighter\r\n    color*=4.;\r\n    float deltaDeg = fract((deg-degA)*bands) - 0.5;\r\n    float deltaDis = fract((dis-disA)*leds) - 0.5;\r\n    float shape = smoothstep(0.5, 0.35, abs(deltaDeg)) * smoothstep(0.5, 0.35, abs(deltaDis));\r\n    color*=shape;\r\n    gl_FragColor = vec4(color, 1.0);\r\n}\r\n`},{providerId:ud,name:"dot grid thing by laney",externalUrl:`${cd}/Xd2cRG`,shader:`${sd}// dot grid thing by laney\r\n// https://www.shadertoy.com/view/Xd2cRG\r\n\r\n\r\nfloat circle(vec2 p, float radius) {\r\n \treturn length(p)-radius;\r\n}\r\n\r\nvec2 dist(vec2 p, vec2 ns, vec2 split, float totalSquares) {\r\n \tfloat amp1 = texture2D(spectrum, vec2((ns.x + ns.y*split.x)/totalSquares, 0.25)).x;\r\n    float amp2 = texture2D(spectrum, vec2(mod(ns.x + ns.y*split.x +1., totalSquares)/totalSquares, 0.25)).x;\r\n \treturn vec2(circle(p, 0.5 + 0.9*amp1), circle(p, 0.40 + 0.60*amp2));\r\n}\r\n\r\nfloat smin( float a, float b, float k ) {\r\n    float res = exp( -k*a ) + exp( -k*b );\r\n    return -log( res )/k;\r\n}\r\n\r\nconst float ySplit = 10.0;\r\n\r\nvoid main(void) {\r\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    vec2 aspect = vec2(resolution.x/resolution.y, 1.0);\r\n    vec2 split = vec2(floor(aspect*vec2(ySplit)));\r\n    float totalSquares = split.x*split.y;\r\n\tvec2 ns = floor(uv*split);\r\n    vec2 p = vec2(fract(uv*split))*2.0-vec2(1.0);\r\n   \tvec2 c = dist(p, ns, split, totalSquares);\r\n   \tvec2 w = dist(p+vec2(2.0,0.0), ns+vec2(-1.0,0.0), split, totalSquares);\r\n   \tvec2 nw = dist(p+vec2(2.0,-2.0), ns+vec2(-1.0,1.0), split, totalSquares);\r\n   \tvec2 ne = dist(p+vec2(-2.0,-2.0), ns+vec2(1.0,1.0), split, totalSquares);\r\n   \tvec2 sw = dist(p+vec2(2.0,2.0), ns+vec2(-1.0,-1.0), split, totalSquares);\r\n   \tvec2 se = dist(p+vec2(-2.0,2.0), ns+vec2(1.0,-1.0), split, totalSquares);\r\n   \tvec2 e = dist(p+vec2(-2.0,0.0), ns+vec2(1.0,0.0), split, totalSquares);\r\n   \tvec2 s = dist(p+vec2(0.0,2.0), ns+vec2(0.,-1.0), split, totalSquares);\r\n   \tvec2 n = dist(p+vec2(0.0,-2.0), ns+vec2(0.,1.0), split, totalSquares);\r\n    float k = 3.0;\r\n    float d1 = smin(c.x, w.x, k);\r\n    d1 = smin(d1, e.x, k);\r\n    d1 = smin(d1, n.x, k);\r\n    d1 = smin(d1, s.x, k);\r\n    d1 = smin(d1, nw.x, k);\r\n    d1 = smin(d1, ne.x, k);\r\n    d1 = smin(d1, sw.x, k);\r\n    d1 = smin(d1, se.x, k);\r\n    float d2 = smin(c.y, w.y, k);\r\n    d2 = smin(d2, e.y, k);\r\n    d2 = smin(d2, n.y, k);\r\n    d2 = smin(d2, s.y, k);\r\n    d2 = smin(d2, nw.y, k);\r\n    d2 = smin(d2, ne.y, k);\r\n    d2 = smin(d2, sw.y, k);\r\n    d2 = smin(d2, se.y, k);\r\n\tgl_FragColor =\r\n        vec4(0.1,0.1,0.1,1.0) *  (1.0 - d1) +\r\n        vec4(.3,0.5,0.3,1.0) *  (1.0 - smoothstep(0., 0.15, d1)) +\r\n        vec4(0.5,0.2,0.1,1.0) *  (1.0 - smoothstep(0., 0.1, d2));\r\n}\r\n`},{providerId:ud,name:"Bubbles by liyouvane",externalUrl:`${cd}/llXBWB`,shader:`${sd}// Bubbles by liyouvane\r\n// https://www.shadertoy.com/view/llXBWB\r\n\r\n\r\n#define SHOW_BLOCKS\r\n\r\nvec4 mod289(vec4 x) {\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec4 permute(vec4 x) {\r\n    return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 taylorInvSqrt(vec4 r) {\r\n    return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nvec2 fade(vec2 t) {\r\n    return t*t*t*(t*(t*6.0-15.0)+10.0);\r\n}\r\n\r\n// Classic Perlin noise\r\nfloat cnoise(vec2 P) {\r\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\r\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\r\n    Pi = mod289(Pi); // To avoid truncation effects in permutation\r\n    vec4 ix = Pi.xzxz;\r\n    vec4 iy = Pi.yyww;\r\n    vec4 fx = Pf.xzxz;\r\n    vec4 fy = Pf.yyww;\r\n    vec4 i = permute(permute(ix) + iy);\r\n    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0;\r\n    vec4 gy = abs(gx) - 0.5;\r\n    vec4 tx = floor(gx + 0.5);\r\n    gx = gx - tx;\r\n    vec2 g00 = vec2(gx.x,gy.x);\r\n    vec2 g10 = vec2(gx.y,gy.y);\r\n    vec2 g01 = vec2(gx.z,gy.z);\r\n    vec2 g11 = vec2(gx.w,gy.w);\r\n    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\r\n    g00 *= norm.x;\r\n    g01 *= norm.y;\r\n    g10 *= norm.z;\r\n    g11 *= norm.w;\r\n    float n00 = dot(g00, vec2(fx.x, fy.x));\r\n    float n10 = dot(g10, vec2(fx.y, fy.y));\r\n    float n01 = dot(g01, vec2(fx.z, fy.z));\r\n    float n11 = dot(g11, vec2(fx.w, fy.w));\r\n    vec2 fade_xy = fade(Pf.xy);\r\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\r\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\r\n    return 2.3 * n_xy;\r\n}\r\n\r\nfloat rand(float x) {\r\n    return fract(sin(x) * 4358.5453123);\r\n}\r\n\r\nfloat rand(vec2 co) {\r\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5357);\r\n}\r\n\r\nfloat circle(vec2 p, vec2 b, float r) {\r\n    return length(p-b)-r;\r\n}\r\n\r\nfloat box(vec2 p, vec2 b, float r) {\r\n    return length(max(abs(p)-b,0.0))-r;\r\n}\r\n\r\nfloat sampleMusic() {\r\n\treturn 0.5 * (\r\n//\t\ttexture2D( spectrum, vec2( 0.01, 0.25 ) ).x +\r\n//\t\ttexture2D( spectrum, vec2( 0.07, 0.25 ) ).x +\r\n\t\ttexture2D( spectrum, vec2( 0.15, 0.25 ) ).x +\r\n\t\ttexture2D( spectrum, vec2( 0.30, 0.25 ) ).x);\r\n}\r\n\r\nvoid main(void) {\r\n\tconst float speed = 0.4;\r\n\tconst float ySpread = 1.6;\r\n\tconst int numBlocks = 30;\r\n\tconst int numBubbles = 50;\r\n\tfloat pulse = sampleMusic();\r\n\r\n\tvec2 uv = gl_FragCoord.xy / resolution.xy - 0.5;\r\n\tfloat aspect = resolution.x / resolution.y;\r\n\tvec3 baseColor = uv.x > 0.0 ? vec3(0.0,0.3, 0.3) : vec3(0.3, 0.0, 0.3);\r\n\r\n\tvec3 color = 5. * pulse*baseColor*0.5*(0.9-cos(uv.x*8.0));\r\n\tuv.x *= aspect;\r\n\r\n\tfor (int i = 0; i < numBubbles; i++) {\r\n\t\tfloat z = 1.0-0.7*rand(float(i)*1.4333); // 0=far, 1=near\r\n\t\tfloat tickTime = time*z*speed + float(i)*1.23753;\r\n\t\tfloat tick = floor(tickTime);\r\n\r\n\t\tvec2 pos = vec2(0.6*aspect*(rand(tick)-0.5), -abs(sign(uv.x))*ySpread*(0.5-fract(tickTime)));\r\n\t\tpos.x += 0.18*sign(pos.x); // move aside\r\n\t\tif (abs(pos.x) < 0.1) pos.x++; // stupid fix; sign sometimes returns 0\r\n\r\n\t\tvec2 size = 1.8*z*vec2(0.04, 0.04 + 0.1*rand(tick+0.2));\r\n\t\tfloat b = circle(uv, pos, 0.01 + 0.15 * pulse);\r\n\t\tfloat dust = z*smoothstep(0.22, 0.0, b)*pulse*0.5;\r\n\t\tfloat block = 0.2*z*smoothstep(0.012, 0.0, b);\r\n\t\tfloat shine = 0.6*z*pulse*smoothstep(-0.002, b, 0.007);\r\n        float u_Scale = 9.;\r\n        float noise = sin(abs(cnoise(u_Scale * uv.xy)+0.5*cnoise(2. * u_Scale * uv.xy)+0.25*cnoise(4. * u_Scale * uv.xy)+0.125*cnoise(8. * u_Scale * uv.xy)));\r\n\t\tcolor += dust*baseColor*(1.+3. * noise) + block*z + shine;\r\n\t}\r\n    baseColor = vec3(0.1, 0.3, 0.0);\r\n    for (int i = 0; i < numBlocks; i++) {\r\n\t\tfloat z = 1.0-0.7*rand(float(i)*1.4333); // 0=far, 1=near\r\n\t\tfloat tickTime = time*z*speed + float(i)*1.23753;\r\n\t\tfloat tick = floor(tickTime);\r\n\r\n\t\tvec2 pos = vec2(0.6*aspect*(rand(tick)-0.5), -abs(sign(uv.x))*ySpread*(0.5-fract(tickTime)));\r\n\t\tpos.x += 0.24*sign(pos.x); // move aside\r\n\t\tif (abs(pos.x) < 0.1) pos.x++; // stupid fix; sign sometimes returns 0\r\n\r\n\t\tvec2 size = 1.8*z*vec2(0.04, 0.04 + 0.1*rand(tick+0.2));\r\n\t\tfloat b = circle(uv-pos, size, 0.02);\r\n\t\tfloat dust = z*smoothstep(0.22, 0.0, b)*pulse*0.5;\r\n\t\tfloat block = 0.2*z*smoothstep(0.002, 0.0, b);\r\n\t\tfloat shine = 0.6*z*pulse*smoothstep(-0.002, b, 0.007);\r\n        float u_Scale = 9.;\r\n        float noise = sin(abs(cnoise(u_Scale * uv.xy)+0.5*cnoise(2. * u_Scale * uv.xy)+0.25*cnoise(4. * u_Scale * uv.xy)+0.125*cnoise(8. * u_Scale * uv.xy)));\r\n\t\tcolor += dust*baseColor*(1.+noise) + block*z + shine;\r\n\t}\r\n\tcolor /= 1.5;\r\n\tcolor -= rand(uv)*0.04;\r\n\tgl_FragColor = vec4(color, 1.0);\r\n}\r\n`},{providerId:ud,name:"Soap Bubble by Ruzzyr",externalUrl:`${cd}/XtVSDt`,shader:`${sd}// Soap Bubble by Ruzzyr\r\n// https://www.shadertoy.com/view/XtVSDt\r\n\r\n\r\nmat3 rotateYmat(float ang) {\r\n    return mat3(cos(ang), 0.0, sin(ang), 0.0, 1.0, 0.0, -sin(ang), 0.0, cos(ang));\r\n}\r\n\r\nmat3 rotateXmat(float ang) {\r\n    return mat3(1.0, -0.0, 0.0, 0.0, cos(ang), -sin(ang), 0.0, sin(ang), cos(ang));\r\n}\r\n\r\nmat3 rotateZmat(float ang) {\r\n    return mat3(cos(ang), -sin(ang), 0.0, sin(ang), cos(ang), 0.0, 0.0, 0.0, 1.0);\r\n}\r\n\r\nfloat map( vec3 p, vec3 origin, float s ) {\r\n    vec3 offset = vec3(sin(p.x*2. + time*2.),cos(p.z*10. + time*2.),1.0)*0.1;\r\n\tfloat d = length(p + offset - origin)- s;\r\n\toffset = vec3(sin(p.x*3. + time*2.),cos(p.z*2. + time*2.),1.0)*0.2;\r\n    for(int i = 0; i < 3; i++) {\r\n        float prism2 = length(p + offset*float(i) - origin)- s;\r\n        d = max(d, -prism2);\r\n    }\r\n  \treturn d;\r\n}\r\n\r\nvoid main(void) {\r\n    vec2 uv = gl_FragCoord.xy/resolution.xy;\r\n    uv = uv*2.0-1.0;\r\n    uv.x *= resolution.x/resolution.y;\r\n    mat3 rotation = //mat3(1.0);\r\n      rotateXmat(time*0.4)*rotateYmat(time*0.5);\r\n    vec3 direction = normalize(vec3(uv.x,uv.y, 1.0)*rotation);\r\n    float t = 0.0;\r\n\tvec3 p;\r\n    vec3 finalColor;\r\n    vec3 origin = vec3(0.,0.,-4.)*rotation;\r\n    vec3 offset;\r\n    vec3 sphereOrigin = vec3(0., 0., 0.0);\r\n    vec4 sound = texture2D(spectrum,vec2(gl_FragCoord.x/resolution.x, 0.75));\r\n    float soundColor = texture2D(spectrum,vec2(0.5, 0.75)).x;\r\n    vec3 color = vec3(.5 + sin(uv.x+time +soundColor*50.)*.4,.5 +cos(uv.y+time + soundColor*5.)*.5,.5);\r\n    for (int k = 0; k <15; k++) {\r\n        p = origin + t*direction;\r\n        float d = map(p,sphereOrigin, 2.0);\r\n        {\r\n            vec3 directionalOffset = -normalize(p)*sound.x*normalize(vec3(uv, 1.0));\r\n            vec3 position = p + directionalOffset;\r\n            float radius = 0.1+float(k)*.5;\r\n            float lineThickness = 0.02 + float(k)*0.01;\r\n            //position.y += position.y*abs(uv.x);\r\n            float distanceFromCenter = length(position);\r\n            float condition = step( distanceFromCenter, radius)\r\n                - step(distanceFromCenter, radius - lineThickness);\r\n            finalColor += color*condition;\r\n        }\r\n        t += d;\r\n    }\r\n    float fog = 1.0/(1.0+t*t*0.1);\r\n    gl_FragColor = vec4(finalColor+color*vec3(fog), fog);\r\n}\r\n`},{providerId:ud,name:"Fractal Land by Kali",externalUrl:`${cd}/XsBXWt`,shader:`${sd}// Fractal Land by Kali\r\n// https://www.shadertoy.com/view/XsBXWt\r\n\r\n\r\n// "Fractal Cartoon" - former "DE edge detection" by Kali\r\n\r\n// There are no lights and no AO, only color by normals and dark edges.\r\n\r\n\r\n//#define SHOWONLYEDGES\r\n#define WAVES\r\n#define BORDER\r\n\r\n#define RAY_STEPS 150\r\n\r\n#define BRIGHTNESS 1.2\r\n#define GAMMA 1.4\r\n#define SATURATION .65\r\n\r\n\r\n#define detail .001\r\n#define t time*.5\r\n\r\n\r\nconst vec3 origin=vec3(-1.,.7,0.);\r\nfloat det=0.0;\r\n\r\n\r\n// 2D rotation function\r\nmat2 rot(float a) {\r\n\treturn mat2(cos(a),sin(a),-sin(a),cos(a));\r\n}\r\n\r\n// "Amazing Surface" fractal\r\nvec4 formula(vec4 p) {\r\n\t\tp.xz = abs(p.xz+1.)-abs(p.xz-1.)-p.xz;\r\n\t\tp.y-=.25;\r\n\t\tp.xy*=rot(radians(35.));\r\n\t\tp=p*2./clamp(dot(p.xyz,p.xyz),.2,1.);\r\n\treturn p;\r\n}\r\n\r\n// Distance function\r\nfloat de(vec3 pos) {\r\n#ifdef WAVES\r\n\tpos.y+=sin(pos.z-t*6.)*.15; //waves!\r\n#endif\r\n\tfloat hid=0.;\r\n\tvec3 tpos=pos;\r\n\ttpos.z=abs(3.-mod(tpos.z,6.));\r\n\tvec4 p=vec4(tpos,1.);\r\n\tfor (int i=0; i<4; i++) {p=formula(p);}\r\n\tfloat fr=(length(max(vec2(0.),p.yz-1.5))-1.)/p.w;\r\n\tfloat ro=max(abs(pos.x+1.)-.3,pos.y-.35);\r\n\t\t  ro=max(ro,-max(abs(pos.x+1.)-.1,pos.y-.5));\r\n\tpos.z=abs(.25-mod(pos.z,.5));\r\n\t\t  ro=max(ro,-max(abs(pos.z)-.2,pos.y-.3));\r\n\t\t  ro=max(ro,-max(abs(pos.z)-.01,-pos.y+.32));\r\n\tfloat d=min(fr,ro);\r\n\treturn d;\r\n}\r\n\r\n\r\n// Camera path\r\nvec3 path(float ti) {\r\n\tti*=1.5;\r\n\tvec3  p=vec3(sin(ti),(1.-sin(ti*2.))*.5,-ti*5.)*.5;\r\n\treturn p;\r\n}\r\n\r\n// Calc normals, and here is edge detection, set to variable "edge"\r\n\r\nfloat edge=0.;\r\nvec3 normal(vec3 p) {\r\n\tvec3 e = vec3(0.0,det*5.,0.0);\r\n\r\n\tfloat d1=de(p-e.yxx),d2=de(p+e.yxx);\r\n\tfloat d3=de(p-e.xyx),d4=de(p+e.xyx);\r\n\tfloat d5=de(p-e.xxy),d6=de(p+e.xxy);\r\n\tfloat d=de(p);\r\n\tedge=abs(d-0.5*(d2+d1))+abs(d-0.5*(d4+d3))+abs(d-0.5*(d6+d5));//edge finder\r\n\tedge=min(1.,pow(edge,.55)*15.);\r\n\treturn normalize(vec3(d1-d2,d3-d4,d5-d6));\r\n}\r\n\r\n\r\n// Used Nyan Cat code by mu6k, with some mods\r\n\r\nvec4 rainbow(vec2 p)\r\n{\r\n\tfloat q = max(p.x,-0.1);\r\n\tfloat s = sin(p.x*7.0+t*70.0)*0.08;\r\n\tp.y+=s;\r\n\tp.y*=1.1;\r\n\r\n\tvec4 c;\r\n\tif (p.x>0.0) c=vec4(0,0,0,0); else\r\n\tif (0.0/6.0<p.y&&p.y<1.0/6.0) c= vec4(255,43,14,255)/255.0; else\r\n\tif (1.0/6.0<p.y&&p.y<2.0/6.0) c= vec4(255,168,6,255)/255.0; else\r\n\tif (2.0/6.0<p.y&&p.y<3.0/6.0) c= vec4(255,244,0,255)/255.0; else\r\n\tif (3.0/6.0<p.y&&p.y<4.0/6.0) c= vec4(51,234,5,255)/255.0; else\r\n\tif (4.0/6.0<p.y&&p.y<5.0/6.0) c= vec4(8,163,255,255)/255.0; else\r\n\tif (5.0/6.0<p.y&&p.y<6.0/6.0) c= vec4(122,85,255,255)/255.0; else\r\n\tif (abs(p.y)-.05<0.0001) c=vec4(0.,0.,0.,1.); else\r\n\tif (abs(p.y-1.)-.05<0.0001) c=vec4(0.,0.,0.,1.); else\r\n\t\tc=vec4(0,0,0,0);\r\n\tc.a*=.8-min(.8,abs(p.x*.08));\r\n\tc.xyz=mix(c.xyz,vec3(length(c.xyz)),.15);\r\n\treturn c;\r\n}\r\n\r\n\r\n// Raymarching and 2D graphics\r\n\r\nvec3 raymarch(in vec3 from, in vec3 dir)\r\n\r\n{\r\n\tedge=0.;\r\n\tvec3 p, norm;\r\n\tfloat d=100.;\r\n\tfloat totdist=0.;\r\n\tfor (int i=0; i<RAY_STEPS; i++) {\r\n\t\tif (d>det && totdist<25.0) {\r\n\t\t\tp=from+totdist*dir;\r\n\t\t\td=de(p);\r\n\t\t\tdet=detail*exp(.13*totdist);\r\n\t\t\ttotdist+=d;\r\n\t\t}\r\n\t}\r\n\tvec3 col=vec3(0.);\r\n\tp-=(det-d)*dir;\r\n\tnorm=normal(p);\r\n#ifdef SHOWONLYEDGES\r\n\tcol=1.-vec3(edge); // show wireframe version\r\n#else\r\n\tcol=(1.-abs(norm))*max(0.,1.-edge*.8); // set normal as color with dark edges\r\n#endif\r\n\ttotdist=clamp(totdist,0.,26.);\r\n\tdir.y-=.02;\r\n\tfloat sunsize=7.-max(0.,texture2D(spectrum,vec2(.6,.2)).x)*5.; // responsive sun size\r\n\tfloat an=atan(dir.x,dir.y)+time*1.5; // angle for drawing and rotating sun\r\n\tfloat s=pow(clamp(1.0-length(dir.xy)*sunsize-abs(.2-mod(an,.4)),0.,1.),.1); // sun\r\n\tfloat sb=pow(clamp(1.0-length(dir.xy)*(sunsize-.2)-abs(.2-mod(an,.4)),0.,1.),.1); // sun border\r\n\tfloat sg=pow(clamp(1.0-length(dir.xy)*(sunsize-4.5)-.5*abs(.2-mod(an,.4)),0.,1.),3.); // sun rays\r\n\tfloat y=mix(.45,1.2,pow(smoothstep(0.,1.,.75-dir.y),2.))*(1.-sb*.5); // gradient sky\r\n\r\n\t// set up background with sky and sun\r\n\tvec3 backg=vec3(0.5,0.,1.)*((1.-s)*(1.-sg)*y+(1.-sb)*sg*vec3(1.,.8,0.15)*3.);\r\n\t\t backg+=vec3(1.,.9,.1)*s;\r\n\t\t backg=max(backg,sg*vec3(1.,.9,.5));\r\n\r\n\tcol=mix(vec3(1.,.9,.3),col,exp(-.004*totdist*totdist));// distant fading to sun color\r\n\tif (totdist>25.) col=backg; // hit background\r\n\tcol=pow(col,vec3(GAMMA))*BRIGHTNESS;\r\n\tcol=mix(vec3(length(col)),col,SATURATION);\r\n#ifdef SHOWONLYEDGES\r\n\tcol=1.-vec3(length(col));\r\n#else\r\n\tcol*=vec3(1.,.9,.85);\r\n#endif\r\n\treturn col;\r\n}\r\n\r\n// get camera position\r\nvec3 move(inout vec3 dir) {\r\n\tvec3 go=path(t);\r\n\tvec3 adv=path(t+.7);\r\n\tfloat hd=de(adv);\r\n\tvec3 advec=normalize(adv-go);\r\n\tfloat an=adv.x-go.x; an*=min(1.,abs(adv.z-go.z))*sign(adv.z-go.z)*.7;\r\n\tdir.xy*=mat2(cos(an),sin(an),-sin(an),cos(an));\r\n    an=advec.y*1.7;\r\n\tdir.yz*=mat2(cos(an),sin(an),-sin(an),cos(an));\r\n\tan=atan(advec.x,advec.z);\r\n\tdir.xz*=mat2(cos(an),sin(an),-sin(an),cos(an));\r\n\treturn go;\r\n}\r\n\r\nvoid main(void)\r\n{\r\n\tvec2 uv = gl_FragCoord.xy / resolution.xy*2.-1.;\r\n\tvec2 oriuv=uv;\r\n\tuv.y*=resolution.y/resolution.x;\r\n\tfloat fov=.9-max(0.,.7-time*.3);\r\n\tvec3 dir=normalize(vec3(uv*fov,1.));\r\n\tvec3 from=origin+move(dir);\r\n\tvec3 color=raymarch(from,dir);\r\n\t#ifdef BORDER\r\n\tcolor=mix(vec3(0.),color,pow(max(0.,.95-length(oriuv*oriuv*oriuv*vec2(1.05,1.1))),.3));\r\n\t#endif\r\n\tgl_FragColor = vec4(color,1.);\r\n}\r\n`},{providerId:ud,name:"Music MandelBox Colour by pixelbeast",externalUrl:`${cd}/4s33Rj`,shader:`${sd}// Music MandelBox Colour by pixelbeast\r\n// https://www.shadertoy.com/view/4s33Rj\r\n\r\n\r\n// Iain Melvin, 2015\r\n// fft distortions of mandlebox 3d, colour\r\n// with help from:\r\n// https://www.shadertoy.com/view/XsB3Rm  // Original Raymarch tutorial (iq)\r\n// https://www.shadertoy.com/view/ldSGRK  // for mandlebox formula (klems)\r\n// Raymarch tutorial: - iq/2013\r\n\r\n\r\nfloat mandel3D(vec3 z,float fft) {\r\n  const float scale=3.5; //2.0; // -1.5\r\n  const float r=0.5;\r\n  const float f=1.125;\r\n  vec3 offset = z;\r\n  const int niter = 13;\r\n  float dr = 1.0;\r\n  for (int i=0;i<niter;i++){\r\n\t//fold\r\n\tz = clamp(z, -1.0, 1.0) * 2.0 - z;\r\n\t//warp\r\n\tfloat l = length(z);\r\n\tif (l<r){\r\n\t  z/=r*r;\r\n\t}else if (l<1.0){\r\n\t  z/=l*l;\r\n\t}\r\n\tz*=scale;\r\n\tdr = dr * abs(scale) + 1.0;\r\n\t// scale by fft\r\n\tfloat fft_scale = 1.0-(fft*0.34);\r\n\tz*=fft_scale;\r\n\t//dr = dr * fft_scale; // I think there is something to do here\r\n\tz+=offset;\r\n  }\r\n  float zr = length(z);\r\n  return zr / abs(dr);\r\n}\r\n\r\nvec2 map( in vec3 pos ) {\r\n    float d = length(pos);\r\n    float fft = 0.8*texture2D(spectrum, vec2((d/32.0),0.3) )[0];\r\n\treturn vec2(mandel3D(pos*1.5,fft),fft);\r\n}\r\n\r\nvec2 castRay( in vec3 ro, in vec3 rd, in float maxd ){\r\n\tfloat precis = 0.015;\r\n    float h=precis*2.0;\r\n    float t = 0.0;\r\n    float m = -1.0;\r\n    for( int i=0; i<120; i++ )\r\n    {\r\n        if( abs(h)<precis||t>maxd ) break;\r\n        t += h;\r\n\t    vec2 res = map( ro+rd*t );\r\n        h = res.x; //dist to solid\r\n\t    m = res.y; //fft\r\n    }\r\n    if (t>maxd) { t=-0.5; m=0.0; }\r\n    return vec2( t, m );\r\n}\r\n\r\nvec3 calcNormal( in vec3 pos ){\r\n\tvec3 eps = vec3( 0.001, 0.0, 0.0 );\r\n\tvec3 nor = vec3(\r\n\t    map(pos+eps.xyy).x - map(pos-eps.xyy).x,\r\n\t    map(pos+eps.yxy).x - map(pos-eps.yxy).x,\r\n\t    map(pos+eps.yyx).x - map(pos-eps.yyx).x );\r\n\treturn normalize(nor);\r\n}\r\n\r\n// iq's smooth hsv to rgb\r\nvec3 hsv2rgb( in vec3 c ) {\r\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\r\n\trgb = rgb*rgb*(3.0-2.0*rgb);\r\n\treturn c.z * mix( vec3(1.0), rgb, c.y);\r\n}\r\n\r\nvec3 render( in vec3 ro, in vec3 rd ) {\r\n    vec3 col = vec3(0.0);\r\n    vec2 res = castRay(ro,rd,15.0);\r\n    float t = res.x; // dist to func\r\n\tfloat m = res.y; // fft intense at collision\r\n    vec3 pos = ro + t*rd;\r\n    vec3 nor = calcNormal( pos );\r\n    if (t==-0.5) { nor=vec3(1.0,0.0,0.0); }\r\n\r\n\tcol = hsv2rgb(vec3(m*2.0,1.0,1.0)); // hue sat lum\r\n\r\n    float ao = 1.0;\r\n\r\n\tvec3 lig = normalize( vec3(-0.6, 0.7, -0.5) );\r\n\tfloat amb = clamp( 0.5+0.5*nor.y, 0.0, 1.0 );\r\n    float dif = clamp( dot( nor, lig ), 0.0, 1.0 );\r\n    float bac = clamp( dot( nor, normalize(vec3(-lig.x,0.0,-lig.z))), 0.0, 1.0 )*clamp( 1.0-pos.y,0.0,1.0);\r\n\tfloat sh = 1.0;\r\n\r\n\tvec3 brdf = vec3(0.0);\r\n\tbrdf += 0.20*amb*vec3(0.10,0.11,0.13)*ao;\r\n    brdf += 0.20*bac*vec3(0.15,0.15,0.15)*ao;\r\n    brdf += 2.20*dif*vec3(1.00,0.90,0.70);\r\n\r\n\tfloat pp = clamp( dot( reflect(rd,nor), lig ), 0.0, 1.0 );\r\n\tfloat spe = sh*pow(pp,16.0);\r\n\tfloat fre = ao*pow( clamp(1.0+dot(nor,rd),0.0,1.0), 2.0 );\r\n\r\n\tcol = col*brdf + vec3(1.0)*col*spe + 0.2*fre*(0.5+0.5*col);\r\n\r\n\treturn vec3( clamp(col,0.0,10.0) );\r\n}\r\n\r\nvoid main(void) {\r\n\tvec2 q = gl_FragCoord.xy/resolution.xy;\r\n    vec2 p = -1.0+2.0*q;\r\n\tp.x *= resolution.x/resolution.y;\r\n    vec2 mo = resolution.xy/resolution.xy;\r\n\r\n\tfloat time = -55.0; //+ time;\r\n\r\n    vec3 d = vec3(0.25*mo.x,0.25*mo.y,0.0);\r\n\r\n    d.x += 5.5*(1.0-cos(0.6*time));\r\n    d.y += 2.5*(1.0-cos(0.05*time));\r\n\r\n\t// camera\r\n\tvec3 ro = vec3( d.x, d.y, 6.0 );\r\n    vec3 ta = vec3( -0.0, -0.0, 0.0 );\r\n\r\n\t// camera tx\r\n\tvec3 cw = normalize( ta-ro );\r\n\tvec3 cp = vec3( 0.0, 1.0, 0.0 );\r\n\tvec3 cu = normalize( cross(cw,cp) );\r\n\tvec3 cv = normalize( cross(cu,cw) );\r\n\tvec3 rd = normalize( p.x*cu + p.y*cv + 2.0*cw );\r\n\r\n    vec3 col = render( ro, rd );\r\n\tcol = sqrt( col );\r\n\r\n    gl_FragColor=vec4( col, 1.0 );\r\n}\r\n`},{providerId:ud,name:"FFT-IFS by nshelton",externalUrl:`${cd}/4lyXWW`,shader:`${sd}// FFT-IFS by nshelton\r\n// https://www.shadertoy.com/view/4lyXWW\r\n\r\n\r\n//#define MAX_ITER 20\r\n#define MAX_ITER 50\r\n\r\nmat3 rotationMatrix(vec3 axis, float angle) {\r\n    float s = sin(angle);\r\n    float c = cos(angle);\r\n    float oc = 1.0 - c;\r\n\r\n    return mat3(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,\r\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,\r\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c);\r\n}\r\n\r\nfloat udBox( vec3 p, vec3 b )\r\n{\r\n  return length(max(abs(p)-b,0.0));\r\n}\r\n\r\nmat3 ir;\r\n\r\nfloat DE(vec3 p)\r\n{\r\n\tvec3 p_o = p;\r\n    float d = 1e10;\r\n\r\n    float s = 1.; //sin(time /60.0) / 10.0 + 0.6;\r\n    vec3 t = vec3(0.1 + 0.2 * resolution.xy/resolution.xy, 0.1 + 0.1 * sin(time/200.));\r\n\r\n    float fftVal = texture2D(spectrum,vec2(length(p/5.), 0.2)).x *0.1;\r\n    vec3 dim = vec3( fftVal, 0.9, fftVal);\r\n\r\n    for ( int i = 0; i < 6; i ++)\r\n    {\r\n        p -= t*s;\r\n        p = (ir * (p-t/s));\r\n\r\n     \t//d = min\t(d, udBox(p*s, dim/s) /s);\r\n\r\n \t\tp = abs(p);\r\n\r\n\r\n\r\n        float circleSize = fftVal + 0.03 * (sin(time + length(p_o) * 5.) )\r\n            + 0.01;\r\n        d = min(d, length(p - t) - circleSize/s);\r\n        s *= s;\r\n\r\n    }\r\n\r\n\r\n    return d;\r\n}\r\n\r\n\r\nfloat lighting( in vec3 ro, in vec3 rd)\r\n{\r\n    float res = 1.0;\r\n    float t = 0.01;\r\n\r\n    float k = 12.0;\r\n\r\n    for( int i = 0; i < 2; i++ )\r\n    {\r\n        float h = DE(ro + rd*t);\r\n        if( h<0.001 )\r\n            return 0.0;\r\n\r\n        res = min( res,k * h/t );\r\n        t += h;\r\n    }\r\n    return res;\r\n}\r\n\r\nvec3 gradient(vec3 p) {\r\n\tvec2 e = vec2(0., 0.0001);\r\n\r\n\treturn normalize(\r\n\t\tvec3(\r\n\t\t\tDE(p+e.yxx) - DE(p-e.yxx),\r\n\t\t\tDE(p+e.xyx) - DE(p-e.xyx),\r\n\t\t\tDE(p+e.xxy) - DE(p-e.xxy)\r\n\t\t)\r\n\t);\r\n}\r\n\r\n\r\n\r\n\r\n//https://iquilezles.org/articles/fog\r\nvec3 applyFog( in vec3  rgb,      // original color of the pixel\r\n               in float distance, // camera to point distance\r\n               in vec3  rayDir,   // camera to point vector\r\n               in vec3  sunDir )  // sun light direction\r\n{\r\n    float b = .9 + 20.0 / float(MAX_ITER);\r\n    float fogAmount = 1.0 - exp( -distance*b );\r\n    float sunAmount = max( dot( rayDir, sunDir ), 0.0 );\r\n    vec3  fogColor  = mix( vec3(0.1,0.1,0.0),\r\n                           vec3(1.0,0.9,0.7),\r\n                           pow(sunAmount,8.0) );\r\n    return mix( rgb, fogColor, fogAmount );\r\n}\r\n\r\n\r\nvoid main(void) {\r\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    uv -= 0.5;\r\n    float aspect = resolution.x/resolution.y;\r\n    uv.x *= aspect;\r\n\r\n    vec3 cam = vec3(0,0, - sin(time /32. ) - 2.0);\r\n    vec3 ray = normalize( vec3(uv, 1.0));\r\n\r\n    vec3 color = vec3(0.1, 0.1, 0.2);\r\n    vec3 p;\r\n    float depth = 0.0;\r\n    bool hit = false;\r\n    float iter = 0.0;\r\n\r\n    float fog = 0.0;\r\n    vec3 sun = normalize( vec3(1,1,1));\r\n\r\n    ir = rotationMatrix(normalize(vec3(sin(time/50.0),sin(time/100.0),sin(time/150.0))), 1.5 + time/30.0);\r\n\r\n    mat3 mv = rotationMatrix(vec3(0,1,0), time/10.0);\r\n\r\n    cam = mv * cam;\r\n    ray = mv * ray;\r\n\r\n    for( int i= 0; i < MAX_ITER; i ++) {\r\n        p = depth * ray + cam;\r\n        float dist = DE(p);\r\n\r\n\r\n        \tdepth += dist * 0.9;\r\n\r\n\r\n        if ( dist < 0.001)\r\n        {\r\n        \thit = true;\r\n            break;\r\n        }\r\n\r\n        iter ++;\r\n    }\r\n    float fakeAO = 1.0 - iter / float(MAX_ITER);\r\n    vec3 n = gradient(p);\r\n\r\n\r\n    if (hit) {\r\n    \tcolor = vec3(fakeAO + dot(-ray,n) / 2.0);\r\n    }\r\n\r\n\r\n\tcolor = applyFog(color, depth, ray, sun) ;\r\n\r\n   //color *= vec3(1.0 - fog);\r\n\r\n    color = pow(color, vec3(0.6));\r\n\r\n\r\n\tgl_FragColor = vec4(color ,1.0);\r\n}\r\n`},{providerId:ud,name:"I/O by movAX13h",externalUrl:`${cd}/XsfGDS`,shader:`${sd}// I/O by movAX13h\r\n// https://www.shadertoy.com/view/XsfGDS\r\n\r\n\r\n// I/O fragment shader by movAX13h, August 2013\r\n\r\n#define SHOW_BLOCKS\r\n\r\nfloat rand(float x)\r\n{\r\n    return fract(sin(x) * 4358.5453123);\r\n}\r\n\r\nfloat rand(vec2 co)\r\n{\r\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5357);\r\n}\r\n\r\nfloat box(vec2 p, vec2 b, float r)\r\n{\r\n  return length(max(abs(p)-b,0.0))-r;\r\n}\r\n\r\nfloat sampleMusic()\r\n{\r\n\treturn 0.5 * (\r\n\t\t//texture2D( spectrum, vec2( 0.01, 0.25 ) ).x +\r\n\t\t//texture2D( spectrum, vec2( 0.07, 0.25 ) ).x +\r\n\t\ttexture2D( spectrum, vec2( 0.15, 0.25 ) ).x +\r\n\t\ttexture2D( spectrum, vec2( 0.30, 0.25 ) ).x);\r\n}\r\n\r\nvoid main(void)\r\n{\r\n\tconst float speed = 0.7;\r\n\tconst float ySpread = 1.6;\r\n\tconst int numBlocks = 70;\r\n\r\n\tfloat pulse = sampleMusic();\r\n\r\n\tvec2 uv = gl_FragCoord.xy / resolution.xy - 0.5;\r\n\tfloat aspect = resolution.x / resolution.y;\r\n\tvec3 baseColor = uv.x > 0.0 ? vec3(0.0,0.3, 0.6) : vec3(0.6, 0.0, 0.3);\r\n\r\n\tvec3 color = pulse*baseColor*0.5*(0.9-cos(uv.x*8.0));\r\n\tuv.x *= aspect;\r\n\r\n\tfor (int i = 0; i < numBlocks; i++)\r\n\t{\r\n\t\tfloat z = 1.0-0.7*rand(float(i)*1.4333); // 0=far, 1=near\r\n\t\tfloat tickTime = time*z*speed + float(i)*1.23753;\r\n\t\tfloat tick = floor(tickTime);\r\n\r\n\t\tvec2 pos = vec2(0.6*aspect*(rand(tick)-0.5), sign(uv.x)*ySpread*(0.5-fract(tickTime)));\r\n\t\tpos.x += 0.24*sign(pos.x); // move aside\r\n\t\tif (abs(pos.x) < 0.1) pos.x++; // stupid fix; sign sometimes returns 0\r\n\r\n\t\tvec2 size = 1.8*z*vec2(0.04, 0.04 + 0.1*rand(tick+0.2));\r\n\t\tfloat b = box(uv-pos, size, 0.01);\r\n\t\tfloat dust = z*smoothstep(0.22, 0.0, b)*pulse*0.5;\r\n\t\t#ifdef SHOW_BLOCKS\r\n\t\tfloat block = 0.2*z*smoothstep(0.002, 0.0, b);\r\n\t\tfloat shine = 0.6*z*pulse*smoothstep(-0.002, b, 0.007);\r\n\t\tcolor += dust*baseColor + block*z + shine;\r\n\t\t#else\r\n\t\tcolor += dust*baseColor;\r\n\t\t#endif\r\n\t}\r\n\r\n\tcolor -= rand(uv)*0.04;\r\n\tgl_FragColor = vec4(color, 1.0);\r\n}`},{providerId:ud,name:"Otherworldy by lherm",externalUrl:`${cd}/MlySWd`,shader:`${sd}// Otherworldy by lherm\r\n// https://www.shadertoy.com/view/MlySWd\r\n\r\n\r\n#define T iTime\r\n\r\n#define PSD (abs(texture(iChannel0, vec2(.5)).r)*abs(texture(iChannel0, vec2(.5)).r))\r\n\r\n// HG_SDF rotate function\r\n#define r(p, a) {p = cos(a)*p + sin(a)*vec2(p.y,-p.x);}\r\n\r\n// Cabbibo's HSV\r\nvec3 hsv(float h, float s, float v) {\r\n    return mix( vec3( 1.0 ), clamp( ( abs( fract(h + vec3( 3.0, 2.0, 1.0 ) / 3.0 ) * 6.0 - 3.0 ) - 1.0 ), 0.0, 1.0 ), s ) * v;\r\n}\r\n\r\nvoid main(void) {\r\n\tvec2 u = (-iResolution.xy+2.*gl_FragCoord.xy) / iResolution.y;\r\n    vec3 ro = vec3(u, 1.), rd = normalize(vec3(u, -1.)), p; // Camera and ray dir\r\n    float d = 0., m; // Distance for march\r\n    for (float i = 1.; i > 0.; i-=0.02)\r\n    {\r\n        p = ro + rd * d;\r\n        r(p.zy, T);\r\n        r(p.zx, T);\r\n        m = length(cos(abs(p)+sin(abs(p))+T))-(PSD + .5); // Distance function\r\n        d += m;\r\n        gl_FragColor = vec4(hsv(T, 1.,1.)*i*i, 1.);\r\n        if (m < 0.02) break;\r\n    }\r\n}\r\n`}];console.log("ampshader presets:",dd.length);const fd=new class extends od{constructor(e){super(),this.analyser=e,this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("webgl"),this.animationFrameId=0,this.fragTime=null,this.shader=null,this.startTime=performance.now();const t=this.gl;this.canvas.hidden=!0,this.canvas.className="visualizer visualizer-ampshader";const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r);const i=new Float32Array([-1,-1,1,-1,-1,1,1,1]);t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0)}get hidden(){return this.canvas.hidden}set hidden(e){this.canvas.hidden!==e&&(this.canvas.hidden=e,e||this.animationFrameId||this.render())}appendTo(e){e.append(this.canvas)}load(e){ld.log("load"),e&&(ld.log(`Using Ampshader preset: ${e.name}`),this.createShader(e.shader)),this.play()}play(){ld.log("play"),this.animationFrameId||this.render()}pause(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0)}stop(){this.pause(),this.clear()}resize(e,t){const n=this.canvas,r=this.gl;if(n.width=e,n.height=t,r.viewport(0,0,e,t),this.shader){const e=r.getUniformLocation(this.shader,"resolution");r.uniform2f(e,n.width,n.height),this.renderFrame()}}get currentTime(){return(performance.now()-this.startTime)/1e3}clear(){}createShader(e){const t=this.gl,n=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(n,"attribute vec2 position;void main(void){gl_Position=vec4(position,0,1);}"),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));const r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));const i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r),t.linkProgram(i),t.useProgram(i);const a=t.getAttribLocation(i,"position");t.enableVertexAttribArray(a),this.fragTime=t.getUniformLocation(i,"time"),t.uniform1f(this.fragTime,this.currentTime);const o=t.getUniformLocation(i,"resolution");t.uniform2f(o,this.canvas.width,this.canvas.height),this.shader=i}render(){this.renderFrame(),this.autoplay&&!this.canvas.hidden&&(this.animationFrameId=requestAnimationFrame((()=>this.render())))}renderFrame(){if(this.shader){const e=this.gl,t=new Uint8Array(this.analyser.frequencyBinCount),n=new Uint8Array(4*t.length);this.analyser.getByteFrequencyData(t),e.uniform1f(this.fragTime,this.currentTime);for(let e=0;e<t.length;e++)n[4*e+0]=t[e],n[4*e+1]=t[e],n[4*e+2]=t[e],n[4*e+3]=255;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.length,1,0,e.RGBA,e.UNSIGNED_BYTE,n),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}}(td),md={id:"ampshader",name:"ampshader",player:fd,visualizers:dd,observeVisualizers:()=>zt(dd)};var pd=n(8841);const hd=new l("AudioMotionPlayer"),vd="https://audiomotion.dev/",gd=[{providerId:"audiomotion",name:"Anemone",options:{radial:!0,ledBars:!1,spinSpeed:1,mode:8,barSpace:0,gradient:"rainbow",reflexRatio:.4,showPeaks:!0,mirror:-1,maxFreq:8e3,lineWidth:2,fillAlpha:.2},externalUrl:vd},{providerId:"audiomotion",name:"Classic LEDs",options:{mode:7,barSpace:0,gradient:"classic",ledBars:!0,lumiBars:!1,radial:!1,reflexRatio:0,showPeaks:!0},externalUrl:vd},{providerId:"audiomotion",name:"Mirror wave",options:{mode:10,fillAlpha:.6,gradient:"rainbow",lineWidth:2,mirror:-1,radial:!1,reflexAlpha:1,reflexBright:1,reflexRatio:.5,showPeaks:!1},externalUrl:vd},{providerId:"audiomotion",name:"Radial overlay",options:{mode:5,barSpace:.1,gradient:"prism",radial:!0,ledBars:!1,showPeaks:!0,spinSpeed:1},externalUrl:vd},{providerId:"audiomotion",name:"Reflex Bars",options:{mode:5,barSpace:.25,gradient:"rainbow",lumiBars:!1,radial:!1,reflexAlpha:.25,reflexBright:1,reflexFit:!0,reflexRatio:.3,ledBars:!1,showPeaks:!0},externalUrl:vd}];console.log("AudioMotion presets:",gd.length);const bd=new class extends od{constructor(e,t){super();const n=this.element=document.createElement("div");n.hidden=!0,n.className="visualizer visualizer-audiomotion",this.audioSourceNode=e.createMediaElementSource(new Audio);const r=this.visualizer=new pd.Z(n,{source:this.audioSourceNode,showBgColor:!1,overlay:!0,showScaleX:!1,showScaleY:!1,connectSpeakers:!1});t.subscribe((e=>{this.audioSourceNode=e,this.element.hidden||r.connectInput(e)}))}get hidden(){return this.element.hidden}set hidden(e){this.element.hidden!==e&&(this.element.hidden=e,e?this.visualizer.disconnectInput():this.visualizer.connectInput(this.audioSourceNode))}appendTo(e){e.append(this.element)}load(e){hd.log("load"),e&&(hd.log(`Using AudioMotion preset: ${e.name}`),this.visualizer.setOptions(e.options)),this.autoplay&&this.play()}play(){hd.log("play"),this.visualizer.toggleAnalyzer(!0)}pause(){hd.log("pause"),this.visualizer.toggleAnalyzer(!1)}stop(){this.visualizer.toggleAnalyzer(!0)}resize(e,t){this.element.style.width=`${e}px`,this.element.style.height=`${t}px`}}(Zu,ad()),yd={id:"audiomotion",name:"audioMotion-analyzer",url:"https://audiomotion.dev/",player:bd,visualizers:gd,observeVisualizers:()=>zt(gd)};var wd=n(2238),xd=n.n(wd);const kd=new l("MilkdropPlayer");const Sd=new Jt([]),Ed=new class extends od{constructor(e){super(),this.analyser=e,this.canvas=document.createElement("canvas"),this.context2D=this.canvas.getContext("2d"),this.animationFrameId=0,this.canvas.hidden=!0,this.canvas.className="visualizer visualizer-milkdrop",(this.visualizer=xd().createVisualizer(e.context,this.canvas,{width:400,height:200})).connectAudio(e)}get hidden(){return this.canvas.hidden}set hidden(e){this.canvas.hidden!==e&&(this.canvas.hidden=e,e?this.visualizer.disconnectAudio(this.analyser):(this.visualizer.connectAudio(this.analyser),this.animationFrameId||this.render()))}appendTo(e){e.append(this.canvas)}load(e){e&&(kd.log(`Using butterchurn preset: ${e.name}`),this.visualizer.loadPreset(e.data,.5)),this.play()}play(){kd.log("play"),this.animationFrameId||this.render()}pause(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0)}stop(){this.pause(),this.clear()}resize(e,t){this.canvas.width=e,this.canvas.height=t,this.visualizer.render(),this.visualizer.setRendererSize(e,t),this.visualizer.render()}clear(){const e=this.canvas.width,t=this.canvas.height;this.context2D.clearRect(0,0,e,t)}render(){this.visualizer.render(),this.autoplay&&!this.canvas.hidden&&(this.animationFrameId=requestAnimationFrame((()=>this.render())))}}(ed),Cd={id:"milkdrop",name:"Milkdrop",url:"https://butterchurnviz.com/",player:Ed,get visualizers(){return Sd.getValue()},observeVisualizers:()=>Sd};setTimeout((()=>{return e=void 0,t=void 0,i=function*(){const e="milkdrop",{default:t}=yield n.e(577).then(n.t.bind(n,6607,23));if(t){Sd.next(Object.keys(t).map((n=>({providerId:e,name:n,data:t[n]}))));const{default:r}=yield n.e(271).then(n.t.bind(n,3710,23));r&&Sd.next(Sd.getValue().concat(Object.keys(r).map((t=>({providerId:e,name:t,data:r[t]})))))}},new((r=void 0)||(r=Promise))((function(n,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){e.done?n(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,l)}s((i=i.apply(e,t||[])).next())}));var e,t,r,i}),1e3),Sd.pipe(sa((e=>0===e.length)),zn((e=>console.log("Butterchurn presets:",e.length))),qt(2)).subscribe();const Pd=new l("SpotifyVizPlayer"),Td=["#18FF2A","#7718FF","#06C5FE","#FF4242","#18FF2A"];let Ad="",zd="";const Id={volumeSmoothing:10,onBar(){Ad=zd||Nd(Td),zd=Nd(Td.filter((e=>e!==zd)))},onPaint({context2D:e,height:t,width:n,now:r,analyser:i}){const a=fc([0,10*i.volume,0])(i.bar.progress),o=fc([0,300*i.volume,0])(i.beat.progress);e.fillStyle="rgba(0, 0, 0, .08)",e.fillRect(0,0,n,t),e.lineWidth=a,e.strokeStyle=wu(Ad,zd)(i.bar.progress),function(e,t,n,r,i,a=5){const o=e=>r*Math.sin(e/i+t)+n,{width:l}=e.canvas;e.beginPath();for(let t=-50;t<l+50;t+=a)-50===t?e.moveTo(t,o(t)):e.lineTo(t,o(t))}(e,r/50,t/2,50*i.volume,100),e.stroke(),e.fillStyle="rgba(0, 0, 0, 1)",e.beginPath(),e.lineWidth=o,function(e,t,n,r,i=0,a=2*Math.PI){e.beginPath(),e.arc(t,n,r,i,a),e.closePath()}(e,n/2,t/2,i.volume*t/5+o/10),e.stroke(),e.fill()}};function Nd(e){return e[Math.floor(Math.random()*e.length)]}const Md=[{providerId:"spotifyviz",name:"example by zachwinter",config:Id,externalUrl:"https://github.com/zachwinter/spotify-viz/blob/master/client/example.js"}],Od=new class extends od{constructor(e){super(),this.analyser=e,this.canvas=document.createElement("canvas"),this.context2D=this.canvas.getContext("2d"),this.animationFrameId=0,this.canvas.hidden=!0,this.canvas.className="visualizer visualizer-spotifyviz",e.observeBar().subscribe((e=>{var t,n;null===(n=null===(t=this.config)||void 0===t?void 0:t.onBar)||void 0===n||n.call(t,e)})),e.observeBeat().subscribe((e=>{var t,n;null===(n=null===(t=this.config)||void 0===t?void 0:t.onBeat)||void 0===n||n.call(t,e)})),e.observeSection().subscribe((e=>{var t,n;null===(n=null===(t=this.config)||void 0===t?void 0:t.onSection)||void 0===n||n.call(t,e)})),e.observeSegment().subscribe((e=>{var t,n;null===(n=null===(t=this.config)||void 0===t?void 0:t.onSegment)||void 0===n||n.call(t,e)})),e.observeTatum().subscribe((e=>{var t,n;null===(n=null===(t=this.config)||void 0===t?void 0:t.onTatum)||void 0===n||n.call(t,e)}))}get hidden(){return this.canvas.hidden}set hidden(e){this.canvas.hidden!==e&&(this.canvas.hidden=e,e||this.animationFrameId||this.render(performance.now()))}appendTo(e){e.append(this.canvas)}load(e){var t,n;Pd.log("load"),e&&(Pd.log(`Using SpotifyViz preset: ${e.name}`),this.config=e.config,this.analyser.volumeSmoothing=null!==(n=null===(t=e.config)||void 0===t?void 0:t.volumeSmoothing)&&void 0!==n?n:100),this.autoplay&&this.play()}play(){Pd.log("play"),this.animationFrameId||this.render(performance.now())}pause(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0)}stop(){this.pause(),this.clear()}resize(e,t){this.canvas.width=e,this.canvas.height=t,this.renderFrame(performance.now())}clear(){const e=this.canvas.width,t=this.canvas.height;this.context2D.clearRect(0,0,e,t)}render(e){this.renderFrame(e),this.autoplay&&!this.canvas.hidden&&(this.animationFrameId=requestAnimationFrame((e=>this.render(e))))}renderFrame(e){var t,n;const r=this.context2D,i=this.canvas.width,a=this.canvas.height,o=this.analyser;null===(n=null===(t=this.config)||void 0===t?void 0:t.onPaint)||void 0===n||n.call(t,{context2D:r,width:i,height:a,now:e,analyser:o})}}(Ju),_d={id:"spotifyviz",name:"spotify-viz",url:"https://github.com/zachwinter/spotify-viz/",player:Od,visualizers:Md,observeVisualizers:()=>zt(Md)},$d=new l("WaveformPlayer");function Ld(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function Dd(e){return Math.min(1,Math.max(0,e))}function jd(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Rd(e){return e<=1?"".concat(100*Number(e),"%"):e}function Fd(e){return 1===e.length?"0"+e:String(e)}function Bd(e,t,n){e=Ld(e,255),t=Ld(t,255),n=Ld(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=0,l=(r+i)/2;if(r===i)o=0,a=0;else{var s=r-i;switch(o=l>.5?s/(2-r-i):s/(r+i),r){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4}a/=6}return{h:a,s:o,l}}function Vd(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ud(e,t,n){e=Ld(e,255),t=Ld(t,255),n=Ld(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=r,l=r-i,s=0===r?0:l/r;if(r===i)a=0;else{switch(r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4}a/=6}return{h:a,s,v:o}}function Hd(e,t,n,r){var i=[Fd(Math.round(e).toString(16)),Fd(Math.round(t).toString(16)),Fd(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Wd(e){return qd(e)/255}function qd(e){return parseInt(e,16)}var Yd={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Kd="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Qd="[\\s|\\(]+(".concat(Kd,")[,|\\s]+(").concat(Kd,")[,|\\s]+(").concat(Kd,")\\s*\\)?"),Xd="[\\s|\\(]+(".concat(Kd,")[,|\\s]+(").concat(Kd,")[,|\\s]+(").concat(Kd,")[,|\\s]+(").concat(Kd,")\\s*\\)?"),Gd={CSS_UNIT:new RegExp(Kd),rgb:new RegExp("rgb"+Qd),rgba:new RegExp("rgba"+Xd),hsl:new RegExp("hsl"+Qd),hsla:new RegExp("hsla"+Xd),hsv:new RegExp("hsv"+Qd),hsva:new RegExp("hsva"+Xd),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Jd(e){return Boolean(Gd.CSS_UNIT.exec(String(e)))}var Zd=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"==typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=function(e){var t,n,r,i={r:0,g:0,b:0},a=1,o=null,l=null,s=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(Yd[e])e=Yd[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=Gd.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Gd.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Gd.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Gd.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Gd.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Gd.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Gd.hex8.exec(e))?{r:qd(n[1]),g:qd(n[2]),b:qd(n[3]),a:Wd(n[4]),format:t?"name":"hex8"}:(n=Gd.hex6.exec(e))?{r:qd(n[1]),g:qd(n[2]),b:qd(n[3]),format:t?"name":"hex"}:(n=Gd.hex4.exec(e))?{r:qd(n[1]+n[1]),g:qd(n[2]+n[2]),b:qd(n[3]+n[3]),a:Wd(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=Gd.hex3.exec(e))&&{r:qd(n[1]+n[1]),g:qd(n[2]+n[2]),b:qd(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(Jd(e.r)&&Jd(e.g)&&Jd(e.b)?(t=e.r,n=e.g,r=e.b,i={r:255*Ld(t,255),g:255*Ld(n,255),b:255*Ld(r,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):Jd(e.h)&&Jd(e.s)&&Jd(e.v)?(o=Rd(e.s),l=Rd(e.v),i=function(e,t,n){e=6*Ld(e,360),t=Ld(t,100),n=Ld(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),l=n*(1-(1-i)*t),s=r%6;return{r:255*[n,o,a,a,l,n][s],g:255*[l,n,n,o,a,a][s],b:255*[a,a,l,n,n,o][s]}}(e.h,o,l),c=!0,u="hsv"):Jd(e.h)&&Jd(e.s)&&Jd(e.l)&&(o=Rd(e.s),s=Rd(e.l),i=function(e,t,n){var r,i,a;if(e=Ld(e,360),t=Ld(t,100),n=Ld(n,100),0===t)i=n,a=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;r=Vd(l,o,e+1/3),i=Vd(l,o,e),a=Vd(l,o,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,o,s),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(a=e.a)),a=jd(a),{ok:c,format:e.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a}}(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=jd(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=Ud(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=Ud(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=Bd(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=Bd(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),Hd(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,i){var a,o=[Fd(Math.round(e).toString(16)),Fd(Math.round(t).toString(16)),Fd(Math.round(n).toString(16)),Fd((a=r,Math.round(255*parseFloat(a)).toString(16)))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*Ld(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*Ld(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+Hd(this.r,this.g,this.b,!1),t=0,n=Object.entries(Yd);t<n.length;t++){var r=n[t],i=r[0];if(e===r[1])return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Dd(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Dd(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Dd(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Dd(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),a=n/100;return new e({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,a=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,a=n.v,o=[],l=1/t;t--;)o.push(new e({h:r,s:i,v:a})),a=(a+l)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb();return new e({r:r.r+(n.r-r.r)*n.a,g:r.g+(n.g-r.g)*n.a,b:r.b+(n.b-r.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(r+o*a)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function ef(e,t){var n=new Zd(e),r=new Zd(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)}function tf(e,t,n){void 0===n&&(n={includeFallbackColors:!1,level:"AA",size:"small"});for(var r=null,i=0,a=n.includeFallbackColors,o=n.level,l=n.size,s=0,c=t;s<c.length;s++){var u=c[s],d=ef(e,u);d>i&&(i=d,r=new Zd(u))}return function(e,t,n){var r,i;void 0===n&&(n={level:"AA",size:"small"});var a=ef(e,t);switch((null!==(r=n.level)&&void 0!==r?r:"AA")+(null!==(i=n.size)&&void 0!==i?i:"small")){case"AAsmall":case"AAAlarge":return a>=4.5;case"AAlarge":return a>=3;case"AAAsmall":return a>=7;default:return!1}}(e,r,{level:o,size:l})||!a?r:(n.includeFallbackColors=!1,tf(e,["#fff","#000"],n))}const nf=JSON.parse('{"name":"Black Gold","backgroundColor":"#0d0c0c","textColor":"#cbccad","frameColor":"#0e0e0c","frameTextColor":"#e8e8bf","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":null,"selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.375,"roundness":0.25,"flat":false}'),rf=JSON.parse('{"name":"Boring Skyblue","backgroundColor":"#08090a","textColor":"#7ccaf8","frameColor":"#333738","frameTextColor":"#d2d2d2","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":"#163d5a","selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.375,"roundness":0,"flat":false}'),af=JSON.parse('{"name":"Grey Green","backgroundColor":"#0f0f10","textColor":"#d1f5d2","frameColor":"#24322c","frameTextColor":"#c3feca","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":null,"selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.375,"roundness":0.25,"flat":false}'),of=JSON.parse('{"name":"Indigo","backgroundColor":"#06181e","textColor":"#d1d3f5","frameColor":"#43477a","frameTextColor":"#f3f3f7","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":"#4b4049","selectedTextColor":"#ffffff","evenRowBackgroundColor":null,"spacing":0.625,"roundness":0.84375,"flat":true}'),lf=JSON.parse('{"name":"Lemon","backgroundColor":"#e7fdfc","textColor":"#000000","frameColor":"#e8d502","frameTextColor":"#180c06","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":"#aaaaaa","selectedTextColor":"#000000","evenRowBackgroundColor":null,"spacing":0.375,"roundness":0,"flat":true}'),sf=JSON.parse('{"name":"Lilac","backgroundColor":"#12051a","textColor":"#f5d1ed","frameColor":"#79437a","frameTextColor":"#f3f7f3","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":null,"selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.625,"roundness":0.84375,"flat":true}'),cf=JSON.parse('{"name":"Moody Blue","backgroundColor":"#16141a","textColor":"#bec1c0","frameColor":"#125673","frameTextColor":"#d8eee7","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":null,"selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.53125,"roundness":0.40625,"flat":false}'),uf=JSON.parse('{"name":"Olive Oil","backgroundColor":"#181e10","textColor":"#a6c464","frameColor":"#81810e","frameTextColor":"#181816","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":null,"selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.375,"roundness":0.25,"flat":false}'),df=JSON.parse('{"name":"Pale Pink","backgroundColor":"#f7f7f7","textColor":"#120f0c","frameColor":"#cfbdd0","frameTextColor":"#121211","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":null,"selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.375,"roundness":0.53125,"flat":true}'),ff=JSON.parse('{"name":"Purplelicious (Winamp)","backgroundColor":"#000000","textColor":"#ffb464","frameColor":"#3e0445","frameTextColor":"#ffb464","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":"#3e0445","selectedTextColor":"#ffb464","evenRowBackgroundColor":null,"spacing":0.21875,"roundness":0.09375,"flat":false}'),mf=JSON.parse('{"name":"Saddle","backgroundColor":"#271607","textColor":"#cbbe86","frameColor":"#331d0a","frameTextColor":"#fedfc3","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":null,"selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.375,"roundness":0.34375,"flat":false}'),pf=JSON.parse('{"name":"Seaweed","backgroundColor":"#244319","textColor":"#bef3c5","frameColor":"#3b722c","frameTextColor":"#fcfcf7","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":"#54e3da","mediaButtonTextColor":null,"selectedBackgroundColor":"#04958b","selectedTextColor":null,"evenRowBackgroundColor":null,"spacing":0.78125,"roundness":0.8125,"flat":true}'),hf=JSON.parse('{"name":"Tangerine","backgroundColor":"#eaf2c5","textColor":"#2e1f05","frameColor":"#e89f02","frameTextColor":"#180c06","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":null,"mediaButtonTextColor":null,"selectedBackgroundColor":"#adaaaa","selectedTextColor":"#000000","evenRowBackgroundColor":null,"spacing":0.46875,"roundness":1,"flat":false}'),vf=JSON.parse('{"name":"Winamp Amber","backgroundColor":"#000000","textColor":"#e79a36","frameColor":"#383757","frameTextColor":"#d2d2d2","buttonColor":"#464379","buttonTextColor":"#ebebeb","mediaButtonColor":"#cccccc","mediaButtonTextColor":"#111111","selectedBackgroundColor":"#76490e","selectedTextColor":"#ebebeb","evenRowBackgroundColor":null,"spacing":0.21875,"roundness":0.09375,"flat":false}'),gf=JSON.parse('{"name":"Winamp Classic","backgroundColor":"#000000","textColor":"#00e200","frameColor":"#383757","frameTextColor":"#d2d2d2","buttonColor":"#464379","buttonTextColor":"#d2d2d2","mediaButtonColor":"#cccccc","mediaButtonTextColor":"#111111","selectedBackgroundColor":"#040dae","selectedTextColor":"#d2d2d2","evenRowBackgroundColor":null,"spacing":0.21875,"roundness":0.09375,"flat":false}'),bf=JSON.parse('{"name":"Winamp Modern (WACUP)","backgroundColor":"#14121c","textColor":"#8ac440","frameColor":"#1f1f36","frameTextColor":"#f0f0f0","buttonColor":null,"buttonTextColor":null,"mediaButtonColor":"#cccccc","mediaButtonTextColor":"#111111","selectedBackgroundColor":"#2f2f76","selectedTextColor":"#f0f0f0","evenRowBackgroundColor":null,"spacing":0.21875,"roundness":0.09375,"flat":false}'),yf={name:"",backgroundColor:"#000000",textColor:"#ebebeb",frameColor:"#000000",frameTextColor:"#ebebeb",buttonColor:null,buttonTextColor:null,mediaButtonColor:null,mediaButtonTextColor:null,selectedBackgroundColor:null,selectedTextColor:null,evenRowBackgroundColor:null,spacing:0,roundness:0,flat:!1},wf=[yf,nf,rf,af,of,lf,sf,cf,uf,df,ff,mf,pf,hf,vf,gf,bf],xf=new class{constructor(){this.storage=new f("theme"),this.app=document.getElementById("app"),this.popup=document.getElementById("popup"),this.system=document.getElementById("system"),this.theme$=new Jt(yf);const e=document.createElement("style");document.head.append(e),this.sheet=e.sheet,this.rootStyle=this.createStyle(":root"),this.appStyle=this.createStyle(".app"),this.playheadStyle=this.createStyle("#playhead"),this.restore()}observe(){return this.theme$}get backgroundColor(){return this.current.backgroundColor}set backgroundColor(e){this.setColor("backgroundColor",e),this.app.classList.toggle("dark",this.isDark),this.app.classList.toggle("light",this.isLight),this.popup.classList.toggle("dark",this.isDark),this.popup.classList.toggle("light",this.isLight)}get buttonColor(){return this.current.buttonColor}set buttonColor(e){this.setColor("buttonColor",e)}get buttonTextColor(){return this.current.buttonTextColor}set buttonTextColor(e){this.setColor("buttonTextColor",e)}get current(){return this.theme$.value}get evenRowBackgroundColor(){return this.current.evenRowBackgroundColor}set evenRowBackgroundColor(e){this.setColor("evenRowBackgroundColor",e)}get flat(){return this.current.flat}set flat(e){this.app.classList.toggle("flat",!!e),this.popup.classList.toggle("flat",!!e),this.theme$.next(Object.assign(Object.assign({},this.current),{flat:e}))}get fontSize(){return Number(this.rootStyle.getPropertyValue("--font-size"))||16}set fontSize(e){this.rootStyle.setProperty("--font-size",String(e)),this.createPlayheadSmiley()}get frameColor(){return this.current.frameColor}set frameColor(e){this.setColor("frameColor",e),this.app.classList.toggle("frame-light",this.isFrameLight),this.app.classList.toggle("frame-dark",this.isFrameDark),this.popup.classList.toggle("frame-light",this.isFrameLight),this.popup.classList.toggle("frame-dark",this.isFrameDark),this.createPlayheadSmiley()}get frameTextColor(){return this.current.frameTextColor}set frameTextColor(e){this.setColor("frameTextColor",e)}get mediaButtonColor(){return this.current.mediaButtonColor}set mediaButtonColor(e){this.setColor("mediaButtonColor",e)}get mediaButtonTextColor(){return this.current.mediaButtonTextColor}set mediaButtonTextColor(e){this.setColor("mediaButtonTextColor",e)}get name(){return this.current.name}set name(e){this.theme$.next(Object.assign(Object.assign({},this.current),{name:e}))}get roundness(){return this.current.roundness}set roundness(e){this.setProperty("roundness",e),this.theme$.next(Object.assign(Object.assign({},this.current),{roundness:e}))}get selectedBackgroundColor(){var e;return null!==(e=this.current.selectedBackgroundColor)&&void 0!==e?e:null}set selectedBackgroundColor(e){if(this.setColor("selectedBackgroundColor",e),this.selectedBackgroundColor){let e=new Zd(this.selectedBackgroundColor).desaturate(40);e=e.isLight()?e.tint(25):e.shade(25),this.setProperty("selected-background-color-blurred",e.toHexString())}}get selectedTextColor(){return this.current.selectedTextColor}set selectedTextColor(e){this.setColor("selectedTextColor",e)}get spacing(){return this.current.spacing}set spacing(e){this.setProperty("spacing",e),this.theme$.next(Object.assign(Object.assign({},this.current),{spacing:e}))}get textColor(){return this.current.textColor}set textColor(e){this.setColor("textColor",e)}get isDark(){return new Zd(this.backgroundColor).isDark()}get isLight(){return new Zd(this.backgroundColor).isLight()}get isFrameDark(){return new Zd(this.frameColor).isDark()}get isFrameLight(){return new Zd(this.frameColor).isLight()}load(e){let t;t="string"==typeof e?wf.find((t=>t.name===e)):e,t&&Object.assign(this,this.applyDefaults(t))}restore(){const e=this.storage.getJson("current",yf);Object.assign(this,this.applyDefaults(e)),this.fontSize=this.storage.getNumber("fontSize",16),this.app.classList.toggle("dark",this.isDark),this.app.classList.toggle("light",this.isLight),this.app.classList.toggle("frame-light",this.isFrameLight),this.app.classList.toggle("frame-dark",this.isFrameDark),this.popup.classList.toggle("dark",this.isDark),this.popup.classList.toggle("light",this.isLight),this.popup.classList.toggle("frame-light",this.isFrameLight),this.popup.classList.toggle("frame-dark",this.isFrameDark),this.system.classList.toggle("dark",this.isDark),this.system.classList.toggle("light",this.isLight),this.createPlayheadSmiley()}save(){this.storage.setNumber("fontSize",this.fontSize),this.storage.setJson("current",this.current),this.system.classList.toggle("dark",this.isDark),this.system.classList.toggle("light",this.isLight)}applyDefaults(e){if(!e.selectedBackgroundColor){const t=new Zd(e.textColor),n=t.monochromatic();n.sort(((e,t)=>e.getBrightness()-t.getBrightness())),t.isLight()?e.selectedBackgroundColor=n[1].toHexString():e.selectedBackgroundColor=n[n.length-2].toHexString(),n.push(new Zd("white"),new Zd("black")),e.selectedTextColor=tf(e.selectedBackgroundColor,n,{includeFallbackColors:!0,level:"AA",size:"large"}).toHexString()}return e}setColor(e,t){"string"==typeof t&&(t=new Zd(t));const n=null==t?void 0:t.toHsl(),r=this.toDashName(e);this.setProperty(`${r}-h`,n?String(n.h):null),this.setProperty(`${r}-s`,n?100*n.s+"%":null),this.setProperty(`${r}-l`,n?100*n.l+"%":null),this.theme$.next(Object.assign(Object.assign({},this.current),{[e]:t?t.toHexString():null}))}setProperty(e,t){this.appStyle.setProperty(`--${e}`,null==t?null:String(t))}createStyle(e){const t=this.sheet.insertRule(`${e}{}`);return this.sheet.cssRules[t].style}get defaultMediaButtonColor(){const e=new Zd(this.frameColor).toHsl();return e.s+=1-.33*e.s,e.l+=1-.5*e.l,new Zd(e).toHexString()}get defaultMediaButtonTextColor(){const e=new Zd(this.defaultMediaButtonColor).toHsl();return e.s-=.5*e.s,e.l-=.9*e.l,new Zd(e).toHexString()}get smileyColor(){return this.mediaButtonTextColor||this.defaultMediaButtonTextColor}createPlayheadSmiley(){const e=new Zd(this.smileyColor).toRgbString(),t=[`<path fill='${e}' d='M 160.5,164.5 C 183.647,162.813 194.147,173.48 192,196.5C 186.494,211.009 175.994,216.842 160.5,214C 145.991,208.494 140.158,197.994 143,182.5C 145.683,173.318 151.517,167.318 160.5,164.5 Z'/>`,`<path fill='${e}' d='M 335.5,164.5 C 358.647,162.813 369.147,173.48 367,196.5C 361.494,211.009 350.994,216.842 335.5,214C 320.991,208.494 315.158,197.994 318,182.5C 320.683,173.318 326.517,167.318 335.5,164.5 Z'/>`,`<path fill='${e}' d='M 164.5,296.5 C 172.699,295.1 179.865,297.1 186,302.5C 201.99,327.582 224.823,341.582 254.5,344.5C 279.499,342.418 299.999,331.751 316,312.5C 318.955,308.756 321.789,304.922 324.5,301C 334.716,294.616 344.55,295.116 354,302.5C 358.296,308.845 359.63,315.845 358,323.5C 334.118,361.698 299.618,382.365 254.5,385.5C 209.382,382.365 174.882,361.698 151,323.5C 148.138,310.557 152.638,301.557 164.5,296.5 Z'/>`].join(""),n=this.createBase64SVG(512,512,t);this.playheadStyle.setProperty("--smiley",n),this.playheadStyle.setProperty("--thumb-size",`${Math.round(1.25*this.fontSize)}px`)}createBase64SVG(e,t,n){return`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${t}'>${n}</svg>")`}toDashName(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}},kf="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API";function Sf(){return xf.isLight&&xf.isFrameLight?xf.frameColor:xf.textColor}const Ef=[{providerId:"waveform",name:"wave",externalUrl:`${kf}#creating_a_waveformoscilloscope`,config:{onPaint:({context2D:e,width:t,height:n,analyser:r})=>{const i=r.frequencyBinCount,a=new Uint8Array(i),o=t/i;let l=0;e.lineWidth=Math.round(xf.fontSize/4),e.clearRect(0,0,t,n),e.strokeStyle=Sf(),e.beginPath(),r.getByteTimeDomainData(a);for(let t=0;t<i;t++){const r=a[t]/128*n/2;0===t?e.moveTo(l,r):e.lineTo(l,r),l+=o}e.lineTo(t,n/2),e.stroke()}}},{providerId:"waveform",name:"bars",externalUrl:`${kf}#creating_a_frequency_bar_graph`,config:{onPaint:({context2D:e,width:t,height:n,analyser:r})=>{const i=r.frequencyBinCount,a=new Uint8Array(i);r.getByteFrequencyData(a),e.clearRect(0,0,t,n),e.fillStyle=Sf();const o=(t-30)/16,l=.0075*n,s=i/16;let c,u=0;for(let t=0;t<i;t+=s){const r=a.slice(t,t+s).reduce(((e,t)=>e+t),0)/s;c=l*r,e.fillRect(u,n-c/2,o,c/2),u+=o+2}}}}],Cf=Ef,Pf=new class extends od{constructor(e){super(),this.analyser=e,this.canvas=document.createElement("canvas"),this.context2D=this.canvas.getContext("2d"),this.animationFrameId=0,this.canvas.hidden=!0,this.canvas.className="visualizer visualizer-waveform"}get hidden(){return this.canvas.hidden}set hidden(e){this.canvas.hidden!==e&&(this.canvas.hidden=e,e||this.animationFrameId||this.render(performance.now()))}appendTo(e){e.append(this.canvas)}load(e){$d.log("load"),e&&($d.log(`Using Waveform preset: ${e.name}`),this.config=e.config),this.autoplay&&this.play()}play(){$d.log("play"),this.animationFrameId||this.render(performance.now())}pause(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0)}stop(){this.pause(),this.clear()}resize(e,t){this.canvas.width=e,this.canvas.height=t,this.renderFrame(performance.now())}clear(){const e=this.canvas.width,t=this.canvas.height;this.context2D.clearRect(0,0,e,t)}render(e){this.renderFrame(e),this.autoplay&&!this.canvas.hidden&&(this.animationFrameId=requestAnimationFrame((e=>this.render(e))))}renderFrame(e){var t,n;const r=this.context2D,i=this.canvas.width,a=this.canvas.height,o=this.analyser;null===(n=null===(t=this.config)||void 0===t?void 0:t.onPaint)||void 0===n||n.call(t,{context2D:r,width:i,height:a,now:e,analyser:o})}}(td),Tf={id:"waveform",name:"Waveform",player:Pf,visualizers:Cf,observeVisualizers:()=>zt(Cf)};function Af(){return[ec,md,yd,Cd,_d,Tf]}function zf(e){return Af().find((t=>t.id===e))}function If(e){var t;return(null===(t=zf(e))||void 0===t?void 0:t.visualizers)||[]}console.log("module::visualizerPlayer");const Nf=new l("visualizerPlayer"),Mf=new Es(Af().map((e=>e.player)),(function(e){return function(e){var t;return null===(t=zf(e))||void 0===t?void 0:t.player}(e.providerId)||null}),(function(e,t){e.load(t)}));Mf.loop=!0,Mf.muted=!0,Mf.volume=.07,Mf.observeError().subscribe(Nf.error);const Of=Mf;var _f,$f,Lf=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Df=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};const jf=new l("MusicKitPlayer"),Rf="Apple Music player not connected.",Ff="Video playback not supported.";_f=new WeakMap,$f=new WeakMap;const Bf=new class{constructor(e){this.isLoggedIn$=e,this.paused$=new Jt(!0),this.duration$=new Xt,this.currentTime$=new Xt,this.ended$=new Xt,this.playing$=new Xt,this.error$=new Xt,this.playerReady$=new Xt,this.activated$=new Jt(!1),this.src$=new Jt(""),this.loadedSrc="",this.isLoggedIn=!1,this.hasPlayed=!1,this.loop=!1,this.autoplay=!1,_f.set(this,!0),$f.set(this,1),this.onPlaybackStateChange=({state:e})=>{switch(e){case MusicKit.PlaybackStates.playing:{const[,,e]=this.src.split(":"),t=this.player.nowPlayingItem;!1===(null==t?void 0:t.isPlayable)&&(null==t?void 0:t.id)===e?(this.error$.next(Error("Unplayable")),this.stop()):this.paused?this.pause():this.playing$.next(void 0);break}case MusicKit.PlaybackStates.ended:this.ended$.next(void 0)}},this.onPlaybackDurationChange=({duration:e})=>{this.duration$.next(e)},this.onPlaybackTimeChange=({currentPlaybackTime:e})=>{this.currentTime$.next(e)},this.onPlaybackError=e=>{this.error$.next(e)};const t=this.element=document.createElement("div");t.hidden=!0,t.className="apple-video",t.id="apple-music-video-container",this.observeIsLoggedIn().pipe(xt((e=>e)),zn((()=>{const e=this.player=MusicKit.getInstance(),t=MusicKit.Events;e.addEventListener(t.playbackStateDidChange,this.onPlaybackStateChange),e.addEventListener(t.playbackDurationDidChange,this.onPlaybackDurationChange),e.addEventListener(t.playbackTimeDidChange,this.onPlaybackTimeChange),e.addEventListener(t.mediaPlaybackError,this.onPlaybackError),e.volume=this.muted?0:this.volume,this.playerReady$.next(void 0)})),qt(1)).subscribe(jf),this.observeReady().pipe(kt((()=>this.observeIsLoggedIn())),kt((e=>e?this.observePaused():ct)),kt((e=>e?ct:this.observeSrc())),kt((e=>{if(e&&e!==this.loadedSrc){if(!this.canPlay(e))return this.error$.next(Error(Ff)),ct;const[,t,n]=e.split(":");return gt(this.player.setQueue({[t]:n})).pipe(kt((()=>(this.loadedSrc=e,this.autoplay?this.safePlay():ct))),Mn((e=>(this.loadedSrc="",this.error$.next(e),ct))))}return ct}))).subscribe(jf),this.observeIsLoggedIn().pipe(sa((e=>e===this.isLoggedIn))).subscribe((e=>{var t;this.isLoggedIn=e,!e&&(null===(t=this.player)||void 0===t?void 0:t.isPlaying)&&(this.stop(),this.error$.next(Error(Rf)))})),this.observeError().subscribe(jf.error)}get hidden(){return this.element.hidden}set hidden(e){this.element.hidden=e}get muted(){return Lf(this,_f,"f")}set muted(e){Lf(this,_f,"f")!==e&&(Df(this,_f,e,"f"),this.player&&(this.player.volume=e?0:this.volume))}get volume(){return Lf(this,$f,"f")}set volume(e){Lf(this,$f,"f")!==e&&(Df(this,$f,e,"f"),this.player&&(this.player.volume=this.muted?0:e))}observeCurrentTime(){return this.currentTime$.pipe(Zt())}observeDuration(){return this.duration$.pipe(Zt())}observePlaying(){return this.playing$}observeEnded(){return this.ended$}observeError(){return this.error$}appendTo(e){e.appendChild(this.element)}load(e){jf.log("load"),this.autoplay&&this.activated$.next(!0),this.src$.next(e),this.autoplay&&this.paused$.next(!1),this.player&&this.isLoggedIn?this.autoplay&&(e===this.loadedSrc?this.safePlay():this.canPlay(e)||this.error$.next(Error(Ff))):this.autoplay&&this.error$.next(Error(Rf))}play(){jf.log("play"),this.activated$.next(!0),this.paused$.next(!1),this.player&&this.isLoggedIn?this.src===this.loadedSrc?this.safePlay():this.canPlay(this.src)||this.error$.next(Error(Ff)):this.error$.next(Error(Rf))}pause(){var e;jf.log("pause"),this.paused$.next(!0),(null===(e=this.player)||void 0===e?void 0:e.isPlaying)&&this.player.pause()}stop(){jf.log("stop"),this.paused$.next(!0),this.hasPlayed&&this.player.stop()}seek(e){var t;null===(t=this.player)||void 0===t||t.seekToTime(e)}resize(e,t){this.element.style.width=`${e}px`,this.element.style.height=`${t}px`}get paused(){return this.paused$.getValue()}get src(){return this.src$.getValue()}observeIsLoggedIn(){return this.isLoggedIn$}observePaused(){return this.paused$.pipe(Zt())}observeReady(){return this.playerReady$.pipe(kt((()=>this.activated$)),xt((e=>e)),Je((()=>{})),qt(1))}observeSrc(){return this.src$.pipe(Zt())}canPlay(e){var t;return!(null===(t=this.player)||void 0===t?void 0:t.version.startsWith("1"))||!/musicVideo/.test(e)}safePlay(){var e,t,n,r,i;return t=this,n=void 0,i=function*(){try{!1===(null===(e=this.player)||void 0===e?void 0:e.isPlaying)&&(yield this.player.play(),this.hasPlayed=!0)}catch(e){this.error$.next(e)}},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}))}}(vn());console.log("module::mediaPlayer");const Vf=new Us("audio","main"),Uf=new Us("video","main"),Hf=new Fs("main"),Wf=new Es([Vf,Uf,Hf,Bf,lo],(function(e){return e?e.src.startsWith("youtube:")?Hf:e.src.startsWith("apple:")?Bf:e.src.startsWith("spotify:")?lo:e.mediaType===yn.Video?Uf:Vf:null}),(function(e,t){if(null==t?void 0:t.unplayable)throw Error("Unplayable.");e.load(function(e){return e?e.blob?URL.createObjectURL(e.blob):e.src||"":""}(t))}));var qf=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::jellyfinReporting");const Yf=new l("jellyfinReporting");function Kf(e,t,n,r){return qf(this,void 0,void 0,(function*(){try{const[,,i]=e.src.split(":");yield cr.post("Sessions/Playing/Progress",{ItemId:i,IsPaused:n,PositionTicks:Math.floor(1e7*t),PlayMethod:"Transcode",EventName:r})}catch(e){Yf.error(e)}}))}console.log("module::jellyfinScrobbler");const Qf=new l("jellyfinScrobbler"),Xf=e=>{var t;return!!(null===(t=e.currentItem)||void 0===t?void 0:t.src.startsWith("jellyfin:"))};kr().pipe(kt((e=>e?ac():ct)),xt(Xf),et((({currentItem:e})=>function(e){return qf(this,void 0,void 0,(function*(){try{const[,,t]=e.src.split(":");yield cr.post("Sessions/Playing",{ItemId:t,IsPaused:!1,PositionTicks:0,PlayMethod:"Transcode"})}catch(e){Yf.error(e)}}))}(e)))).subscribe(Qf),kr().pipe(kt((e=>e?oc():ct)),xt(Xf),et((({currentItem:e,currentTime:t})=>function(e,t){return qf(this,void 0,void 0,(function*(){try{const[,,n]=e.src.split(":");yield cr.post("Sessions/Playing/Stopped",{ItemId:n,IsPaused:!1,PositionTicks:Math.floor(1e7*t),PlayMethod:"Transcode"})}catch(e){Yf.error(e)}}))}(e,t)))).subscribe(Qf),kr().pipe(kt((e=>e?lc(1e4):ct)),xt(Xf),et((({currentItem:e,currentTime:t,paused:n})=>Kf(e,t,n,"timeupdate")))).subscribe(Qf),kr().pipe(kt((e=>e?ac():ct)),kt((e=>Xf(e)?ic().pipe(Zt(((e,t)=>e.paused===t.paused)),Qa(1),St(oc())):ct)),et((({currentItem:e,currentTime:t,paused:n})=>Kf(e,t,n,n?"pause":"unpause")))).subscribe(Qf);const Gf=new f("scrobbling"),Jf=new Jt(Gf.getJson("noScrobble",{})),Zf=new Jt(Gf.getJson("options",{}));function em(e,t){var n;const r=Jf.getValue()[e.id];return!(null!==(n=null==r?void 0:r[t.id])&&void 0!==n?n:t.defaultNoScrobble)}function tm(e,t){const n=Jf.getValue(),r=n[e.id],i=Object.assign(Object.assign({},r),t),a=Object.assign(Object.assign({},n),{[e.id]:i});Gf.setJson("noScrobble",a),Jf.next(a)}function nm(e){var t;return!!(null===(t=Zf.getValue()[e.id])||void 0===t?void 0:t.updateNowPlaying)}function rm(e,t){const n=Zf.getValue(),r=n[e.id],i=Object.assign(Object.assign({},r),t),a=Object.assign(Object.assign({},n),{[e.id]:i});Gf.setJson("options",a),Zf.next(a)}const im={canScrobble:em,setNoScrobble:tm,canUpdateNowPlaying:nm,updateOptions:rm};console.log("module::lastfmScrobbler");const am=new l("lastfmScrobbler");function om(e){const[t]=e.src.split(":"),n=jo(t);return!n||im.canScrobble(oi,n)}qr().pipe(kt((e=>e?ac():ct)),xt((()=>im.canUpdateNowPlaying(oi))),Je((({currentItem:e})=>e)),xt(y),xt((e=>om(e))),et((e=>Gr.updateNowPlaying(e)))).subscribe(am),qr().pipe(kt((e=>e?dl():ct)),Je((e=>e.filter((e=>!e.lastfmScrobbledAt)))),tl(1e4),et((e=>function(e){return t=this,n=void 0,i=function*(){try{if(0===e.length)return;const t=e[0].playedAt+Math.floor(e[0].duration),n=e.at(-1).playedAt,r=new Zr({from:n-30,to:t+30,limit:Zr.maxPageSize}),i=yield Yt(r),a=i.map((e=>ml(e,30))),[o,l]=x(e,(e=>!om(e)||a.includes(ml(e,30))||!!pl(i,e)));if(yield fl(o.map((e=>Object.assign(Object.assign({},e),{lastfmScrobbledAt:-1})))),l.length>0){l.reverse(),l.length=Math.min(l.length,50),yield Gr.scrobble(l);const e=Math.floor(Date.now()/1e3);yield fl(l.map((t=>Object.assign(Object.assign({},t),{lastfmScrobbledAt:e}))))}}catch(e){am.error(e)}},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}(e)))).subscribe(am);console.log("module::listenbrainzScrobbler");const lm=new l("listenbrainzScrobbler");function sm(e){const[t]=e.src.split(":"),n=jo(t);return!n||im.canScrobble(Mi,n)}vi().pipe(kt((e=>e?ac():ct)),xt((()=>im.canUpdateNowPlaying(Mi))),Je((({currentItem:e})=>e)),xt(y),xt((e=>sm(e))),et((e=>wi.updateNowPlaying(e)))).subscribe(lm),vi().pipe(kt((e=>e?dl():ct)),Je((e=>e.filter((e=>!e.listenbrainzScrobbledAt)))),tl(1e4),et((e=>function(e){return t=this,n=void 0,i=function*(){try{if(0===e.length)return;const t=e[0].playedAt+Math.floor(e[0].duration),n=e.at(-1).playedAt,r=new xi({min_ts:n-30,max_ts:t+30,count:xi.maxPageSize}),i=yield Yt(r),a=i.map((e=>ml(e,30))),[o,l]=x(e,(e=>!sm(e)||a.includes(ml(e,30))||!!pl(i,e)));if(yield fl(o.map((e=>Object.assign(Object.assign({},e),{listenbrainzScrobbledAt:-1})))),l.length>0){l.reverse(),l.length=Math.min(l.length,50),yield wi.scrobble(l);const e=Math.floor(Date.now()/1e3);yield fl(l.map((t=>Object.assign(Object.assign({},t),{listenbrainzScrobbledAt:e}))))}}catch(e){lm.error(e)}},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}(e)))).subscribe(lm);var cm=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module::plexReporting");const um=new l("plexReporting");let dm=null;function fm(e,t,n){return cm(this,void 0,void 0,(function*(){try{yield mm(e,t,n)}catch(e){um.error(e)}}))}function mm(e,t,n,r){return cm(this,void 0,void 0,(function*(){const[,,i]=e.src.split(":");yield Ri.fetch({path:"/:/timeline",params:{key:i,ratingKey:e.plex.ratingKey,playQueueItemID:String(dm.playQueueSelectedItemID),state:n,hasMDE:"1",time:String(Math.floor(1e3*t)),duration:String(Math.floor(1e3*e.duration))},keepalive:r})}))}console.log("module::plexScrobbler");const pm=new l("plexScrobbler"),hm=e=>{var t;return!!(null===(t=e.currentItem)||void 0===t?void 0:t.src.startsWith("plex:"))};Yi().pipe(kt((e=>e?ac():ct)),xt(hm),et((({currentItem:e})=>function(e){return cm(this,void 0,void 0,(function*(){try{const[,,t]=e.src.split(":");dm=yield function(e){return cm(this,void 0,void 0,(function*(){return Ri.fetchJSON({path:"/playQueues",method:"POST",params:{type:"music",continuous:"0",uri:`server://${_i.server.clientIdentifier}/com.plexapp.plugins.library/${e}`,repeat:"0",own:"1",includeExternalMedia:"1"}})}))}(t),yield mm(e,0,"playing")}catch(e){um.error(e)}}))}(e)))).subscribe(pm),Yi().pipe(kt((e=>e?oc():ct)),xt(hm),et((({currentItem:e})=>function(e){return cm(this,void 0,void 0,(function*(){try{yield mm(e,0,"stopped",!0)}catch(e){um.error(e)}}))}(e)))).subscribe(pm),Yi().pipe(kt((e=>e?lc(1e4):ct)),xt(hm),et((({currentItem:e,currentTime:t,paused:n})=>fm(e,t,n?"paused":"playing")))).subscribe(pm),Yi().pipe(kt((e=>e?ac():ct)),kt((e=>hm(e)?ic().pipe(Zt(((e,t)=>e.paused===t.paused)),Qa(1),St(oc())):ct)),et((({currentItem:e,currentTime:t,paused:n})=>fm(e,t,n?"paused":"playing")))).subscribe(pm);const vm=new l("mediaPlayback/scrobbler");oc().pipe(et((e=>function(e){var t;return al(this,void 0,void 0,(function*(){try{const n=e.currentItem;if(!n||!e.startedAt||!e.endedAt)throw Error("Invalid PlaybackState.");if(n.title&&(null===(t=n.artists)||void 0===t?void 0:t[0])&&n.duration>30){const t=Math.min(n.duration/2,240),r=Math.floor(e.startedAt/1e3);if(Math.floor(e.endedAt/1e3)-r>t){const{id:e,lookupStatus:t}=n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(n,["id","lookupStatus"]);ol.log("add",{listen:i}),yield ul.items.add(Object.assign(Object.assign({},i),{playedAt:r,lastfmScrobbledAt:0,listenbrainzScrobbledAt:0}))}}}catch(e){ol.error(e)}}))}(e)))).subscribe(vm);console.log("module::mediaPlayback");const gm=new l("mediaPlayback"),bm=new f("mediaPlayback"),ym=new f("mediaPlayback","session"),wm=new Jt(!1),xm=new Xt;let km="forward";function Sm(){return bs.observeCurrentItem()}function Em(){return uc.observeCurrentTime()}function Cm(){return uc.observeDuration()}function Pm(){return Wf.observeEnded()}function Tm(){return uc.observePaused()}function Am(){return uc.observePlaybackStart()}function zm(){return uc.observePlaybackEnd()}function Im(){return Wf.observePlaying()}function Nm(e){gm.log("load",{item:e}),Wf.load(e),Wf.autoplay&&uc.play()}function Mm(){gm.log("play"),km="forward",Vm(),uc.play(),uc.paused||Wf.play()}function Om(){gm.log("pause"),Vm(),uc.pause(),Wf.pause()}function _m(e){gm.log("seek",{time:C(e)}),Wf.seek(e)}function $m(){gm.log("stop"),Vm(),uc.stop(),Wf.stop()}function Lm(){km="backward",bs.atStart||(Bm(),bs.prev())}function Dm(){km="forward",bs.atEnd||(Bm(),bs.next())}function jm(){Bm(),bs.eject()}function Rm(){bs.shuffle()}function Fm(){return Pn([bs.observeCurrentIndex(),bs.observeSize()]).pipe(Je((([e,t])=>e===t-1)),Zt())}function Bm(){uc.paused||!1!==wm.getValue()||(uc.stop(),Wf.stop(),uc.play()),wm.next(!0)}function Vm(){wm.next(!1)}function Um(e){return t=this,n=void 0,i=function*(){if(!Fo(e)){const t=yield zl(e);if(t)return Object.assign(Object.assign({},e),t)}return e},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}const Hm={get autoplay(){return Wf.autoplay},set autoplay(e){Wf.autoplay=e,Of.autoplay=e},get hidden(){return!1},get loop(){return!1},get muted(){return Wf.muted},set muted(e){ym.setBoolean("muted",e),Wf.muted=e},get paused(){return uc.paused},get volume(){return Wf.volume},set volume(e){bm.setNumber("volume",e),Wf.volume=e},observeCurrentItem:Sm,observeCurrentTime:Em,observeDuration:Cm,observeEnded:Pm,observeError:function(){return Wf.observeError()},observePaused:Tm,observePlaying:Im,observePlaybackStart:Am,observePlaybackEnd:zm,observePlaybackProgress:function(e){return uc.observePlaybackProgress(e)},observePlaybackState:function(){return uc.observePlaybackState()},appendTo:function(e){const t=e.querySelector("#players"),n=e.querySelector("#visualizers");Wf.appendTo(t),Of.appendTo(n)},load:Nm,play:Mm,pause:Om,stop:$m,seek:_m,resize:function(e,t){Wf.resize(e,t),Of.resize(e,t)},next:Dm,prev:Lm,shuffle:Rm},Wm=Hm;Hm.muted=ym.getBoolean("muted"),Hm.volume=bm.getNumber("volume",1),Wf.observeCurrentTime().subscribe((e=>uc.setCurrentTime(e))),Wf.observeDuration().subscribe((e=>uc.setDuration(e))),Wf.observePlaying().subscribe((()=>uc.started())),Wf.observeEnded().subscribe((()=>uc.ended())),Wf.observePlaying().subscribe((()=>km="forward")),Wf.observeEnded().pipe(Ka(Fm()),St(xm)).subscribe((([,e])=>{e?$m():bs.next()})),Wf.observeError().pipe(Ka(Tm(),bs.observeCurrentIndex().pipe(Je((e=>0===e)),Zt()),Fm()),St(xm)).subscribe((([,e,t,n])=>{n||t&&"backward"===km?$m():e||("backward"===km?bs.prev():bs.next())})),bs.observeSize().pipe(Je((e=>0===e)),Zt(),xt((e=>e))).subscribe($m),wm.pipe(tl(250),xt((e=>e))).subscribe((()=>{Hm.autoplay=!uc.paused,wm.next(!1)})),wm.pipe(Zt(),kt((e=>e?ct:Sm())),Zt(((e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id))),kt((e=>e?Um(e):zt(null))),zn(Nm)).subscribe(gm),wm.pipe(Zt(),kt((e=>e?ct:bs.observeNextItem())),Zt(((e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id))),tl(1e4),kt((e=>e?Um(e):ct))).subscribe(gm),ot(window,"pagehide").subscribe((function(){xm.next(void 0),$m()})),Cm().pipe(Je(C),Zt()).subscribe(gm.rx("duration")),Em().pipe(xt((e=>Math.round(e)%30==0)),Je(C)).subscribe(gm.rx("currentTime")),Im().subscribe(gm.rx("playing")),Pm().subscribe(gm.rx("ended")),Am().subscribe(gm.rx("playbackStart")),zm().subscribe(gm.rx("playbackEnd"));var qm=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};console.log("module:musicbrainz/coverart");const Ym=new l("musicbrainz/coverart");class Km extends il.ZP{constructor(){super("ampcast/musicbrainz/coverart"),this.version(1).stores({items:"&mbid, album, artist, thumbnails"})}}const Qm=new Km;function Xm(e){switch(e){case"small":return 250;case"large":return 500;default:return Number(e)||0}}function Gm({item:e,maxSize:t,className:n=""}){const[i,a]=(0,r.useState)((()=>e.thumbnails)),o=!!(null==i?void 0:i.length),l=o?function(e,t=360,n=1){e.sort(((e,t)=>t.width*t.height-e.width*e.height));const[r,i]=x(e,(e=>e.width<=t&&e.height<=t));return r.length>0?(r.sort(((e,t)=>{const r=e.width/e.height,i=Math.abs(r-n),a=t.width/t.height;return i-Math.abs(a-n)})),r[0]):i[i.length-1]}(i,t):void 0,s=l?Jm(l):"",c=function(e){switch(e){case Wt.Artist:return"person";case Wt.Album:return"album";case Wt.Media:return"note"}}(e.itemType);(0,r.useLayoutEffect)((()=>{if(!o){if(e.itemType===Wt.Media){const t=hl(e);if(t&&t.thumbnails)return void a(t.thumbnails)}const t=gt(function(e){var t;return qm(this,void 0,void 0,(function*(){if(!e||e.itemType!==Wt.Album&&e.itemType!==Wt.Media)return;let n=!1;const r=e.release_mbid;if(r){const e=yield Qm.items.get(r);if(n=!!e,null==e?void 0:e.thumbnails)return e.thumbnails}let i,a;if(e.itemType===Wt.Album?(i=e.title,a=e.artist):(i=e.album,a=e.albumArtist||(null===(t=e.artists)||void 0===t?void 0:t[0])),i&&a){const e=yield Qm.items.get({album:i,artist:a});if(e)return e.thumbnails}if(r&&!n)try{const e=yield function(e){return qm(this,void 0,void 0,(function*(){const t=yield fetch(`https://coverartarchive.org/release/${e}`);if(!t.ok)throw t;return t.json()}))}(r),t=e.images.filter((e=>e.front&&e.approved))[0],n=t?Object.keys(t.thumbnails).filter((e=>0!==Xm(e))).map((e=>({url:t.thumbnails[e],width:Xm(e),height:Xm(e)}))):[];return yield Qm.items.put(0===n.length?{mbid:r}:{mbid:r,album:i,artist:a,thumbnails:n}),n}catch(e){404===e.status?yield Qm.items.put({mbid:r}):Ym.error(e)}}))}(e)).subscribe(a);return()=>t.unsubscribe()}}),[o,e]);const u=(0,r.useCallback)((e=>{e.target.removeAttribute("src")}),[]);return r.createElement("figure",{className:`cover-art ${n}`},s?r.createElement("img",{className:"cover-art-image",src:s,onError:u}):c?r.createElement(dr,{className:"cover-art-image",name:c}):null)}function Jm(e){return e.url.replace("{plex-token}",_i.serverToken)}function Zm({item:e}){switch(e.itemType){case Wt.Media:return r.createElement(ep,{item:e});case Wt.Artist:return r.createElement(np,{item:e});case Wt.Album:return r.createElement(tp,{item:e});case Wt.Playlist:return r.createElement(rp,{item:e})}}function ep({item:e}){var t;return r.createElement("article",{className:"media-info media-item-info"},r.createElement("div",{className:"media-info-main"},r.createElement(fp,{item:e}),r.createElement(ip,{title:e.title}),r.createElement(op,{artist:null===(t=e.artists)||void 0===t?void 0:t.join(", ")}),r.createElement(cp,{album:e.album,year:e.year}),r.createElement(up,{album:e.album,track:e.track}),r.createElement(lp,{owner:e.owner,src:e.src})),r.createElement(sp,{url:e.externalUrl,src:e.src}))}function tp({item:e}){return r.createElement("article",{className:"media-info album-info"},r.createElement("div",{className:"media-info-main"},r.createElement(fp,{item:e}),r.createElement(ip,{title:e.title}),r.createElement(op,{artist:e.artist}),r.createElement(dp,{year:e.year})),r.createElement(sp,{url:e.externalUrl,src:e.src}))}function np({item:e}){return r.createElement("article",{className:"media-info artist-info"},r.createElement("div",{className:"media-info-main"},r.createElement(fp,{item:e}),r.createElement(ip,{title:e.title})),r.createElement(sp,{url:e.externalUrl,src:e.src}))}function rp({item:e}){return r.createElement("article",{className:"media-info playlist-info"},r.createElement("div",{className:"media-info-main"},r.createElement(fp,{item:e}),r.createElement(ip,{title:e.title}),r.createElement(lp,{owner:e.owner,src:e.src})),r.createElement(sp,{url:e.externalUrl,src:e.src}),r.createElement(ap,{description:e.description}))}function ip({title:e}){return r.createElement("h3",{className:"title"},e||"(no title)")}function ap({description:e}){return e?r.createElement("div",{className:"blurb text-box"},r.createElement("p",null,e)):null}function op({artist:e}){return e?r.createElement("h4",{className:"artist"},"By: ",e):null}function lp({src:e,owner:t}){if(!t||!t.name)return null;const[n]=e.split(":"),i="youtube"===n?"Channel":"Curator";return r.createElement("p",{className:"owner"},i,":"," ",t.url?r.createElement(li,{href:t.url},t.name):t.name)}function sp({src:e,url:t}){if(!t)return null;let[n]=e.split(":"),i="";switch(n){case"musicbrainz":i="MusicBrainz";break;case"listenbrainz":/musicbrainz/.test(t)?(i="MusicBrainz",n="musicbrainz"):i="ListenBrainz";break;default:{const e=jo(n);e&&(i=e.name)}}return r.createElement("p",{className:"external-view"},i?r.createElement(r.Fragment,null,"View on ",i,": ",r.createElement(dr,{name:n})," "):r.createElement(r.Fragment,null,"Url: "),r.createElement(li,{href:t}))}function cp({album:e,year:t}){return e&&t?r.createElement("h4",{className:"album"},"From: ",e," (",t,")"):e?r.createElement("h4",{className:"album"},"From: ",e):t?r.createElement("h4",{className:"album"},"Year: ",t):null}function up({album:e,track:t}){return e&&t?r.createElement("p",{className:"track"},"Track: #",t):null}function dp({year:e}){return e?r.createElement("p",{className:"year"},"Year: ",e):null}function fp(e){return r.createElement("div",{className:"thumbnail"},r.createElement(Gm,Object.assign({},e)))}function mp(e){hr((t=>r.createElement(pp,Object.assign({},t,{item:e}))))}function pp(e){var{item:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["item"]);const i=function(e){switch(e.itemType){case Wt.Playlist:return"Playlist info";case Wt.Album:return"Album info";case Wt.Artist:return"Artist info";default:return"Media info"}}(t);return r.createElement(pr,Object.assign({},n,{className:"media-info-dialog",title:i}),r.createElement("form",{method:"dialog"},r.createElement(Zm,{item:t}),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",null,"Close"))))}function hp(e,t){const[n,i]=(0,r.useState)(t),a=(0,r.useMemo)(e,[e]);return(0,r.useEffect)((()=>{const e=a.subscribe(i);return()=>e.unsubscribe()}),[a]),n}function vp(){return hp(cs,null)}let gp=null,bp="none";const yp=function(e){return"#globalDrag"===e.dataTransfer.getData("text")?gp:null},wp=function(e){return"#globalDrag"===e.dataTransfer.getData("text")?bp:"none"},xp=function(e,t,n){e.dataTransfer.setData("text","#globalDrag"),e.dataTransfer.effectAllowed=n,gp=t,bp=n},kp=function(){gp=null,bp="none"};function Sp(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}function Ep({style:e,title:t}){return r.createElement("div",{className:"list-view-cell",style:e},t)}function Cp({col:e,onResize:t}){const[n,i]=(0,r.useState)(e.width),[a,o]=(0,r.useState)(-1),[l,s]=(0,r.useState)(0),c=-1!==a,u=(0,r.useCallback)((e=>{e.preventDefault(),0===e.button&&(o(e.screenX),s(n))}),[n]);(0,r.useEffect)((()=>t(e.index,n)),[e.index,n,t]);const d=(0,r.useCallback)((e=>{i(Math.max(20,l+(e.screenX-a)))}),[a,l]),f=(0,r.useCallback)((()=>{o(-1),s(0)}),[]);return(0,r.useEffect)((()=>{if(c)return document.documentElement.style.cursor="col-resize",document.body.classList.add("dragging"),document.addEventListener("mouseup",f),document.addEventListener("mousemove",d),()=>{document.documentElement.style.cursor="",document.body.classList.remove("dragging"),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",d)}}),[c,d,f]),r.createElement("span",{className:"column-resizer",onMouseDown:u,style:{left:e.left+n-4+"px"}})}function Pp({width:e,height:t,cols:n,sizeable:i,onColumnResize:a}){const o=(0,r.useCallback)(((e,t)=>{null==a||a(e,t)}),[a]);return r.createElement("header",{className:"list-view-head",style:{width:`${e}px`}},r.createElement("div",{className:"list-view-row",style:{width:`${e}px`,height:`${t}px`}},n.map((e=>r.createElement(Ep,Object.assign({},e,{key:e.title}))))," ",i&&n.map((e=>r.createElement(Cp,{col:e,onResize:o,key:e.title})))))}function Tp({rowIndex:e,col:{className:t="",render:n,style:i},item:a}){return r.createElement("div",{className:`list-view-cell ${t}`,style:i},n(a,e))}function Ap({item:e,className:t,rowIndex:n,height:i,selected:a,cols:o,setSize:l,dragIndex:s}){const c=`${t} ${a?"selected":""} ${s===l?n===l-1?"drag-over-last":"":s===n?"drag-over":""}`;return r.createElement("li",{role:"option",className:`list-view-row ${c}`,"aria-selected":a?"true":void 0,"aria-setsize":l,"aria-posinset":n+1,style:{height:`${i}px`,transform:`translateY(${i*n}px)`}},o.map((t=>r.createElement(Tp,{rowIndex:n,col:t,item:e,key:t.title}))))}function zp({width:e,height:t,rowHeight:n,cols:i,items:a,itemKey:o,itemClassName:l,scrollTop:s,overScan:c=20,selection:u,draggable:d,dragIndex:f}){const m=(0,r.useRef)(null),p=a.length,h=Math.floor(s/n),v=Math.floor(t/n),g=Math.max(0,h-c),b=Math.min(p,v+2*c),y=(0,r.useMemo)((()=>a.slice(g,g+b)),[a,g,b]);return r.createElement("ol",{role:"listbox",className:"list-view-body",draggable:d,style:{width:e?`${e}px`:void 0},ref:m},y.map(((e,t)=>r.createElement(Ap,{className:l(e),rowIndex:g+t,height:n,selected:u.includes(e),cols:i,item:e,setSize:p,dragIndex:f,key:e[o]}))))}const Ip=()=>"";function Np({items:e=[],itemKey:t,itemClassName:n=Ip,layout:i,className:a="",draggable:o,droppable:l,droppableTypes:s=[],multiSelect:c,reorderable:u,onClick:d,onDoubleClick:f,onContextMenu:m,onDrop:p,onDelete:h,onEnter:v,onInfo:g,onRowIndexChange:y,onScrollIndexChange:w,onPageSizeChange:x,onSelect:k,onMove:S,listViewRef:E}){var C;const P=(0,r.useRef)(null),T=(0,r.useRef)(null),A=(0,r.useRef)(null),z=(0,r.useRef)(null),I="details"===i.view&&i.showTitles,N="details"===i.view&&i.sizeable,[M,O]=(0,r.useState)(-1),[$,D]=(0,r.useState)(0),[j,R]=(0,r.useState)(0),[F,B]=(0,r.useState)(0),[V,U]=(0,r.useState)(0),[H,W]=function(e,t=!1){const[n,i]=(0,r.useState)([]);(0,r.useEffect)((()=>{i(e.reduce(((e,n,r)=>{const i=e[r-1],a=i?i.left+i.width:0,{className:o="",align:l="left",sortOrder:s="none",sortPriority:c=0,width:u=200}=n,d=t?{left:`${a}px`,width:`${u}px`,textAlign:l}:{textAlign:l};return e.push(Object.assign(Object.assign({},n),{className:o,align:l,index:r,left:a,width:u,style:d,sortOrder:s,sortPriority:c})),e}),[]))}),[e,t]);const a=(0,r.useCallback)(((e,r)=>{t&&n[e].width!==r&&i(n.reduce(((t,n,i)=>{if(i>=e){const a=t[i-1],o=a?a.left+a.width:0,l=i===e?r:n.width,s={left:`${o}px`,width:`${l}px`,textAlign:n.align};t.push(Object.assign(Object.assign({},n),{left:o,width:l,style:s}))}else t.push(n);return t}),[]))}),[n,t]);return[n,a]}(i.cols,N),q=(0,r.useMemo)((()=>H.reduce(((e,t)=>e+t.width),0)),[H]),Y=V?Math.floor(j/V)-(I?1:0):0,K=e.length,{selectedItems:Q,selectAll:X,selectAt:G,selectRange:J,toggleSelectionAt:Z}=function(e,t,n){const[i,a]=(0,r.useState)([]),o=Sp(e);(0,r.useLayoutEffect)((()=>{if(e!==o){const o=e.filter((e=>i.some((n=>n[t]===e[t]))));if(l=o,(r=i).length!==l.length||!r.every(((e,t)=>l[t]===e))){const t=e.length;t>0&&0===o.length?a(n<t?[e[n]]:n===t?[e[n-1]]:o):a(o)}}var r,l}),[o,e,i,t,n]);const l=(0,r.useCallback)((()=>{a(e.slice())}),[e]),s=(0,r.useCallback)((t=>{const n=e[t];a(n?[n]:[])}),[e]),c=(0,r.useCallback)(((t,n)=>{const r=Math.min(t,n),i=Math.max(t,n),o=e.slice(r,i+1);a(o)}),[e]),u=(0,r.useCallback)(((t,n)=>{const r=e[t],o=i.includes(r);o!==n&&a(o?i.filter((e=>e!==r)):i.concat(r))}),[e,i]);return{selectedItems:i,selectAll:l,selectAt:s,selectRange:c,toggleSelectionAt:u}}(e,t,M),ee=L(),[te,ne]=(0,r.useState)(-1),[re,ie]=(0,r.useState)(-1),[ae,oe]=(0,r.useState)(-1),le=0===K,se=null===(C=Sp(le))||void 0===C||C,ce=-1!==ae,ue=V?Math.floor($/V):0,de=It()&&!(0===M||M===K-1),fe=Sp(e),[me,pe]=(0,r.useState)((()=>Q)),[he,ve,ge,be]=o?Q:[];(0,r.useEffect)((()=>{E&&(E.current={selectAll:X})}),[E,X]),(0,r.useLayoutEffect)((()=>null==y?void 0:y(M)),[M,y]),(0,r.useLayoutEffect)((()=>null==w?void 0:w(ue)),[ue,w]),(0,r.useLayoutEffect)((()=>null==x?void 0:x(Y)),[Y,x]),(0,r.useLayoutEffect)((()=>null==k?void 0:k(me)),[me,k]),(0,r.useEffect)((()=>O(Math.min(K-1,M))),[K,M]),(0,r.useEffect)((()=>{if(fe&&e.length!==fe.length){const n=fe[M];if(n){const r=e.findIndex((e=>e&&e[t]===n[t]));-1!==r&&O(r)}}}),[e,fe,M,t]),(0,r.useEffect)((()=>{de||pe(Q)}),[Q,de]),(0,r.useEffect)((()=>{le?O(-1):se&&(O(0),G(0))}),[le,se,G]);const ye=(0,r.useCallback)((t=>{switch(t.key){case"Enter":t.stopPropagation(),t.repeat||null==v||v(Q,t[b.ctrlKey],t.shiftKey);break;case"Delete":t.stopPropagation(),null==h||h(Q);break;case"i":if(t.stopPropagation(),t[b.ctrlKey]&&!t.repeat){null==g||g(Q);break}break;case"Info":t.preventDefault(),t.stopPropagation(),t.repeat||null==g||g(Q);break;case"a":t[b.ctrlKey]&&(t.preventDefault(),t.stopPropagation(),t.repeat||X());break;case"Shift":t.repeat||ne(M);break;case" ":t.preventDefault(),t.repeat||(t[b.ctrlKey]?(t.stopPropagation(),Z(M)):Q.includes(e[M])||(t.stopPropagation(),Z(M,!0)));break;default:{const n=e.length,r=function(e,t,n,r){switch(e){case"ArrowUp":t-=1;break;case"ArrowDown":t+=1;break;case"PageUp":t-=n-1;break;case"PageDown":t+=n-1;break;case"Home":t=0;break;case"End":t=r-1;break;default:return-1}return Math.min(Math.max(t,0),r-1)}(t.key,M,Y,n);if(-1!==r){if(t.preventDefault(),r!==M){t.stopPropagation();const e=T.current,i=Math.floor($/V);if(r>=i+Y-1){const t=(n+(I?1:0))*V,i=n-Y-1,a=Math.min(n-1,r+1)-Y,o=a===i?t:a*V;e.scrollTo({top:o})}else if(r<=i){const t=Math.max(0,r-1)*V;e.scrollTo({top:t})}O(r)}c&&t.shiftKey&&-1!==te?J(te,r):t[b.ctrlKey]||G(r)}}}}),[M,e,Y,V,I,v,h,g,X,G,J,Z,Q,c,te,$]),we=(0,r.useCallback)((e=>{const t=Mp(e);-1!==t&&(O(t),c&&e[b.ctrlKey]?Z(t):c&&e.shiftKey?-1===te?J(t,M):J(te,t):function(e){const t=Op(e);return!!(null==t?void 0:t.classList.contains("selected"))}(e)||G(t))}),[G,Z,J,M,te,c]),xe=(0,r.useCallback)((e=>{if(0===e.button){const t=Mp(e);-1!==t&&(!c||e[b.ctrlKey]||e.shiftKey||G(t))}}),[G,c]),ke=(0,r.useCallback)((e=>{"Shift"===e.key&&ne(-1)}),[]),Se=(0,r.useCallback)((({width:e,height:t})=>{B(e),R(t)}),[]),Ee=(0,r.useCallback)((({top:e})=>{D(e)}),[]);_(A,(0,r.useCallback)((()=>{U(A.current.getBoundingClientRect().height)}),[])),(0,r.useLayoutEffect)((()=>{P.current.classList.toggle("thin",20*ee>F)}),[ee,F]);const Ce=(0,r.useCallback)((t=>{const n=Mp(t);-1!==n&&(t.preventDefault(),null==d||d(e[n],n))}),[e,d]),Pe=(0,r.useCallback)((e=>{e.preventDefault(),-1!==Mp(e)&&(null==m||m(Q,e.pageX,e.pageY))}),[Q,m]),Te=(0,r.useCallback)((t=>{const n=Mp(t);-1!==n&&(t.preventDefault(),null==f||f(e[n],n))}),[e,f]);(0,r.useEffect)((()=>{const e=z.current;for(;e.hasChildNodes();)e.removeChild(e.lastChild);const t=Array.from(P.current.querySelectorAll(".list-view-body:not(list-view-drag-image) li.selected"));t.length=Math.min(t.length,4);for(let n=0;n<t.length;n++){const r=t[n].cloneNode(!0);r.style.transform=`translateY(${V*n}px)`,e.appendChild(r)}}),[he,ve,ge,be,V]);const Ae=(0,r.useCallback)((e=>{const t=e.dataTransfer;if(o||u){t.setDragImage(z.current,-10,-10);let n="none";n=o&&u?"copyMove":o?"copy":"move",xp(e,Q,n),oe(M)}else t.effectAllowed="none"}),[o,u,Q,M]),ze=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer;if(l||u){const n=t.types.includes("text/plain");let r=Mp(e);-1===r&&(r=K),ce?u&&n?(t.dropEffect="move",ie(r)):(t.dropEffect="none",ie(-1)):l&&(n||_p(t.items,s))?(t.dropEffect="copy",ie(r)):(t.dropEffect="none",ie(-1))}else ce?t.dropEffect="copy":(t.dropEffect="none",ie(-1))}),[K,ce,l,s,u]),Ie=(0,r.useCallback)((e=>{if(l||u){const t=e.dataTransfer;let n=Mp(e);-1===n&&(n=K);const r=wp(e);if("copy"===r){const t=yp(e);t&&(null==p||p(t,n))}else if("move"===r){const e=ae<n?-1:0;null==S||S(Q,n),O(n+e)}else l&&_p(t.items,s)&&(null==p||p(t.files,n))}ie(-1),e.preventDefault(),e.stopPropagation()}),[K,Q,l,s,u,ae,p,S]),Ne=(0,r.useCallback)((()=>{kp(),oe(-1)}),[]),Me=(0,r.useCallback)((()=>{ie(-1)}),[]);return r.createElement("div",{className:`list-view list-view-${i.view} ${a}`,tabIndex:0,onClick:Ce,onContextMenu:Pe,onDoubleClick:Te,onDragStart:Ae,onDragEnter:ze,onDragOver:ze,onDragLeave:Me,onDragEnd:Ne,onDrop:Ie,onKeyDown:ye,onKeyUp:ke,onMouseDown:we,onMouseUp:xe,ref:P},r.createElement(At,{scrollWidth:N?q:void 0,scrollHeight:(K+(l?1:0)+(I?1:0))*V,scrollAmount:V,droppable:l||u&&ce,onResize:Se,onScroll:Ee,scrollableRef:T},I&&r.createElement(De,null,r.createElement(Pp,{width:q,height:V,sizeable:N,cols:H,onColumnResize:W})),r.createElement(zp,{width:N?q:void 0,height:j,rowHeight:V,cols:H,items:e,itemKey:t,itemClassName:n,scrollTop:$,selection:Q,dragIndex:re,draggable:o||u}),r.createElement("div",{className:"list-view-cursor",style:{width:N?`${Math.min(F,q)}px`:void 0,transform:`translateY(${M*V}px)`},ref:A}),r.createElement("ul",{className:"list-view-drag-image list-view-body",ref:z})))}function Mp(e){let t=0;const n=Op(e);return n&&(t=Number(n.getAttribute("aria-posinset"))||0),t-1}function Op(e){let t=e.target;for(;t&&!(null==t?void 0:t.hasAttribute("aria-posinset"));)t=t.parentElement;return t}function _p(e,t){return-1!==Array.from(e).findIndex((e=>t.some((t=>((e,t)=>{const[n,r]=e.split("/"),[i,a]=t.split("/");return n===i&&(r===a||"*"===r)})(t,e.type)))))}function $p({children:e}){return r.createElement("footer",{className:"status-bar"},e)}function Lp({items:e,size:t,maxSize:n,error:i,loading:a,loadingText:o="Loading",selectedCount:l,itemName:s="item",itemNamePlural:c=s+"s"}){let u="";if(a)u=r.createElement("span",{className:"message"},o,"...");else if(e.length>0){const i=e.reduce((e=>e+1),0),a=r.createElement("span",{className:"selected"},"(",Dp(l)," selected)"),o=i===t?`${t.toLocaleString()} ${1===t?s:c}`:`Loaded ${Dp(i)} of ${void 0===t?n||`${Dp(e.length)}+`:Dp(n?Math.min(t,n):t)} ${c}`;u=r.createElement("span",{className:"message"},o," ",a)}else if(i){const e=null==i?void 0:i.message;u=r.createElement("span",{className:"error"},e?`Error: ${e}`:"Error")}else u=r.createElement("span",{className:"message"},"0 ",c);return r.createElement($p,null,u)}function Dp(e=0){return(e=Number(e))<1e4?String(e):e.toLocaleString()}new Image(0,0).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1H\nAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";const jp=(0,r.memo)((function({time:e}){const t=100/6,n=new Date(e);let i=n.getHours()+n.getMinutes()/60,a=Math.min(i,6),o=i-a;return i>12&&(i=24-i,o=Math.min(i,6),a=i-o),r.createElement("span",{role:"presentation",className:"sun-clock",title:n.toLocaleTimeString(),style:{"--am-alpha":a*t+"%","--pm-alpha":o*t+"%"}})}));function Rp({time:e,className:t}){return r.createElement("time",{className:t},C(e))}const Fp={view:"details",fields:["Title","Genre","Owner"]};const Bp=e=>r.createElement(Rp,{time:e.duration||0}),Vp={Index:{title:"#",render:(e,t)=>t+1,className:"index",align:"right",width:60},Artist:{title:"Artist",render:e=>{var t;return e.itemType===Wt.Media?null===(t=e.artists)||void 0===t?void 0:t.join(", "):e.artist},className:"artist"},AlbumArtist:{title:"Album Artist",render:e=>e.albumArtist,className:"artist"},Title:{title:"Title",render:e=>e.title,className:"title"},Blurb:{title:"Description",render:e=>e.description,className:"blurb"},Album:{title:"Album",render:e=>e.album,className:"album"},AlbumAndYear:{title:"Album",render:e=>e.album?e.year?`${e.album} (${e.year})`:e.album:e.year||"",className:"album"},Track:{title:"Track",render:e=>e.track||"-",align:"right",width:80,className:"track"},Duration:{title:"Time",render:Bp,align:"right",width:120,className:"duration"},PlayCount:{title:"Play Count",render:e=>Up(e.playCount),align:"right",width:120,className:"play-count"},TrackCount:{title:"Tracks",render:e=>Up(e.trackCount),align:"right",width:120,className:"track-count"},Year:{title:"Year",render:e=>e.year||"",align:"right",width:120,className:"year"},Genre:{title:"Genre",render:e=>{var t;return null===(t=e.genres)||void 0===t?void 0:t.join(", ")},className:"genre"},Owner:{title:"Owner",render:e=>{var t;return null===(t=e.owner)||void 0===t?void 0:t.name},className:"owner"},LastPlayed:{title:"Last played",render:e=>{if(!e.playedAt)return"";const t=new Date(1e3*e.playedAt),n=function(e){const t=Date.now()-e,n=6e4;if(t<12e4)return"just now";const r=36e5;if(t<54e5)return`${Math.round(t/n)} mins ago`;const i=24*r;if(t<1.5*i)return`${Math.round(t/r)} hours ago`;if(t<12*i)return`${Math.round(t/i)} days ago`;const a=7*i;if(t<10*a)return`${Math.round(t/a)} weeks ago`;const o=365*i;return t<o?`${Math.round(t/2592e6)} months ago`:t<2*o?"1 year ago":`${Math.floor(t/o)} years ago`}(t.valueOf());return r.createElement("time",{title:t.toLocaleDateString()},n)},className:"played-at"},ListenDate:{title:"Played On",render:e=>{if(!e.playedAt)return"";const t=1e3*e.playedAt;return r.createElement("time",{className:"cv"},r.createElement(jp,{time:t}),new Date(t).toLocaleDateString())},className:"played-at"},Thumbnail:{title:"Thumbnail",render:e=>r.createElement(Gm,{item:e}),className:"thumbnail"}};function Up(e){if(null==e)return"";const t=Number(e);return isNaN(t)?"":t.toLocaleString()}function Hp(e){var{className:t="",pager:n=null,keepAlive:i,statusBar:a=!0,loadingText:o,onSelect:l,unplayable:s}=e,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","pager","keepAlive","statusBar","loadingText","onSelect","unplayable"]);const[u,d]=(0,r.useState)(0),f=function(e=Fp){return(0,r.useMemo)((()=>function(e){const{view:t,fields:n}=e,r=n.map((e=>Vp[e]));return"details"===t?{view:t,cols:r,showTitles:!0,sizeable:!0}:{view:t,cols:r}}(e)),[e])}(c.layout),[m,p]=(0,r.useState)(0),[h,v]=(0,r.useState)(0),[{items:g,loaded:b,error:y,size:w,maxSize:x},k]=function(e,t=!1){const[n,i]=function(){const e=(0,r.useRef)(null);null===e.current&&(e.current=new Xt),(0,r.useEffect)((()=>()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.complete()}),[]);const t=(0,r.useCallback)((t=>{e.current.next(t)}),[]);return[e.current,t]}(),[a,o]=(0,r.useState)([]),[l,s]=(0,r.useState)(void 0),[c,u]=(0,r.useState)(void 0),[d,f]=(0,r.useState)(),[m,p]=(0,r.useState)(!1),h=(0,r.useMemo)((()=>({items:a,size:l,maxSize:c,error:d,loaded:m})),[a,l,c,d,m]),v=(0,r.useCallback)(((e,t)=>{i([e,t])}),[i]);return(0,r.useEffect)((()=>{if(o([]),s(void 0),u(void 0),f(void 0),p(!1),!e)return;const r=e.observeItems(),i=e.observeSize(),a=e.observeError(),l=bt(r,a).pipe(qt(1),Je((()=>!0))),c=new J;return c.add(r.subscribe(o)),c.add(i.subscribe(s)),c.add(a.subscribe(f)),c.add(l.subscribe(p)),c.add(n.subscribe((([t,n])=>e.fetchAt(t,n)))),t||c.add((()=>e.disconnect())),u(e.maxSize),()=>c.unsubscribe()}),[e,n,t]),[h,v]}(n,i),[S,E]=(0,r.useState)(0);(0,r.useEffect)((()=>d((e=>e+1))),[n]),(0,r.useEffect)((()=>{m>=0&&h>0&&k(m,h)}),[k,m,h,n]);const C=(0,r.useCallback)((e=>{E(e.length),null==l||l(e)}),[l]);return r.createElement("div",{className:`panel ${t}`},r.createElement(Np,Object.assign({},c,{className:"media-list "+(s?"":"playable"),layout:f,items:g,itemKey:"src",onPageSizeChange:v,onScrollIndexChange:p,onSelect:C,key:u})),a?r.createElement(Lp,{items:g,error:y,size:w,maxSize:x,loading:!!n&&!b,loadingText:o,selectedCount:S}):null)}function Wp({className:e="",children:t,onClose:n,x:i,y:a}){const o=(0,r.useRef)(null),[l,s]=(0,r.useState)({visibility:"hidden"});(0,r.useLayoutEffect)((()=>{const e={},t=o.current;i+t.offsetWidth>document.body.clientWidth?e.left=i-t.offsetWidth+"px":e.left=`${i}px`,a+t.offsetHeight>document.body.clientHeight?e.top=a-t.offsetHeight+"px":e.top=`${a}px`,s(e)}),[i,a]),(0,r.useEffect)((()=>{const e=bt(ot(document,"mousedown").pipe(kt((()=>ot(document,"click")))),ot(document,"keydown",{capture:!0}),ot(document,"contextmenu",{capture:!0}),ot(window,"blur")).subscribe((()=>n("")));return()=>e.unsubscribe()}),[n]);const c=(0,r.useCallback)((e=>{let t=e.target;for(;t&&!t.value;)t=t.parentElement;(null==t?void 0:t.value)&&n(t.value)}),[n]);return r.createElement("menu",{className:`popup-menu ${e}`,onClick:c,style:l,ref:o},t)}function qp({label:e,acceleratorKey:t="",action:n}){return r.createElement("li",{className:"popup-menu-item"},r.createElement("button",{value:n},r.createElement("span",{className:"popup-menu-item-label"},e),r.createElement("span",{className:"popup-menu-item-accelerator-key"},t)))}function Yp(e,t,n){return a=this,o=void 0,s=function*(){return new Promise(((a,o)=>{const l=document.getElementById("popup"),s=document.createElement("div"),c=(0,i.s)(s);try{const i=e=>{c.unmount(),s.remove(),a(e)};l.append(s),c.render(r.createElement(e,{x:t,y:n,onClose:i}))}catch(e){c.unmount(),s.remove(),o(e)}}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function r(e){try{i(s.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):function(e){return e instanceof l?e:new l((function(t){t(e)}))}(t.value).then(n,r)}i((s=s.apply(a,o||[])).next())}));var a,o,l,s}function Kp(e,t,n,i){return a=this,o=void 0,s=function*(){return Yp((t=>r.createElement(Qp,Object.assign({},t,{items:e,unplayable:i}))),t,n)},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function r(e){try{i(s.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):function(e){return e instanceof l?e:new l((function(t){t(e)}))}(t.value).then(n,r)}i((s=s.apply(a,o||[])).next())}));var a,o,l,s}function Qp(e){var{items:t,unplayable:n}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["items","unplayable"]);const a=1===t.length,o=!n&&t.every((e=>e.itemType===Wt.Media||e.itemType===Wt.Album));return r.createElement(Wp,Object.assign({},i,{className:"actions"}),r.createElement("ul",{className:"actions-menu-items"},o?r.createElement(r.Fragment,null,r.createElement(qp,{label:"Queue",action:"queue",acceleratorKey:"Enter",key:"queue"}),r.createElement(qp,{label:"Play next",action:"play-next",acceleratorKey:"Shift+Enter",key:"play-next"}),r.createElement(qp,{label:"Play now",action:"play",acceleratorKey:`${b.ctrlKeyStr}+Enter`,key:"play"})):null,a?r.createElement(qp,{label:"Info...",action:"info",acceleratorKey:`${b.ctrlKeyStr}+I`,key:"info"}):null))}var Xp=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};const Gp={view:"details",fields:["Artist","Title","Album","Track","Duration","Genre","PlayCount"]};function Jp(e){var{className:t="",layout:n=Gp,unplayable:i}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","layout","unplayable"]);const o=vp(),l=hp(bs.observeCurrentIndex,-1),s=(0,r.useCallback)((e=>{const[t]=e.src.split(":");return`source-${t} ${e.src===(null==o?void 0:o.src)?"playing":""} ${e.unplayable?"unplayable":""}`}),[o]),c=(0,r.useCallback)(((e,t,n)=>Xp(this,void 0,void 0,(function*(){switch(yield Kp(e,t,n,i)){case"play":Wm.autoplay=!0,yield bs.insertAt(e,l+1),bs.next();break;case"play-next":yield bs.insertAt(e,l+1);break;case"queue":yield bs.add(e);break;case"info":mp(e[0])}}))),[l,i]),u=(0,r.useCallback)((e=>{i||bs.add(e)}),[i]),d=(0,r.useCallback)(((e,t,n)=>Xp(this,void 0,void 0,(function*(){i||(t||n?t&&!n?(Wm.autoplay=!0,yield bs.insertAt(e,l+1),bs.next()):n&&!t&&(yield bs.insertAt(e,l+1)):yield bs.add(e))}))),[l,i]),f=(0,r.useCallback)((([e])=>{e&&mp(e)}),[]);return r.createElement(Hp,Object.assign({},a,{className:`media-items ${t}`,itemClassName:s,layout:n,multiSelect:!0,draggable:!i,unplayable:i,onContextMenu:c,onDoubleClick:u,onEnter:d,onInfo:f}))}function Zp(e){var{source:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source"]);return r.createElement("div",{className:"panel media-item-browser"},r.createElement(Jp,Object.assign({},n,{unplayable:t.unplayable})),";")}function eh({children:e}){return r.createElement("div",{className:"panel empty-screen"},e)}function th(){var e;return(null===(e=window.MusicKit)||void 0===e?void 0:e.version.startsWith("3"))?r.createElement(Zp,{source:Un}):r.createElement(nh,null)}function nh(){return r.createElement(eh,null,r.createElement("p",null,r.createElement("strong",null,"Apple MusicKit beta required.")),r.createElement("p",null,"You need to enable ",r.createElement("strong",null,"MusicKit beta")," from the settings to watch videos from Apple Music."))}function rh({min:e="1970",max:t=ih(),value:n=t,onSelect:i}){const[a,o]=(0,r.useState)((()=>String(new Date(n).getFullYear()))),l=function(e,t){const[n,i]=(0,r.useState)([]);return(0,r.useLayoutEffect)((()=>{const n=[],r=new Date(e),a=new Date(t),o=r.getFullYear();let l=a.getFullYear();for(;l>=o;)n.push(l),l--;i(n)}),[e,t]),n}(e,t);(0,r.useEffect)((()=>{null==i||i(a)}),[i,a]);const s=(0,r.useCallback)((e=>{o(e.target.value)}),[]);return r.createElement("span",{className:"year-picker"},r.createElement("select",{defaultValue:a,onChange:s},l.map((e=>r.createElement("option",{value:e,key:e},e)))))}function ih(){const e=new Date;return String(e.getFullYear())}const ah=(()=>{const e=new Intl.DateTimeFormat(navigator.language,{month:"short"}).format;return[...Array(12).keys()].map((t=>e(new Date(2022,t,2))))})();function oh({min:e="1970-01",max:t=E(),value:n=t,onSelect:i}){const a=(0,r.useRef)(null),[o,l]=(0,r.useState)((()=>String(new Date(n).getFullYear()))),[s,c]=(0,r.useState)((()=>new Date(n).getMonth())),u=function(e,t,n){const[i,a]=(0,r.useState)([]);return(0,r.useLayoutEffect)((()=>{const r=[],i=new Date(t),o=new Date(n),l=Number(e)===i.getFullYear()?i.getMonth():0;let s=Number(e)===o.getFullYear()?o.getMonth():11;for(;s>=l;)r.push(s),s--;a(r)}),[e,t,n]),i}(o,e,t);(0,r.useLayoutEffect)((()=>{const e=u[0];void 0!==e&&(a.current.value=String(e),c(e))}),[u]),(0,r.useEffect)((()=>{-1!==s&&(null==i||i(`${o}-${String(s+1).padStart(2,"0")}`))}),[i,o,s]);const d=(0,r.useCallback)((e=>{c(-1),l(e)}),[]),f=(0,r.useCallback)((e=>{c(Number(e.target.value))}),[]);return r.createElement("span",{className:"month-picker"},r.createElement(rh,{min:e,max:t,value:o,onSelect:d}),r.createElement("select",{defaultValue:s,onChange:f,key:o,ref:a},u.map((e=>r.createElement("option",{value:e,key:e},ah[e])))))}function lh({min:e="1970-01-01",max:t=S(),value:n=t,onSelect:i}){const a=(0,r.useRef)(null),[o,l]=(0,r.useState)((()=>E(n))),[s,c]=(0,r.useState)((()=>new Date(n).getDate())),u=function(e,t,n){const[i,a]=(0,r.useState)([]);return(0,r.useLayoutEffect)((()=>{const r=[],i=new Date(t),o=new Date(n),l=e.split("-").map(Number),s=l[0],c=l[1]-1,u=s===i.getFullYear()&&c===i.getMonth()?i.getDate():1;let d=s===o.getFullYear()&&c===o.getMonth()?o.getDate():new Date(s,c+1,0).getDate();for(;d>=u;)r.push(d),d--;a(r)}),[e,t,n]),i}(o,e,t);(0,r.useLayoutEffect)((()=>{const e=u[0];e&&(a.current.value=String(e),c(e))}),[u]),(0,r.useEffect)((()=>{s&&(null==i||i(`${o}-${String(s).padStart(2,"0")}`))}),[i,o,s]);const d=(0,r.useCallback)((e=>{c(0),l(e)}),[]),f=(0,r.useCallback)((e=>{c(Number(e.target.value))}),[]);return r.createElement("span",{className:"date-picker"},r.createElement(oh,{min:e,max:t,value:o,onSelect:d}),r.createElement("select",{defaultValue:s,onChange:f,key:o,ref:a},u.map((e=>r.createElement("option",{value:e,key:e},e)))))}function sh(e,t){const[n,i]=(0,r.useState)(null);return(0,r.useEffect)((()=>{i((null==e?void 0:e.search(t))||null)}),[e,t]),n}const ch={view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","ListenDate"]};function uh(e){var{source:t,minDate:n="2010-01-1"}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source","minDate"]);const[a,o]=(0,r.useState)(0),l=function(e,t=0){const[n,i]=(0,r.useState)(),a=sh(e,n);return(0,r.useEffect)((()=>i({startAt:t})),[t]),a}(t,a),s=(0,r.useCallback)((e=>{const t=new Date,n=new Date(e);n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()?o(0):o(Math.floor(n.valueOf()/1e3))}),[]);return r.createElement(r.Fragment,null,r.createElement(lh,{min:n,onSelect:s}),r.createElement(Zp,Object.assign({},i,{className:"history-browser",source:t,pager:l,layout:t.layout||ch})))}const dh="2002-11-20",fh=new l("lastfm/useHistoryStart");function mh(){const e=function(){const[e,t]=(0,r.useState)((()=>Fr.firstScrobbledAt)),n=""===e||e===dh;return(0,r.useEffect)((()=>{if(n){t(dh);const e=gt(Gr.getUserInfo()).pipe(Je((e=>Number(e.user.playcount))),et((e=>{return e?zt(e):(n=K(t=()=>Error("No history."))?t:function(){return t},new Me((function(e){return e.error(n())})));var t,n})),Je((e=>Math.floor(e/50))),Je((e=>new Zr({page:e},{pageSize:50}))),et((e=>Yt(e))),Je((e=>e.at(-1))),xt(y),Je((e=>new Date(1e3*e.playedAt))),Je(S),zn((e=>Fr.firstScrobbledAt=e)),zn(t)).subscribe(fh);return()=>e.unsubscribe()}}),[n]),e}();return r.createElement(uh,{source:ni,minDate:e})}class ph{constructor(){this.items$=new Jt([])}get maxSize(){}observeItems(){return this.items$}observeSize(){return this.observeItems().pipe(Je((e=>e.length)),Zt())}observeError(){return ct}fetchAt(){}disconnect(){this.items.forEach((e=>{var t;return null===(t=e.pager)||void 0===t?void 0:t.disconnect()}))}next(e){this.items$.next(e)}get items(){return this.items$.getValue()}}const hh={view:"card",fields:["Thumbnail","Title","Artist","AlbumAndYear","LastPlayed"]};function vh(e){var{source:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source"]);const[,i]=(0,r.useReducer)((e=>e+1),0);return(0,r.useEffect)((()=>{const e=setInterval(i,6e4);return()=>clearInterval(e)}),[]),r.createElement(Zp,Object.assign({},n,{className:"recently-played-browser",source:t,layout:t.layout||hh}))}const gh=new l("LastFmRecentlyPlayedBrowser");function bh(){const e=function(){const e=(0,r.useMemo)((()=>Math.floor(Date.now()/1e3)),[]),[t,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const t=new ph,r=new Zr({to:e}),i=new Nn(t,r),a=bt(dl().pipe(Qa(1),Ga(2e4)),Le(3e5)),o=r.observeItems().pipe(sa((e=>0===e.length)),qt(1),Je((e=>e[0].playedAt)),kt((e=>a.pipe(et((()=>function(e){return t=this,n=void 0,i=function*(){const t=new Zr({from:e});return yield Yt(t)},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}(e+1))),zn((e=>t.next(e))))))).subscribe(gh);return n(i),()=>o.unsubscribe()}),[e]),t}();return r.createElement(vh,{source:ri,pager:e})}const yh=[{value:"overall",text:"All time"},{value:"12month",text:"Year"},{value:"1month",text:"Month"},{value:"7day",text:"Week"}];function wh(e){var{source:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source"]);const[i,a]=(0,r.useState)(),o=function(e,t="overall"){const[n,i]=(0,r.useState)(),a=sh(e,n);return(0,r.useEffect)((()=>i({period:t})),[t]),a}(t,i),l=(0,r.useCallback)((e=>{a(e.target.value)}),[]);return r.createElement(r.Fragment,null,r.createElement("div",{className:"lastfm-period-selector options"},r.createElement("ul",{className:"lastfm-periods"},yh.map((({value:e,text:t})=>r.createElement("li",{className:"lastfm-period",key:e},r.createElement("input",{id:`lastfm-period-${e}`,type:"radio",name:"lastfm-period",value:e,defaultChecked:"overall"===e,onChange:l}),r.createElement("label",{htmlFor:`lastfm-period-${e}`},t)))))),r.createElement(Kh,Object.assign({},n,{source:t,pager:o,layout:t.layout})))}const xh="2015-09-17";function kh(){const e=function(){const[e,t]=(0,r.useState)(ci.firstScrobbledAt),n=""===e||e===xh;return(0,r.useEffect)((()=>{if(n){t(xh);const e=gt(wi.getListeningActivity()).pipe(Je((e=>e.find((e=>e.listen_count>0)))),xt(y),Je((e=>S(1e3*Number(e.from_ts)))),zn((e=>ci.firstScrobbledAt=e)),qt(1)).subscribe(t);return()=>e.unsubscribe()}}),[n]),e}();return r.createElement(uh,{source:Ti,minDate:e})}const Sh=new l("ListenBrainzRecentlyPlayedBrowser");function Eh(){const e=function(){const e=(0,r.useMemo)((()=>Math.floor(Date.now()/1e3)),[]),[t,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const t=new ph,r=new xi({max_ts:e}),i=new Nn(t,r),a=bt(dl().pipe(Qa(1),Ga(2e4)),Le(3e5)),o=r.observeItems().pipe(sa((e=>0===e.length)),qt(1),Je((e=>e[0].playedAt)),kt((e=>a.pipe(et((()=>function(e){return t=this,n=void 0,i=function*(){const t=new xi({min_ts:e});return yield Yt(t)},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(t.value).then(o,l)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}(e+1))),zn((e=>t.next(e))))))).subscribe(Sh);return n(i),()=>o.unsubscribe()}),[e]),t}();return r.createElement(vh,{source:Ai,pager:e})}var Ch=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))};const Ph={view:"card compact",fields:["Thumbnail","Title","Artist","Year"]};function Th(e){var{className:t="",layout:n=Ph,unplayable:i}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","layout","unplayable"]);const o=hp(bs.observeCurrentIndex,-1),l=(0,r.useCallback)((([e],t,n)=>Ch(this,void 0,void 0,(function*(){switch(yield Kp([e],t,n,i)){case"play":Wm.autoplay=!0,yield bs.insertAt(e,o+1),bs.next();break;case"play-next":yield bs.insertAt(e,o+1);break;case"queue":yield bs.add(e);break;case"info":mp(e)}}))),[o,i]),s=(0,r.useCallback)((e=>{i||bs.add(e)}),[i]),c=(0,r.useCallback)((([e],t,n)=>Ch(this,void 0,void 0,(function*(){i||(t||n?t&&!n?(Wm.autoplay=!0,yield bs.insertAt(e,o+1),bs.next()):n&&!t&&(yield bs.insertAt(e,o+1)):yield bs.add(e))}))),[o,i]),u=(0,r.useCallback)((([e])=>{e&&mp(e)}),[]);return r.createElement(Hp,Object.assign({},a,{className:`albums ${t}`,layout:n,draggable:!i,unplayable:i,onContextMenu:l,onDoubleClick:s,onEnter:c,onInfo:u}))}const Ah={view:"details",fields:["Index","Title","Artist","Duration"]};function zh(e){var{source:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source"]);const[i,a]=(0,r.useState)(null),o=(0,r.useCallback)((([e])=>{a(e||null)}),[]);return r.createElement("div",{className:"panel album-browser"},r.createElement(R,{id:"album-browser-layout",arrange:"rows",primaryIndex:1},r.createElement(Th,Object.assign({},n,{unplayable:t.unplayable,onSelect:o})),r.createElement(Jp,{className:"album-items",pager:null==i?void 0:i.pager,keepAlive:!0,layout:t.secondaryLayout||Ah,unplayable:t.unplayable})))}const Ih={view:"card minimal",fields:["Thumbnail","Title"]};function Nh(e){var{className:t="",layout:n=Ih}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","layout"]);const a=(0,r.useCallback)((([e],t,n)=>{return r=this,i=void 0,o=function*(){"info"===(yield Kp([e],t,n))&&mp(e)},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{s(o.next(e))}catch(e){t(e)}}function l(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof a?e:new a((function(t){t(e)}))}(t.value).then(n,l)}s((o=o.apply(r,i||[])).next())}));var r,i,a,o}),[]),o=(0,r.useCallback)((([e])=>{e&&mp(e)}),[]);return r.createElement(Hp,Object.assign({},i,{className:`artists ${t}`,layout:n,onContextMenu:a,onInfo:o}))}const Mh=[{value:"all_time",text:"All time"},{value:"this_year",text:"Year"},{value:"month",text:"Month"},{value:"week",text:"Week"}];function Oh(e){var{source:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source"]);const[i,a]=(0,r.useState)(),o=function(e,t="all_time"){const[n,i]=(0,r.useState)(),a=sh(e,n);return(0,r.useEffect)((()=>i({range:t})),[t]),a}(t,i),l=(0,r.useCallback)((e=>{a(e.target.value)}),[]);return r.createElement(r.Fragment,null,r.createElement("div",{className:"listenbrainz-range-selector options"},r.createElement("ul",{className:"listenbrainz-ranges"},Mh.map((({value:e,text:t})=>r.createElement("li",{className:"listenbrainz-range",key:e},r.createElement("input",{id:`listenbrainz-range-${e}`,type:"radio",name:"listenbrainz-range",value:e,defaultChecked:"all_time"===e,onChange:l}),r.createElement("label",{htmlFor:`listenbrainz-range-${e}`},t)))))),r.createElement(_h,Object.assign({},n,{source:t,pager:o,layout:t.layout})))}function _h(e){switch(e.source.itemType){case Wt.Artist:return r.createElement("div",{className:"panel artist-browser"},r.createElement(Nh,Object.assign({},e)));case Wt.Album:return r.createElement(zh,Object.assign({},e));default:return r.createElement(Zp,Object.assign({},e))}}const $h={view:"card compact",fields:["Thumbnail","Title","Year"]},Lh={view:"details",fields:["Index","Title","Artist","Duration"]},Dh={view:"details",fields:["Index","Title","Artist","Duration","Album","Year"]};function jh(e){var{source:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source"]);const[i,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[s,c]=(0,r.useState)(Lh),u=(0,r.useCallback)((([e])=>{a(e||null)}),[]),d=(0,r.useCallback)((([e])=>{l(e||null),c(/^\w+:top-tracks/.test(null==e?void 0:e.src)?Dh:Lh)}),[]);return r.createElement("div",{className:"panel artist-browser"},r.createElement(R,{id:"artist-browser-layout",arrange:"columns",primaryIndex:0},r.createElement(Nh,Object.assign({},n,{unplayable:t.unplayable,onSelect:u})),r.createElement(R,{id:"artist-album-browser-layout",arrange:"rows",primaryIndex:1},r.createElement(Th,{className:"artist-albums",pager:null==i?void 0:i.pager,keepAlive:!0,layout:t.secondaryLayout||$h,unplayable:t.unplayable,onSelect:d}),r.createElement(Jp,{className:"album-items",pager:null==o?void 0:o.pager,keepAlive:!0,layout:t.tertiaryLayout||s,unplayable:t.unplayable}))))}function Rh({sources:e,onSourceChange:t}){const n=(0,r.useId)(),i=(0,r.useCallback)((n=>{const r=Number(n.target.value),i=e[r];null==t||t(i)}),[e,t]);return r.createElement("div",{className:"media-source-selector options"},r.createElement("ul",{className:"media-sources"},e.map(((e,t)=>r.createElement("li",{className:"media-source",key:e.id},r.createElement("input",{id:`${n}-${e.id}`,type:"radio",name:n,value:t,defaultChecked:0===t,onChange:i}),r.createElement("label",{htmlFor:`${n}-${e.id}`},e.title))))))}const Fh={view:"card compact",fields:["Thumbnail","Title","TrackCount","Owner"]};function Bh(e){var{className:t="",layout:n=Fh,unplayable:i}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","layout","unplayable"]);const o=(0,r.useCallback)((([e],t,n)=>{return r=this,a=void 0,l=function*(){"info"===(yield Kp([e],t,n,i))&&mp(e)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function i(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof o?e:new o((function(t){t(e)}))}(t.value).then(n,i)}s((l=l.apply(r,a||[])).next())}));var r,a,o,l}),[i]),l=(0,r.useCallback)((([e])=>{e&&mp(e)}),[]);return r.createElement(Hp,Object.assign({},a,{className:`playlists ${t}`,layout:n,unplayable:i,onContextMenu:o,onInfo:l}))}const Vh={view:"details",fields:["Index","Artist","Title","Album","Duration","Genre"]};function Uh(e){var{source:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["source"]);const[i,a]=(0,r.useState)(null),o=(0,r.useCallback)((([e])=>{a(e||null)}),[]);return r.createElement("div",{className:"panel playlist-browser"},r.createElement(R,{id:"playlist-browser-layout",arrange:"rows",primaryIndex:1},r.createElement(Bh,Object.assign({},n,{unplayable:t.unplayable,onSelect:o})),r.createElement(Jp,{className:"playlist-items",pager:null==i?void 0:i.pager,keepAlive:!0,layout:t.secondaryLayout||Vh,unplayable:t.unplayable})))}function Hh({error:e,children:t}){return r.createElement("div",{className:"panel error-screen"},r.createElement("div",{className:"error-screen-content"},r.createElement("h2",null,"Error"),r.createElement("pre",{className:"note error"},(null==e?void 0:e.message)||String(e)),t))}function Wh({service:e,sources:t}){const n=hp(e.observeIsLoggedIn,!1),i=function(e){return(0,r.useMemo)((()=>function({error:t}){return r.createElement(Hh,{error:t},e&&r.createElement("p",null,r.createElement("button",{className:"disconnect",onClick:e.logout},"Reconnect to ",e.name,"...")))}),[e])}(e),a=`${e.id}/${t.map((e=>e.id))}`;return r.createElement("div",{className:`media-browser ${e.id}-browser`,key:a},n?r.createElement(Wo.ErrorBoundary,{fallbackRender:i},r.createElement(qh,{service:e,sources:t})):r.createElement(Zo,{service:e}))}function qh({service:e,sources:t}){const n=1===t.length?t[0]:null;switch(null==n?void 0:n.id){case"apple/video":return r.createElement(th,null);case"lastfm/top/tracks":case"lastfm/top/albums":case"lastfm/top/artists":return r.createElement(wh,{source:n});case"listenbrainz/top/tracks":case"listenbrainz/top/albums":case"listenbrainz/top/artists":return r.createElement(Oh,{source:n});case"lastfm/history":return r.createElement(mh,null);case"listenbrainz/history":return r.createElement(kh,null);case"lastfm/recently-played":return r.createElement(bh,null);case"listenbrainz/recently-played":return r.createElement(Eh,null);default:return r.createElement(Yh,{service:e,sources:t})}}function Yh({sources:e}){const[t,n]=(0,r.useState)((()=>e[0])),[i,a]=(0,r.useState)(""),o=function(e,t=""){const[n,i]=(0,r.useState)(),a=sh(e,n);return(0,r.useEffect)((()=>i({q:t})),[t]),a}(t,i),l=!!t.searchable;return r.createElement(r.Fragment,null,l&&r.createElement(el,{onSubmit:a}),e.length>1?r.createElement(Rh,{sources:e,onSourceChange:n}):null,r.createElement(Kh,{source:t,pager:o,layout:t.layout,loadingText:i?"Searching":void 0}))}function Kh(e){switch(e.source.itemType){case Wt.Artist:return r.createElement(jh,Object.assign({},e));case Wt.Album:return r.createElement(zh,Object.assign({},e));case Wt.Playlist:return r.createElement(Uh,Object.assign({},e));default:return r.createElement(Zp,Object.assign({},e))}}function Qh({icon:e,text:t,showConnectivity:n}){return r.createElement("span",{className:"media-source-label"},r.createElement(dr,{name:e,className:n?"show-connectivity":""}),r.createElement("span",{className:"text"},t))}console.log("component::MediaSources");const Xh=new f("sources");function Gh({onSelect:e}){const t=function(){const[e,t]=(0,r.useState)([]);return(0,r.useEffect)((()=>{const e=Vo.pipe(Je((()=>{}))).pipe(Je((()=>Lo().filter(Uo).map((e=>({id:e.id,label:r.createElement(Qh,{icon:e.icon,text:e.name,showConnectivity:!0}),value:r.createElement(Wh,{sources:e.roots,service:e}),startExpanded:!0,children:e.sources.filter(Uo).map((t=>({id:t.id,label:r.createElement(Qh,{icon:t.icon,text:t.title}),value:r.createElement(Wh,{sources:[t],service:e})})))})))))).subscribe(t);return()=>e.unsubscribe()}),[]),e}();return r.createElement("div",{className:"panel media-sources"},r.createElement(Bt,{roots:t,onSelect:e,storeId:Xh.id}))}function Jh({id:e,item:t,index:n,selected:i,onSelect:a}){const o=(0,r.useCallback)((()=>a(n)),[n,a]);return r.createElement("button",{className:"tab",id:`${e}-tab-${n}`,role:"tab","aria-selected":i,"aria-controls":`${e}-panel-${n}`,onFocus:o},t.tab)}function Zh({id:e,item:t,index:n,hidden:i}){return r.createElement("div",{className:"tab-panel",id:`${e}-panel-${n}`,tabIndex:0,hidden:i,role:"tabpanel","aria-labelledby":`${e}-tab-${n}`},t.panel)}function ev({label:e,items:t,className:n=""}){const i=(0,r.useId)(),[a,o]=(0,r.useState)(0),l=t.length,s=(0,r.useCallback)((e=>{switch(e.key){case"left":e.preventDefault(),a>0&&(o(a-1),e.stopPropagation());break;case"right":e.preventDefault(),a<l-1&&(o(a+1),e.stopPropagation())}}),[a,l]);return r.createElement("div",{className:`tab-list ${n}`},r.createElement("ul",{className:"tab-list-tabs",role:"tablist","aria-label":e,onKeyDown:s},t.map(((e,t)=>r.createElement("li",{role:"presentation",key:t},r.createElement(Jh,{id:i,item:e,index:t,selected:t===a,onSelect:o}))))),r.createElement("div",{className:"tab-list-panels"},t.map(((e,t)=>r.createElement(Zh,{id:i,item:e,index:t,hidden:t!==a,key:t})))))}function tv({service:e}){const t=(0,r.useId)(),n=(0,r.useRef)(null),i=hp(e.observeIsLoggedIn,!1),a=(0,r.useCallback)((()=>{const e=n.current.elements,t={};for(const n of e)t[n.value]=!n.checked;Ho(t)}),[]);return r.createElement("form",{className:"media-service-settings-general",method:"dialog",onSubmit:a},r.createElement("p",null,r.createElement("button",{className:"disconnect",onClick:e.logout,disabled:!i},i?"Disconnect...":"Not connected")),r.createElement("fieldset",{ref:n},r.createElement("legend",null,"Display"),r.createElement("ul",null,e.sources.map((e=>r.createElement("li",{key:e.id},r.createElement("input",{id:`${t}-${e.id}`,type:"checkbox",value:e.id,defaultChecked:Uo(e)}),r.createElement("label",{htmlFor:`${t}-${e.id}`},e.title)))))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",null,"Confirm")))}function nv(){const e=(0,r.useRef)(null),t=(0,r.useCallback)((()=>{cn.useMusicKitBeta=e.current.checked}),[]);return r.createElement("form",{className:"apple-beta-settings",method:"dialog",onSubmit:t},r.createElement("fieldset",null,r.createElement("legend",null,"MusicKit"),r.createElement("p",null,r.createElement("input",{type:"radio",name:"use-musickit",id:"use-musickit-stable",defaultChecked:!cn.useMusicKitBeta}),r.createElement("label",{htmlFor:"use-musickit-stable"},"Stable version")),r.createElement("p",null,r.createElement("input",{type:"radio",name:"use-musickit",id:"use-musickit-beta",defaultChecked:cn.useMusicKitBeta,ref:e}),r.createElement("label",{htmlFor:"use-musickit-beta"},"Beta version"))),r.createElement("div",{className:"note"},r.createElement("p",null,"MusicKit beta enables playback of music videos."),r.createElement("p",null,"However, this release of MusicKit is still undergoing changes and may be unstable. If you experience any problems then use the stable release."),r.createElement("p",null,"You will need to refresh the page for changes to take effect.")),r.createElement("p",null,r.createElement("small",null,"MusicKit is a JavaScript library supplied by Apple that provides access to Apple Music services and playback.")),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",null,"Confirm")))}function rv(){const e=(0,r.useMemo)((()=>[{tab:"General",panel:r.createElement(tv,{service:Zn})},{tab:"Beta",panel:r.createElement(nv,null)}]),[]);return r.createElement(ev,{items:e,label:Zn.name})}function iv({service:e}){const t=(0,r.useId)(),n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useMemo)((()=>Lo().filter((e=>!e.scrobbler))),[]),o=(0,r.useCallback)((()=>{const t=n.current.elements,r={};for(const e of t)r[e.value]=!e.checked;tm(e,r);const a=i.current.elements,o={};for(const e of a)o[e.value]=e.checked;rm(e,o)}),[e]);return r.createElement("form",{className:"scrobbling-settings",method:"dialog",onSubmit:o},r.createElement("fieldset",{ref:n},r.createElement("legend",null,"Scrobble"),r.createElement("ul",null,a.map((n=>r.createElement("li",{key:n.id},r.createElement("input",{id:`${t}-${n.id}`,type:"checkbox",value:n.id,defaultChecked:em(e,n),disabled:"youtube"===n.id}),r.createElement("label",{htmlFor:`${t}-${n.id}`},n.name)))))),r.createElement("fieldset",{ref:i},r.createElement("legend",null,"Options"),r.createElement("ul",null,r.createElement("li",null,r.createElement("input",{id:`${t}-scrobbling-options`,type:"checkbox",value:"updateNowPlaying",defaultChecked:nm(e)}),r.createElement("label",{htmlFor:`${t}-scrobbling-options`},'Update "Now Playing"')))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",null,"Confirm")))}function av({service:e}){const t=(0,r.useMemo)((()=>{const t=[{tab:"General",panel:r.createElement(tv,{service:e})}];return e.scrobbler&&t.push({tab:"Scrobbling",panel:r.createElement(iv,{service:e})}),t}),[e]);return r.createElement(ev,{className:`media-service-settings ${e.id}-settings`,items:t,label:e.name})}function ov(){return r.createElement(av,{service:Lr})}function lv(){return r.createElement(av,{service:oi})}function sv(){return r.createElement(av,{service:Mi})}function cv(){return r.createElement(av,{service:la})}function uv(){return r.createElement(av,{service:Ua})}function dv(){return r.createElement(av,{service:$o})}function fv(e){var{colorName:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["colorName"]);const i=(0,r.useCallback)((e=>{xf[t]=e.target.value}),[t]);return r.createElement("input",Object.assign({},n,{type:"color",onChange:i}))}const mv=[{tab:"Theme",panel:r.createElement((function(){const e=(0,r.useMemo)((()=>xf.fontSize),[]),t=hp((()=>xf.observe()),yf);(0,r.useLayoutEffect)((()=>{const e=document.getElementById("system").style;return e.setProperty("--font-size",String(xf.fontSize)),()=>{xf.restore(),e.removeProperty("--font-size")}}),[]);const n=(0,r.useCallback)((()=>xf.save()),[]),i=(0,r.useCallback)((e=>{xf.load(e.target.value)}),[]),a=(0,r.useCallback)((e=>{xf.spacing=e.target.valueAsNumber}),[]),o=(0,r.useCallback)((e=>{xf.fontSize=e.target.valueAsNumber}),[]),l=(0,r.useCallback)((e=>{xf.roundness=e.target.valueAsNumber}),[]),s=(0,r.useCallback)((e=>{xf.flat=e.target.checked}),[]);return r.createElement("form",{className:"theme-settings",method:"dialog",onSubmit:n},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement("label",{htmlFor:"theme-name"},"Name:"),r.createElement("select",{id:"theme-name",onChange:i,value:xf.name},wf.map((({name:e})=>r.createElement("option",{value:e,key:e},e||"(none)"))))),r.createElement("div",{className:"table-layout"},r.createElement("p",null,r.createElement("label",{htmlFor:"theme-fontFamily"},"Font:"),r.createElement("select",{id:"theme-fontFamily"},r.createElement("option",null,"Arial, sans-serif"))),r.createElement("p",null,r.createElement("label",null,"Frame:"),r.createElement(fv,{id:"frameColor",colorName:"frameColor",value:t.frameColor,title:"Frame background color"}),r.createElement(fv,{colorName:"frameTextColor",value:t.frameTextColor,title:"Frame text color"})),r.createElement("p",null,r.createElement("label",null,"Content:"),r.createElement(fv,{colorName:"backgroundColor",value:t.backgroundColor,title:"Content background color"}),r.createElement(fv,{colorName:"textColor",value:t.textColor,title:"Content text color"})),r.createElement("p",null,r.createElement("label",{htmlFor:"theme-spacing"},"Spacing:"),r.createElement("input",{type:"range",id:"theme-spacing",min:0,max:1,step:.01,value:t.spacing,onChange:a})),r.createElement("p",null,r.createElement("label",{htmlFor:"theme-roundness"},"Roundness:"),r.createElement("input",{type:"range",id:"theme-roundness",min:0,max:1,step:.01,value:t.roundness,onChange:l})),r.createElement("p",null,r.createElement("label",{htmlFor:"theme-flat"},"Flat:"),r.createElement("input",{type:"checkbox",id:"theme-flat",checked:t.flat,onChange:s}))),r.createElement("p",{className:"dialog-buttons"},r.createElement("button",{className:"small",type:"button",disabled:!0},"Save…"))),r.createElement("div",{className:"table-layout font-size"},r.createElement("p",null,r.createElement("label",{htmlFor:"theme-fontSize"},"Font Size:"),r.createElement("input",{type:"range",id:"theme-fontSize",min:12,max:28,step:.4,defaultValue:e,onChange:o,key:e}))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",null,"Confirm")))}),null)}],pv=[{tab:"General",panel:r.createElement((function(){const e=(0,r.useMemo)((()=>Ql()),[]),t=hp(Kl,e),n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(null),o=(0,r.useRef)(null),l=(0,r.useCallback)((()=>{Xl(e)}),[e]),s=(0,r.useCallback)((()=>{Xl({allowDuplicates:n.current.checked,showLineNumbers:i.current.checked,zeroPadLineNumbers:a.current.checked,showSourceIcons:o.current.checked})}),[]);return r.createElement("form",{className:"playlist-settings-general",method:"dialog"},r.createElement("fieldset",null,r.createElement("legend",null,"Content"),r.createElement("p",null,r.createElement("input",{id:"playlist-allow-duplicates",type:"checkbox",checked:t.allowDuplicates,onChange:s,ref:n}),r.createElement("label",{htmlFor:"playlist-allow-duplicates"},"Allow duplicates"))),r.createElement("fieldset",null,r.createElement("legend",null,"Display"),r.createElement("p",null,r.createElement("input",{id:"playlist-item-numbers",type:"checkbox",checked:t.showLineNumbers,onChange:s,ref:i}),r.createElement("label",{htmlFor:"playlist-item-numbers"},"Show playlist line numbers")),r.createElement("p",null,r.createElement("input",{id:"playlist-zero-pad",type:"checkbox",checked:t.zeroPadLineNumbers,disabled:!t.showLineNumbers,onChange:s,ref:a}),r.createElement("label",{htmlFor:"playlist-zero-pad"},"Zero pad line numbers")),r.createElement("p",null,r.createElement("input",{id:"playlist-source-icons",type:"checkbox",checked:t.showSourceIcons,onChange:s,ref:o}),r.createElement("label",{htmlFor:"playlist-source-icons"},"Show media source icons"))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel",onClick:l},"Cancel"),r.createElement("button",null,"Confirm")))}),null)}],hv=[{tab:"General",panel:r.createElement((function(){const e=(0,r.useRef)(null),t=As.provider,n=(0,r.useCallback)((()=>{As.provider=e.current.value}),[]);return r.createElement("form",{className:"visualizer-settings-general",method:"dialog",onSubmit:n},r.createElement("p",null,r.createElement("label",{htmlFor:"visualizer-provider"},"Provider:"),r.createElement("select",{id:"visualizer-provider",defaultValue:t,ref:e},r.createElement("option",{value:"none"},"(none)"),r.createElement("option",{value:""},"(random)"),Af().filter((e=>"ambientvideo"!==e.id||As.ambientVideoEnabled)).map((e=>r.createElement("option",{value:e.id,key:e.id},e.name))))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",null,"Confirm")))}),null)},{tab:"Ambient Video",panel:r.createElement((function(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=(0,r.useRef)(null),i=(0,r.useRef)(null),[a,o]=(0,r.useState)((()=>!!As.useAmbientVideoSource)),l=(0,r.useCallback)((()=>{As.ambientVideoEnabled=e.current.checked,As.useAmbientVideoSource=n.current.checked,As.ambientVideoSource=t.current.value}),[]),s=(0,r.useCallback)((()=>{t.current.validity.valid||n.current.checked||(t.current.value=""),o(n.current.checked)}),[]),c=(0,r.useCallback)((()=>{const e=t.current.value;let n="Not a valid YouTube url.";/^https?/.test(e)&&/youtu\.?be/.test(e)&&(n="Not a YouTube video or playlist.",Oo(e)&&(n="")),t.current.setCustomValidity(n)}),[]),u=(0,r.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),e.repeat||i.current.click())}),[]);return r.createElement("form",{className:"ambient-video-settings",method:"dialog",onKeyDown:u,onSubmit:l},r.createElement("p",null,r.createElement("input",{id:"ambient-video-enabled",type:"checkbox",defaultChecked:As.ambientVideoEnabled,ref:e}),r.createElement("label",{htmlFor:"ambient-video-enabled"},"Enable ambient video")),r.createElement("fieldset",null,r.createElement("legend",null,"Source"),r.createElement("p",null,r.createElement("input",{type:"radio",name:"use-ambient-video-source",id:"use-ambient-video-source-default",defaultChecked:!As.useAmbientVideoSource,onChange:s}),r.createElement("label",{htmlFor:"use-ambient-video-source-default"},"Default videos")),r.createElement("p",null,r.createElement("input",{type:"radio",name:"use-ambient-video-source",id:"use-ambient-video-source-youtube",defaultChecked:As.useAmbientVideoSource,onChange:s,ref:n}),r.createElement("label",{htmlFor:"use-ambient-video-source-youtube"},"YouTube video or playlist:")),r.createElement("p",null,r.createElement("input",{type:"url",defaultValue:As.ambientVideoSource,disabled:!a,required:a,onInput:c,ref:t}))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",{ref:i},"Confirm")))}),null)}];function vv(){return r.createElement(ev,{className:"visualizer-settings",items:hv,label:"Visualizers"})}function gv(e){return r.createElement(pr,Object.assign({},e,{className:"settings-dialog visualizer-settings-dialog",title:"Visualizer Settings"}),r.createElement(vv,null))}function bv(){const e=(0,r.useId)(),t=(0,r.useRef)(null),n=(0,r.useCallback)((()=>{const e=t.current.elements,n={};for(const t of e)n[t.value]=!t.checked;Ho(n)}),[]);return r.createElement("form",{className:"media-library-settings-general",method:"dialog",onSubmit:n},r.createElement("fieldset",{ref:t},r.createElement("legend",null,"Display"),r.createElement("ul",null,Lo().map((t=>r.createElement("li",{key:t.id},r.createElement("input",{id:`${e}-${t.id}`,type:"checkbox",value:t.id,defaultChecked:Uo(t)}),r.createElement("label",{htmlFor:`${e}-${t.id}`},t.name)))))),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",null,"Confirm")))}function yv(){const e=(0,r.useRef)(null),t=xl.preferredService,n=(0,r.useCallback)((()=>{xl.preferredService=e.current.value}),[]);return r.createElement("form",{className:"lookup-settings",method:"dialog",onSubmit:n},r.createElement("label",{htmlFor:"lookup-services"},"Preferred Service:"),r.createElement("select",{id:"lookup-services",defaultValue:t,ref:e},r.createElement("option",{value:""},"(none)"),Do().map((e=>r.createElement("option",{value:e.id,key:e.id},e.name)))),r.createElement("div",{className:"note"},r.createElement("p",null,"To enable playback from last.fm and ListenBrainz, Ampcast will search your logged in services to find a match."),r.createElement("p",null,"Exact matches are preferred. If you have several exact matches then the match from the preferred lookup service is used.")),r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",{value:"#cancel"},"Cancel"),r.createElement("button",null,"Confirm")))}const wv=[{id:"services",label:"Media Services",value:r.createElement((function(){const e=(0,r.useMemo)((()=>[{tab:"General",panel:r.createElement(bv,null)},{tab:"Lookup",panel:r.createElement(yv,null)}]),[]);return r.createElement(ev,{className:"media-library-settings",items:e,label:"Media Services"})}),null),startExpanded:!0,children:Lo().map((e=>({id:e.id,label:r.createElement(Qh,{icon:e.icon,text:e.name}),value:r.createElement(kv,{service:e})})))},{id:"visualizer",label:"Visualizer",value:r.createElement(vv,null)},{id:"playlist",label:"Playlist",value:r.createElement((function(){return r.createElement(ev,{className:"playlist-settings",items:pv,label:"Playlist Settings"})}),null)},{id:"appearance",label:"Appearance",value:r.createElement((function(){return r.createElement(ev,{className:"appearance-settings",items:mv,label:"Appearance"})}),null)}],xv=()=>wv;function kv({service:e}){switch(e.id){case"apple":return r.createElement(rv,null);case"spotify":return r.createElement(uv,null);case"youtube":return r.createElement(dv,null);case"plex":return r.createElement(cv,null);case"jellyfin":return r.createElement(ov,null);case"lastfm":return r.createElement(lv,null);case"listenbrainz":return r.createElement(sv,null)}}function Sv(e){const t=xv(),[n,i]=(0,r.useState)(null);return r.createElement(pr,Object.assign({},e,{className:"settings-dialog",title:"Settings"}),r.createElement(Bt,{className:"settings-dialog-sources",roots:t,storeId:"settings-dialog-sources",onSelect:i}),r.createElement("div",{className:"settings-dialog-source"},n))}var Ev;function Cv(e){var{icon:t,className:n=""}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["icon","className"]);return r.createElement("button",Object.assign({},i,{className:`icon-button icon-button-${t} ${n}`,onMouseDown:P,onDoubleClick:T}),r.createElement(dr,{name:t}))}function Pv(){const[e,t]=(0,r.useState)(null),n=(0,r.useCallback)((()=>{hr(Sv,!0)}),[]);return r.createElement("div",{className:"media-library"},r.createElement("header",{className:"media-library-head"},r.createElement("h1",{className:"media-library-title"},r.createElement("span",{className:"app-name"},r.createElement(dr,{className:"app-icon",name:"ampcast"}),r.createElement("span",{className:"app-text"},"ampcast")),r.createElement("span",{className:"app-version"},"0.6.0")),r.createElement(Cv,{icon:"settings",className:"in-frame",title:"Settings",onClick:n})),r.createElement("div",{className:"media-library-body"},r.createElement(R,{id:"media-library-layout",arrange:"columns",primaryIndex:1},r.createElement(Gh,{onSelect:t}),e||r.createElement(eh,null))))}function Tv(e,t){return function(n,r){return!e.call(t,n,r)}}function Av(e,t,n){return[xt(t,n)(Ye(e)),xt(Tv(t,n))(Ye(e))]}console.log("component::MediaLibrary"),console.log("module::visualizer");const zv=new l("visualizer"),Iv={providerId:"none",name:""},Nv=new Jt(Iv),Mv=new Xt,Ov=cs().pipe(xt((e=>null==e))),_v=cs().pipe(xt(y)),[$v,Lv]=Av(_v,(e=>e.mediaType===yn.Audio)),[Dv,jv]=Av(sc(),Boolean),Rv=[...Array(79).fill("milkdrop"),...Array(6).fill("audiomotion"),...Array(4).fill("ampshader"),...Array(1).fill("waveform")],Fv=[...Array(59).fill("spotifyviz"),...Array(20).fill("ampshader"),...Array(1).fill("waveform")],Bv=Array(10).fill("ambientvideo"),Vv=Bv.concat(Bv);function Uv(){return Nv}function Hv(){return qv().pipe(Je((e=>zf(e))),kt((e=>e?e.observeVisualizers():zt([]))))}function Wv(){return zs().pipe(Je((e=>!!e.lockedVisualizer)),Zt())}function qv(){return zs().pipe(Je((e=>e.provider||"")),Zt())}function Yv(e){Mv.next(e)}function Kv(){As.lockedVisualizer=Nv.getValue()}function Qv(){As.lockedVisualizer=null}function Xv(){return hp(Uv,null)}function Gv({className:e="",children:t}){return r.createElement("div",{className:`icon-buttons ${e}`},t)}function Jv(e){const[t,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{null==t&&null!=e&&n(e)}),[t,e]),t}function Zv({visualizer:e}){return r.createElement("article",{className:"visualizer-info"},r.createElement(eg,{visualizer:e}),r.createElement(tg,{visualizer:e}))}function eg({visualizer:e}){return r.createElement("h3",null,"Visualizer: ",function(e){if(e){const t=zf(e.providerId);if(t)return t.name}return"none"}(e))}function tg({visualizer:e}){return"ambientvideo"===(null==e?void 0:e.providerId)&&e.src.startsWith("youtube:")?r.createElement(ng,{visualizer:e}):(null==e?void 0:e.name)?r.createElement(r.Fragment,null,r.createElement("h4",null,"Name: ",e.name),r.createElement(sp,{url:e.externalUrl,src:""})):null}function ng({visualizer:e}){const t=function(e){const[t,,n]=e.split(":"),[i,a]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if(a(null),n&&"youtube"===t){const e=gt(_o(n)).subscribe(a);return()=>e.unsubscribe()}}),[t,n]),i}(e.src);return t?r.createElement("div",{className:"youtube-video-info"},r.createElement("h4",null,"Title: ",t.title),r.createElement(lp,{owner:t.owner,src:t.src}),r.createElement(sp,{url:t.externalUrl,src:t.src})):null}function rg(e){const t=vp(),n=Xv(),i=Jv(t),a=Jv(n);return r.createElement(pr,Object.assign({},e,{className:"currently-playing-dialog media-info-dialog",title:"Media Info"}),r.createElement("form",{method:"dialog"},i?r.createElement(Zm,{item:i}):r.createElement("p",null,"The playlist is empty."),i&&i.mediaType!==yn.Video?r.createElement(Zv,{visualizer:a}):null,r.createElement("footer",{className:"dialog-buttons"},r.createElement("button",null,"Close"))))}function ig(){return r.createElement("div",{className:"static"})}Ov.subscribe((()=>Of.stop())),$v.subscribe((()=>Of.hidden=!1)),Lv.subscribe((()=>{Of.pause(),Of.hidden=!0})),Dv.subscribe((()=>Of.pause())),$v.pipe(tl(200)).subscribe((()=>Yv("item"))),Of.observeError().subscribe((()=>Yv("error"))),Hv().subscribe((()=>Yv("provider"))),Mv.pipe(Ka($v,zs()),Je((([e,t,n])=>function(e,t,n){const r=e.src.startsWith("spotify:"),i=t.lockedVisualizer;let a=(null==i?void 0:i.providerId)||t.provider;switch(a){case"spotifyviz":if(!r)return Iv;break;case"audiomotion":case"milkdrop":if(r)return Iv;break;case"none":return Iv}if(i)return function(e,t){return If(e).find((e=>e.name===t))}(i.providerId,i.name)||Iv;const o=Nv.getValue();if(a=t.provider,!a){let e=r?Fv:Rv;t.ambientVideoEnabled&&(e=e.concat(r?Vv:Bv)),a=A(e),"click"===n&&a===o.providerId&&1===If(a).length&&(a=A(e,a))}return A(If(a),o)||Iv}(t,n,e))),Zt()).subscribe(Nv),Uv().pipe(zn((e=>Of.load(e)))).subscribe(zv),$v.pipe(kt((()=>jv))).subscribe((()=>Of.play())),null===(Ev=zf("milkdrop"))||void 0===Ev||Ev.observeVisualizers().pipe(sa((e=>0===e.length)),Ka(Uv()),zn((([,e])=>{e===Iv&&Yv("sync")})),qt(2)).subscribe(zv);const ag=(0,r.memo)((function(){const e=hp(Hv,[]),t=hp(Wv,!1),n=hp(qv,void 0),i="none"!==n,a=!t&&(!n||e.length>1),o=function(){const e=vp(),t=Xv(),[n,i]=(0,r.useState)("");return(0,r.useEffect)((()=>{(null==e?void 0:e.src.startsWith("youtube:"))?i("youtube"):(null==e?void 0:e.src.startsWith("apple:"))&&(null==e?void 0:e.mediaType)===yn.Video?i("apple"):"ambientvideo"===(null==t?void 0:t.providerId)&&(null==t?void 0:t.src.startsWith("youtube:"))?i("youtube"):i("")}),[e,t]),n}(),[l,s]=(0,r.useState)(0),c=(0,r.useCallback)((()=>{hr(rg)}),[]),u=(0,r.useCallback)((()=>{hr(gv,!0)}),[]),d=(0,r.useCallback)((()=>{0===l&&Yv("click"),s(l+1)}),[l]);return(0,r.useEffect)((()=>{if(l){const e=$e(500).subscribe((()=>s(0)));return()=>e.unsubscribe()}}),[l]),r.createElement("div",{className:"visualizer-controls"},i&&l?r.createElement(ig,null):null,r.createElement(Gv,{className:"visualizer-controls-settings"},r.createElement(Cv,{className:"with-overlay",icon:"info",title:"Info",tabIndex:-1,onClick:c}),r.createElement(Cv,{className:"with-overlay",icon:"settings",title:"Settings",tabIndex:-1,onClick:u})),i?r.createElement(Gv,{className:"visualizer-controls-selector"},r.createElement(Cv,{className:"with-overlay",icon:t?"locked":"unlocked",title:t?"Unlock":"Lock the current visualizer",tabIndex:-1,onClick:t?Qv:Kv}),a?r.createElement(Cv,{className:"with-overlay",icon:"right",title:"Next visualizer",tabIndex:-1,onClick:d}):null):null,o?r.createElement(dr,{className:"source-icon",name:o}):null)}));function og(){return hp(Tm,!0)}const lg=(0,r.memo)((function(){const e=vp(),t=function(){const[e,t]=(0,r.useState)("searching"),n=vp(),i=null==n?void 0:n.id;return(0,r.useEffect)((()=>t("searching")),[i]),(0,r.useEffect)((()=>{switch(null==n?void 0:n.lookupStatus){case Vl.Looking:t("searching");break;case Vl.NotFound:t("ready");break;default:if(n){if(Fo(n)){t("loading");const e=Im().pipe(qt(1)).subscribe((()=>t("ready")));return()=>e.unsubscribe()}t("searching")}else t("ready")}}),[n]),e}(),[n,i]=(0,r.useState)(!1),a=null==e?void 0:e.id;return(0,r.useEffect)((()=>{i(!0);const e=setTimeout((()=>i(!1)),5e3);return()=>clearTimeout(e)}),[a]),r.createElement("div",{className:`interstitial ${t} ${n?"is-recent":""}`},e?r.createElement(sg,{item:e,state:t}):r.createElement(cg,null))}));function sg({item:e,state:t}){const n=og();return r.createElement(r.Fragment,null,r.createElement("h3",null,e.title),e.artists?r.createElement(r.Fragment,null,r.createElement("span",{className:"by"},"by"),r.createElement("h4",null,e.artists.join(", "))):null,r.createElement("span",{className:"interstitial-state"},n?"":`${"ready"===t?"playing":t}...`))}function cg(){return r.createElement("p",null,"The playlist is empty.")}n(6234),console.log("component::Media");const ug=(0,r.memo)((function(){const e=(0,r.useRef)(null),[t,n]=(0,r.useState)(!1),i=function(e,t=200){const[n,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(e){const n=ot(e,"mousemove").pipe(zn((()=>i(!0))),tl(t),zn((()=>i(!1)))).subscribe();return()=>n.unsubscribe()}i(!1)}),[e,t]),n}(e.current,4e3),a=vp(),o=(null==a?void 0:a.mediaType)===yn.Video,l=Xv(),s=!l||"none"===l.providerId;(0,r.useLayoutEffect)((()=>{Wm.appendTo(e.current)}),[]),(0,r.useLayoutEffect)((()=>{const t=ot(document,"fullscreenchange").pipe(Je((()=>document.fullscreenElement===e.current))).subscribe(n);return()=>t.unsubscribe()}),[]),_(e,(0,r.useCallback)((()=>{const t=e.current;Wm.resize(t.clientWidth,t.clientHeight)}),[]));const c=(0,r.useCallback)((()=>{t?document.exitFullscreen():e.current.requestFullscreen()}),[t]);return r.createElement("div",{className:`panel media ${o?"is-playing-video":""} ${s?"no-visualizer":""}  ${i?"":"idle"}`,onDoubleClick:c,ref:e},r.createElement("div",{id:"players"}),r.createElement("div",{id:"visualizers"}),r.createElement(lg,null),r.createElement(ag,null))}));function dg(e){var{icon:t,onClick:n}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["icon","onClick"]);return r.createElement("button",Object.assign({},i,{className:`media-button media-button-${t}`,onClick:n}),r.createElement(dr,{name:t}))}const fg=(0,r.memo)((function(){const[e,t]=(0,r.useState)((()=>Wm.muted)),[n,i]=(0,r.useState)((()=>Wm.volume)),a=n<=.33?"low":n<=.67?"medium":"high";(0,r.useEffect)((()=>{Wm.muted=e}),[e]),(0,r.useEffect)((()=>{Wm.volume=n}),[n]);const o=(0,r.useCallback)((e=>{const n=e.target.valueAsNumber;i(n),t(0===n)}),[]),l=(0,r.useCallback)((()=>{i((t=>e?t||.1:t)),t(!e)}),[e]);return r.createElement("div",{className:`volume-control volume-${a}`},r.createElement(Cv,{icon:e?"muted":"volume",className:"in-frame","aria-label":e?"Unmute":"Mute",title:e?"unmute":"mute",onClick:l}),r.createElement("input",{type:"range","aria-label":"Volume",min:0,max:1,step:.01,value:e?0:n,onChange:o}))}));function mg(){const e=hp(Em,0),t=hp(Cm,0),n=hp(Tm,!0),i=(0,r.useCallback)((e=>{_m(e.target.valueAsNumber)}),[]);return r.createElement("div",{className:"media-controls"},r.createElement("div",{className:"current-time-control"},r.createElement(Rp,{time:e}),r.createElement("input",{id:"playhead",type:"range","aria-label":"Seek",min:0,max:t,step:1,value:e,disabled:n,onChange:i})),r.createElement("div",{className:"playback-control"},r.createElement(fg,null),r.createElement("div",{className:"media-buttons"},r.createElement(dg,{"aria-label":"Previous track",icon:"prev",onClick:Lm}),r.createElement(dg,{"aria-label":n?"Play":"Pause",icon:n?"play":"pause",onClick:n?Mm:Om}),r.createElement(dg,{"aria-label":"Stop",icon:"stop",onClick:$m}),r.createElement(dg,{"aria-label":"Next track",icon:"next",onClick:Dm})),r.createElement("div",{className:"media-buttons-more"},r.createElement("button",{className:"media-button media-button-shuffle","aria-label":"Shuffle",onClick:Rm},"Shuffle"))))}function pg(e){var{items:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["items"]);const i=1===t.length;return r.createElement(Wp,Object.assign({},n,{className:"actions"}),r.createElement("ul",{className:"actions-menu-items"},r.createElement(qp,{label:"Select all",action:"select-all",acceleratorKey:"Ctrl+A",key:"select-all"}),i?r.createElement(qp,{label:"Play",action:"play",acceleratorKey:"Enter",key:"play"}):null,r.createElement(qp,{label:"Remove",action:"remove",acceleratorKey:"Del",key:"remove"}),i?r.createElement(qp,{label:"Info...",action:"info",acceleratorKey:"Ctrl+I",key:"info"}):null))}const hg={view:"details",showTitles:!1,cols:[{title:"#",render:()=>null,align:"right",className:"track"},{title:"Source",render:function({src:e,lookupStatus:t}){const[n]=e.split(":");let i;switch(t){case Vl.Looking:i="lookup-looking";break;case Vl.NotFound:i="lookup-not-found";break;default:i=Ro(n)?n:"lookup-pending"}return r.createElement(dr,{name:i,className:"youtube"===n?"":"show-connectivity"})},align:"center",className:"source"},{title:"Title",render:function({title:e,artists:t}){return t?r.createElement(r.Fragment,null,r.createElement("span",{className:"artist-text"},t.join("/")),r.createElement("span",{role:"separator"},"-"),r.createElement("span",{className:"title-text"},e)):r.createElement("span",{className:"title-text"},e)},className:"title"},{title:"Time",render:Bp,align:"right",className:"duration"}]};const vg=["audio/*","video/*"];function gg(e){var{onSelect:t,onPlay:n,onEject:i}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["onSelect","onPlay","onEject"]);const o=(0,r.useRef)(null),l=hp(bs.observe,[]),s=function(e){const t=String(e).length,{zeroPadLineNumbers:n,showLineNumbers:i,showSourceIcons:a}=hp(Kl,Ql());return(0,r.useMemo)((()=>Object.assign(Object.assign({},hg),{cols:hg.cols.filter((e=>{switch(e.className){case"track":return i;case"source":return a;default:return!0}})).map((e=>"track"===e.className?Object.assign(Object.assign({},e),{render:(e,r)=>function(e,t=0){return String(e+1).padStart(t,"0")}(r,n?t:0)}):e))})),[n,i,a,t])}(l.length),c=vp(),[u,d]=(0,r.useState)(0),f=(0,r.useCallback)((e=>{const[t]=e.src.split(":");return`source-${t} ${e.id===(null==c?void 0:c.id)?"playing":""} ${e.unplayable||e.lookupStatus===Vl.NotFound?"unplayable":""}`}),[c]),m=(0,r.useCallback)((e=>{d(e.length),null==t||t(e)}),[t]),p=(0,r.useCallback)((e=>{null==n||n(e)}),[n]),h=(0,r.useCallback)((e=>{1===e.length&&(null==n||n(e[0]))}),[n]),v=(0,r.useCallback)((e=>{1===e.length&&e[0]===c?null==i||i():bs.remove(e)}),[i,c]),g=(0,r.useCallback)((([e])=>{e&&mp(e)}),[]),b=(0,r.useCallback)(((e,t,i)=>{return a=this,l=void 0,c=function*(){const a=yield function(e,t,n){return i=this,a=void 0,l=function*(){return Yp((t=>r.createElement(pg,Object.assign({},t,{items:e}))),t,n)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):function(e){return e instanceof o?e:new o((function(t){t(e)}))}(t.value).then(n,r)}s((l=l.apply(i,a||[])).next())}));var i,a,o,l}(e,t,i);switch(a){case"play":null==n||n(e[0]);break;case"remove":bs.remove(e);break;case"info":mp(e[0]);break;case"select-all":o.current.selectAll()}},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):function(e){return e instanceof s?e:new s((function(t){t(e)}))}(t.value).then(n,r)}i((c=c.apply(a,l||[])).next())}));var a,l,s,c}),[n]);return r.createElement("div",{className:"playlist"},r.createElement(Np,Object.assign({},a,{className:"media-list playable",layout:s,items:l,itemKey:"id",itemClassName:f,droppable:!0,droppableTypes:vg,multiSelect:!0,reorderable:!0,onContextMenu:b,onDelete:v,onDoubleClick:p,onDrop:bs.insertAt,onEnter:h,onInfo:g,onMove:bs.moveSelection,onSelect:m,listViewRef:o})),r.createElement(Lp,{items:l,size:l.length,selectedCount:u}))}function bg(){const e=vp(),t=og(),n=(0,r.useCallback)((t=>{t===e?Wm.play():(Wm.load(null),Wm.autoplay=!0,bs.setCurrentItem(t))}),[e]);return r.createElement("div",{className:"media-playback "+(t?"paused":"")},r.createElement(R,{id:"media-playback-layout",arrange:"rows"},r.createElement("div",{className:"panel playback"},r.createElement(mg,null),r.createElement(gg,{onPlay:n,onEject:jm})),r.createElement(ug,null)))}function yg(e){const t=e.dataTransfer;t&&(e.preventDefault(),t.effectAllowed="none",t.dropEffect="none")}function wg(e=null){var t,n;const r=navigator.mediaSession;e&&(r.metadata=new MediaMetadata({title:e.title,artist:null===(t=e.artists)||void 0===t?void 0:t.join(", "),album:e.artists?"":e.album,artwork:null===(n=e.thumbnails)||void 0===n?void 0:n.map((e=>({src:Jm(e),sizes:`${e.width}x${e.height}`})))})),r.setActionHandler("play",Mm),r.setActionHandler("pause",Om),r.setActionHandler("stop",$m),r.setActionHandler("previoustrack",Lm),r.setActionHandler("nexttrack",Dm),r.setActionHandler("seekto",(e=>{null!=e.seekTime&&_m(e.seekTime)}))}function xg(e){switch(e.key){case" ":e.target&&!("form"in e.target)&&(e.preventDefault(),kg());break;case"MediaPlayPause":e.preventDefault(),kg();break;case"MediaStop":e.preventDefault(),Wm.stop();break;case"MediaTrackPrevious":e.preventDefault(),Wm.prev();break;case"MediaTrackNext":e.preventDefault(),Wm.next()}}function kg(){Wm.paused?Wm.play():Wm.pause()}console.log("component::MediaPlayback");console.log("module::App"),(0,i.s)(document.getElementById("app")).render(r.createElement((function(){return(0,r.useEffect)((()=>{document.body.classList.add(`browser-${b.name.replace(/\s+/g,"-")}`)}),[]),(0,r.useEffect)((()=>{const e=new J;return Lo().forEach((t=>{const n=t.observeIsLoggedIn().subscribe((e=>{document.body.classList.toggle(`${t.id}-connected`,e),document.body.classList.toggle(`${t.id}-not-connected`,!e)}));e.add(n)})),()=>e.unsubscribe()}),[]),(0,r.useEffect)((()=>{const e=ot(document,"dragenter"),t=ot(document,"dragover"),n=ot(document,"drop"),r=bt(e,t).pipe(zn(yg)),i=bt(r,n.pipe(zn(P))).subscribe();return()=>i.unsubscribe()}),[]),function(){const e=vp(),t=hp(Am,null),n=hp(Em,0),i=hp(Cm,0);(0,r.useEffect)((()=>{navigator.mediaSession.setPositionState({duration:i,position:n,playbackRate:1})}),[i,n]),(0,r.useEffect)((()=>wg(null==t?void 0:t.currentItem)),[t]),(0,r.useEffect)((()=>wg(e)),[e])}(),(0,r.useEffect)((()=>{document.getElementById("system").addEventListener("keydown",T),document.getElementById("popup").addEventListener("keydown",T),document.body.addEventListener("keydown",xg)}),[]),function(){(0,r.useEffect)((()=>{(()=>{var e,t,n,r;e=this,t=void 0,r=function*(){var e,t,n,r;const{state:i="granted"}=(yield null===(e=navigator.permissions)||void 0===e?void 0:e.query({name:"persistent-storage"}))||{};let a=yield null===(n=null===(t=navigator.storage)||void 0===t?void 0:t.persisted)||void 0===n?void 0:n.call(t);"granted"!==i||a||(a=yield null===(r=navigator.storage)||void 0===r?void 0:r.persist()),console.log("Persisted storage:",{state:i,persisted:a})},new((n=void 0)||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}s((r=r.apply(e,t||[])).next())}))})()}),[])}(),r.createElement("main",null,r.createElement(R,{id:"main-layout",arrange:"columns"},r.createElement(Pv,null),r.createElement(bg,null)))}),null))}},e=>{e.O(0,[136,529,503],(()=>(9101,e(e.s=9101)))),e.O()}]);